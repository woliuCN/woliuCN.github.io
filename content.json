{"pages":[{"title":"å‰ç«¯å†…å®¹æ•´ç†","text":"ä½œè€…: cn97 æ­£åœ¨åŠªåŠ›çš„äºº ä»¥ä¸‹æ•´ç†çš„çŸ¥è¯†ç‚¹æ˜¯è‡ªå·±å­¦ä¹ æˆ–è€…å¼€å‘è¿‡ç¨‹ä¸­ç§¯ç´¯çš„(å½“ç„¶æœ‰å‚è€ƒä»–äººçš„åšå®¢æ–‡æ¡£ç­‰,ä¸å–œå‹¿å–·),å­¦ä¹ ä¸­æˆé•¿! JSç›¸å…³ JavaScript [åŸºç¡€] JavaScriptåŸºç¡€é›†åˆ(ä¸€) [åŸºç¡€] JavaScriptåŸºç¡€é›†åˆ(äºŒ) ES6 [æ‰©å±•] ES6çŸ¥è¯†ç‚¹(ä¸€) [promise] ES6çŸ¥è¯†ç‚¹(äºŒ) [class] ES6çŸ¥è¯†ç‚¹(ä¸‰) UIç›¸å…³ CSS3 [åŸºç¡€] csséœ€è®°ç‚¹(ä¸€) [é€‚é…] csséœ€è®°ç‚¹(äºŒ) é¢„å¤„ç†å™¨ æ„å»ºåŒ–å·¥å…· WebPack4 [æ¦‚å¿µ] é…ç½®æ–‡ä»¶åŠå…¶ç›¸å…³æ¦‚å¿µ [é…ç½®] åŸºæœ¬é…ç½®(ä¸Š) [é…ç½®] åŸºæœ¬é…ç½®(ä¸‹) [è¿›é˜¶] è¿›é˜¶ä½¿ç”¨(ä¸Š) [è¿›é˜¶] è¿›é˜¶ä½¿ç”¨(ä¸‹) [ä¼˜åŒ–] ç›¸å…³çš„ä¼˜åŒ–ç­–ç•¥","link":"/bigweb/index.html"},{"title":"ç®—æ³•ç›¸å…³æ•´ç†","text":"ä½œè€…: cn97 æ­£åœ¨åŠªåŠ›çš„äºº ä»¥ä¸‹æ•´ç†çš„çŸ¥è¯†ç‚¹æ˜¯è‡ªå·±å­¦ä¹ æˆ–è€…å¼€å‘è¿‡ç¨‹ä¸­ç§¯ç´¯çš„(å½“ç„¶æœ‰å‚è€ƒä»–äººçš„åšå®¢æ–‡æ¡£ç­‰,ä¸å–œå‹¿å–·),å­¦ä¹ ä¸­æˆé•¿! è®¾è®¡æ¨¡å¼ PS: å‚è€ƒè‡ªã€Šjavascriptè®¾è®¡æ¨¡å¼ã€‹åŠæŸ¥é˜…ç›¸å…³çš„åšå®¢èµ„æ–™ åˆ›å»ºå‹æ¨¡å¼ å•ä¾‹æ¨¡å¼ å·¥å‚æ¨¡å¼ æŠ½è±¡æ¨¡å¼ ç»“æ„å‹æ¨¡å¼ é€‚é…å™¨æ¨¡å¼ ä»£ç†æ¨¡å¼ æ¡¥æ¥æ¨¡å¼ è¡Œä¸ºå‹æ¨¡å¼ å‘½ä»¤æ¨¡å¼ ç­–ç•¥æ¨¡å¼ æ¨¡æ¿æ¨¡å¼ è´£ä»»é“¾æ¨¡å¼ å¤‡å¿˜å½•æ¨¡å¼ è¿­ä»£å™¨æ¨¡å¼ è§‚å¯Ÿè€…æ¨¡å¼ é¢è¯•ç®—æ³•é¢˜JavaScriptå®ç° PS: ç®—æ³•é¢˜æ˜¯åœ¨ç‰›å®¢ç½‘ä¸Šçš„ã€Šå‰‘æŒ‡offerã€‹ç®—æ³•é‡Œé¢æœé›†çš„,ä»¥åŠé«˜çº§å‰ç«¯é¢è¯•å°ç¨‹åºçš„ä¸€äº›ç¼–ç¨‹é¢˜ï¼Œæœªæ¥å¯èƒ½ä¼šåœ¨leetcodeä¸Šç»ƒä¹ â€¦. æ•°ç»„ ä¸¤ä¸ªæ•°ç»„äº¤é›† æœ‰åºæ•°ç»„çš„ä¸­ä½æ•° å¯»æ‰¾æ•°æ˜¯æ•°å­—çš„æ•°å­—ä¹‹å’Œçš„ä¸‹æ ‡æ•°ç»„ é“¾è¡¨ ä»å°¾åˆ°å¤´æ‰“å°é“¾è¡¨ æ ‘ é‡å»ºäºŒå‰æ ‘ å¹¿åº¦éå†å®ç°æ·±æ‹·è´ æ·±åº¦éå†å®ç°æ·±æ‹·è´ å¯¹è±¡ å¯¹è±¡æ•°ç»„è½¬æ ‘å½¢ç»“æ„ å­—ç¬¦ä¸² é•¿æ•´æ•°ç›¸åŠ  ç»Ÿè®¡è¿ç»­å‡ºç°çš„å­—ç¬¦åŠæ¬¡æ•°","link":"/algorithm/index.html"}],"posts":[{"title":"ES6çŸ¥è¯†ç‚¹(ä¸€)","text":"ğŸ‘‡å†…å®¹é€Ÿè§ˆğŸ‘‡ ä¸€äº›æ–°ç‰¹æ€§è·Ÿæ‹“å±• ç®­å¤´å‡½æ•°ç‰¹ç‚¹åŠä¸æ™®é€šå‡½æ•°çš„åŒºåˆ« Symbolæ•°æ®ç±»å‹ ä¸€äº›æ–°ç‰¹æ€§è·Ÿæ‹“å±• const / Let ä¸ºäº†å¼¥è¡¥jsæ²¡æœ‰å—çº§ä½œç”¨åŸŸçš„ç¼ºé™·ï¼Œå¼•å…¥äº†letå—çº§å˜é‡å£°æ˜ã€‚åŒæ—¶ä¹Ÿå¼•å…¥äº†const å¸¸é‡ã€‚å…¶ä½¿ç”¨è·Ÿå…¶ä»–è¯­è¨€ä¸€æ ·ï¼Œåªæ˜¯éœ€è¦æ³¨æ„ä»¥ä¸‹ä»¥ä¸‹å‡ ç‚¹ï¼š letè·Ÿconstæ‰€å£°æ˜çš„å˜é‡åªåœ¨æ‰€åœ¨çš„ä»£ç å—é‡Œé¢æ‰æœ‰æ•ˆï¼Œä¸å­˜åœ¨å˜é‡æå‡ï¼Œä¸”ä¸èƒ½é‡å¤å£°æ˜ï¼Œconståœ¨å£°æ˜åå¿…é¡»åˆå§‹åŒ–ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ { var a=100; console.log(b); //å‡ºé”™ï¼ const b=200; let c=50;}console.log(a); //100console.log(b); //å‡ºé”™ï¼console.log(c); //å‡ºé”™ï¼ ES6ä¸­ï¼Œvarã€functionå£°æ˜çš„å…¨å±€å˜é‡æ˜¯ä½œä¸ºwindow çš„å±æ€§ï¼Œè€Œletã€constã€classå£°æ˜çš„å…¨å±€å˜é‡åˆ™æ˜¯åœ¨Scriptå¯¹è±¡ä¸Šã€‚ var a=100;const b=200;let c=50;console.log(window.a);//100console.log(window.b);//undefined//psï¼šå…·ä½“å¯ä»¥é€šè¿‡è°·æ­Œæµè§ˆå™¨å¼€å‘è€…æ¨¡å¼æŸ¥çœ‹Scopeå¯ä»¥çœ‹åˆ° æ¨¡æ¿å­—ç¬¦ä¸² ä»¥å¾€ES5è¾“å‡ºå­—ç¬¦ä¸²éƒ½æ˜¯é€šè¿‡+å·æ‹¼æ¥çš„ï¼Œååˆ†éº»çƒ¦ï¼Œå­—ç¬¦ä¸²è¿˜ä¸æ”¯æŒæ¢è¡Œã€‚ES6é‡Œé¢çš„æ¨¡æ¿å­—ç¬¦ä¸²æ˜¯ä½¿ç”¨``æ¥å£°æ˜çš„ï¼Œé‡Œé¢çš„å˜é‡åˆ™æ˜¯ç”¨${item}æ¥è¡¨ç¤ºï¼Œè·Ÿé‚£äº›æ¨¡æ¿å¼•æ“åŠŸèƒ½æœ‰ç‚¹ç±»ä¼¼ã€‚ //ES5ä¸‹$('#result').append( 'There are &lt;b&gt;' + basket.count + '&lt;/b&gt; ' + 'items in your basket, ' + '&lt;em&gt;' + basket.onSale + '&lt;/em&gt; are on sale!');//æ¨¡æ¿å­—ç¬¦ä¸²$('#result').append(` There are &lt;b&gt;${basket.count}&lt;/b&gt; items in your basket, &lt;em&gt;${basket.onSale}&lt;/em&gt; //åµŒå…¥å˜é‡ are on sale!`);/*å½“æ¨¡æ¿å­—ç¬¦ä¸²è¡¨ç¤ºå¤šè¡Œå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„ç©ºæ ¼å’Œç¼©è¿›éƒ½ä¼šè¢«ä¿ç•™åˆ°è¾“å‡ºä¸­ï¼Œæ¯”å¦‚&lt;ul&gt;æ ‡ç­¾å‰é¢ä¼šæœ‰ä¸€ä¸ªæ¢è¡Œã€‚å¦‚æœä½ ä¸æƒ³è¦è¿™ä¸ªæ¢è¡Œï¼Œå¯ä»¥ä½¿ç”¨trimæ–¹æ³•æ¶ˆé™¤å®ƒã€‚*/$('#list').html(`&lt;ul&gt; &lt;li&gt;first&lt;/li&gt; &lt;li&gt;second&lt;/li&gt;&lt;/ul&gt;`.trim()); æ‰©å±•è¿ç®—ç¬¦è·ŸåŒå†’å·è¿ç®—ç¬¦ ES6ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦å¯ä»¥æ¥å±•å¼€æ•°ç»„æˆ–è€…å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥ç»™å¯¹è±¡æˆ–è€…æ•°ç»„æ·»åŠ å±æ€§ã€‚è€ŒåŒå†’å·è¿ç®—ç¬¦æ˜¯ç”¨æ¥ç»‘å®šå‡½æ•°çš„thisæŒ‡é’ˆçš„æŒ‡å‘ã€‚ //æ‰©å±•è¿ç®—ç¬¦å±•å¼€æ•°ç»„/å¯¹è±¡var a=[1,2,3];var b={name:\"cn\",age:12};var c={...b}console.log(...a); //1 2 3console.log(c); //{name: \"cn\", age: 12}//æ·»åŠ æ•°ç»„/å¯¹è±¡å±æ€§var a=[1,2,3];var b=[4,5,...a];var c={name:\"cn\",age:12};var d={sex:\"man\",...c}console.log(b);//[4, 5, 1, 2, 3] console.log(d);//{sex: \"man\", name: \"cn\", age: 12}/*åŒå†’å·è¿ç®—ç¬¦::å·¦è¾¹æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå³è¾¹æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿ç®—ç¬¦è‡ªåŠ¨å°†å·¦è¾¹çš„å¯¹è±¡ï¼ˆä½œä¸ºthisï¼‰ç»‘å®šåˆ°å³è¾¹å‡½æ•°ä¸Šç±»ä¼¼äºcall/apply/bindçš„ä½œç”¨,å¾—ç”¨babelè½¬ç æ‰èƒ½å®ç°*/foo::bar;// ç­‰åŒäºbar.bind(foo);foo::bar(...arguments);// ç­‰åŒäºbar.apply(foo, arguments); forâ€¦ofã€forâ€¦inå’ŒforEachã€mapåŒºåˆ« for-ofï¼šå…·æœ‰è¿­ä»£å™¨æ¥å£ï¼Œå¯ä»¥éå†æ•°ç»„ï¼Œç±»æ•°ç»„ï¼Œsetå’Œmapé›†å’Œç­‰ç­‰éƒ¨ç½²äº†è¿­ä»£å™¨æ¥å£çš„ã€‚ä¸èƒ½éå†æ™®é€šå¯¹è±¡ï¼Œå¯ä»¥ä¸­æ–­ã€‚ for-inï¼šéå†å¯¹è±¡è‡ªèº«è·Ÿç»§æ‰¿çš„å¯æšä¸¾çš„å±æ€§ï¼Œå³è·å–çš„æ˜¯é”®å€¼æˆ–è€…ä¸‹æ ‡ï¼Œå¯ä»¥ä¸­æ–­ã€‚ forEach:åªèƒ½éå†æ•°ç»„ï¼Œä¸èƒ½ä¸­æ–­ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚ map:åªèƒ½éå†æ•°ç»„ï¼Œä¸èƒ½ä¸­æ–­ï¼Œè¿”å›çš„æ˜¯ä¿®æ”¹åçš„æ•°ç»„ã€‚ ç®­å¤´å‡½æ•°ç‰¹ç‚¹åŠä¸æ™®é€šå‡½æ•°çš„åŒºåˆ« åœ¨ES6ä¹‹å‰ï¼Œå‡½æ•°å†…éƒ¨çš„thisæ˜¯æŒ‡å‘è°è°ƒç”¨äº†è¿™ä¸ªå‡½æ•°è¿™ä¸ªthiså°±æ˜¯æŒ‡å‘è°çš„ï¼Œå½“åœ¨ä¸€äº›å›è°ƒå‡½æ•°é‡Œé¢ï¼Œå°±å¯èƒ½å‡ºç°æƒ³è®¿é—®æŸäº›å¯¹è±¡çš„å±æ€§çš„æ—¶å€™ï¼ŒthisæŒ‡å‘ä¸æ˜¯è¿™ä¸ªå¯¹è±¡ï¼Œå¯¼è‡´è®¿é—®ä¸äº†ï¼Œè§£å†³çš„æ–¹æ³•ä¸€ä¸ªæ˜¯é€šè¿‡call,applyç­‰æ–¹æ³•æ”¹å˜thisçš„æŒ‡å‘ï¼Œè¦ä¹ˆå°±ä¸€å¼€å§‹å°†thisèµ‹å€¼ç»™that,è®©ä½œç”¨åŸŸé“¾æ¥è®¿é—®ã€‚å¯ä»¥é€šè¿‡ä½¿ç”¨ç®­å¤´å‡½æ•°æ¥è§£å†³è¿™äº›ç¹ççš„æ­¥éª¤ã€‚å› ä¸ºç®­å¤´å‡½æ•°ä½“å†…çš„thiså¯¹è±¡ï¼Œå°±æ˜¯å®šä¹‰æ—¶æ‰€åœ¨çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ—¶æ‰€åœ¨çš„å¯¹è±¡ã€‚å³thisæ˜¯ç»§æ‰¿è‡ªçˆ¶çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚è¯ä¸å¤šè¯´ï¼Œçœ‹ä»£ç å°±çŸ¥é“äº†ã€‚ var rules=1; var Empt={ rules:2, click:()=&gt;{ console.log(this.rules); }};function Button(){ this.rules=3; this.click=()=&gt;{ console.log(this.rules); };} Empt.click(); /* 1 ç®­å¤´å‡½æ•°åœ¨åˆ›å»ºæ—¶ç¡®å®šthisçš„æŒ‡å‘ï¼Œ å› ä¸ºclickç®­å¤´å‡½æ•°æ˜¯ä½œä¸ºå¯¹è±¡å­—é¢é‡çš„å±æ€§å®šä¹‰ï¼Œ å¯¹è±¡å­—é¢é‡åœ¨å…¨å±€å®šä¹‰ï¼Œæ‰€ä»¥this æŒ‡å‘å…¨å±€ */ var button=new Button(); button.click(); /*3 ç®­å¤´å‡½æ•°ä½œä¸ºæ–°å»ºå¯¹è±¡çš„å±æ€§ï¼Œ Buttonå‡½æ•°thisæŒ‡å‘æ–°å»ºå¯¹è±¡ï¼Œ æ‰€ä»¥thisæŒ‡å‘æ–°å»ºå¯¹è±¡ */ Symbolæ•°æ®ç±»å‹ åœ¨ES6å¼•å…¥çš„ä¸€ç§æ–°çš„åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œè¡¨ç¤ºç‹¬ä¸€æ— äºŒçš„çš„å€¼ï¼Œå¯ä»¥ç”¨æ¥ä½œä¸ºå¸¸é‡ï¼Œæˆ–è€…å®šä¹‰ç§æœ‰å˜é‡ã€‚Symbolåªèƒ½é€šè¿‡Symbolå‡½æ•°ç”Ÿæˆã€‚å› ä¸ºå®ƒæ˜¯ä¸€ç§åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨typeofæ£€æŸ¥çš„æ—¶å€™ï¼Œè¿”å›çš„æ˜¯â€™symbolâ€™ã€‚ä¸”å› ä¸ºæ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œæ‰€ä»¥æ¯”è¾ƒä¸¤ä¸ªsymbolå®ä¾‹çš„æ—¶å€™ï¼Œå¾€å¾€éƒ½æ˜¯è¿”å›falseã€‚ ä½œä¸ºå¯¹è±¡å±æ€§åï¼šç”¨äºä¿è¯ä¸ä¼šå‡ºç°åŒåçš„å±æ€§ï¼Œè¿˜å¯ä»¥å®šä¹‰å¸¸é‡ã€‚æ³¨æ„ï¼symbolå€¼ä½œä¸ºå¯¹è±¡çš„å±æ€§åæ—¶ï¼Œä¸èƒ½ç”¨ç‚¹è¿ç®—ç¬¦ï¼Œå› ä¸ºç‚¹å·åé¢è·Ÿçš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¸æ˜¯ä¸€ä¸ªsymbolå€¼ã€‚ let mySymbol = Symbol();// ç¬¬ä¸€ç§å†™æ³•let a = {};a[mySymbol] = 'Hello!';// ç¬¬äºŒç§å†™æ³•let a = { [mySymbol]: 'Hello!' //å¸¸ç”¨}; å±æ€§åçš„éå†ï¼šSymbolç±»å‹çš„keyæ˜¯ä¸èƒ½é€šè¿‡Object.keys()æˆ–è€…for...inæ¥æšä¸¾çš„ï¼Œå®ƒæœªè¢«åŒ…å«åœ¨å¯¹è±¡è‡ªèº«çš„å±æ€§åé›†åˆ(property names)ä¹‹ä¸­ï¼Œåªèƒ½ç”¨Object.getOwnPropertySymbolsæ–¹æ³•è·å–æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰Symbolå±æ€§åã€‚æˆ–è€…ç”¨Reflect.ownKeys`æ–¹æ³•è¿”å›æ‰€æœ‰ç±»å‹çš„é”®åã€‚ const obj = {};let a = Symbol('a');let b = Symbol('b');obj[a] = 'Hello';obj[b] = 'World';const objectSymbols = Object.getOwnPropertySymbols(obj);objectSymbols// [Symbol(a), Symbol(b)] å…¨å±€çš„symbolï¼šå¦‚æœæƒ³å…±äº«åŒä¸€ä¸ªsymbolï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨Symbol.for()æ–¹æ³•ã€‚è¯¥æ–¹æ³•è·ŸSymbolæ–¹æ³•ç±»ä¼¼ï¼Œåªä¸è¿‡è¿™ä¸ªæ–¹æ³•æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå½“æœ‰è¿™æ ·çš„ä¸€ä¸ªSymbolå€¼ï¼Œåˆ™è¿”å›ï¼Œå¦åˆ™åˆ™æ–°å»ºä¸€ä¸ªä»¥è¯¥å­—ç¬¦ä¸²ä¸ºåç§°çš„Symbolå€¼ã€‚","link":"/2020/03/12/es6/es6-base-1/"},{"title":"javaScriptåŸºç¡€çŸ¥è¯†(ä¸Š)","text":"ğŸ‘‡å†…å®¹é€Ÿè§ˆğŸ‘‡ åŸºæœ¬çš„æ•°æ®ç±»å‹åŠåˆ¤æ–­åŒºåˆ« é—­åŒ…çš„ä¸€äº›é—®é¢˜ æµ…æ‹·è´ä¸æ·±æ‹·è´çš„åŒºåˆ«è·Ÿå®ç° åŸå‹ä¸åŸå‹å¯¹è±¡ åŸºæœ¬çš„æ•°æ®ç±»å‹åŠåˆ¤æ–­åŒºåˆ«â€‹ JSåœ¨ES6å‡ºç°ä¹‹å‰å°±åªæœ‰ä»¥ä¸‹å‡ ä¸ªæ•°æ®ç±»å‹ï¼šNumberã€Stringã€Booleanã€Undefinedã€Nullã€Functionã€Objectã€‚nullåªèƒ½è‡ªå·±æ‰‹åŠ¨èµ‹å€¼ï¼Œè€Œundefinedå½“å£°æ˜äº†å˜é‡æ²¡æœ‰èµ‹å€¼çš„æ—¶å€™ï¼Œé»˜è®¤ä¼šèµ‹å€¼ä¸ºundefined ã€‚nullä¹Ÿæ˜¯å¯¹è±¡ã€‚ åŸºæœ¬æ•°æ®ç±»å‹ï¼šNumberã€Stringã€Booleanã€Undefinedã€Null å¼•ç”¨ç±»å‹ï¼šFunctionã€Object â€‹ åˆ¤æ–­ç±»å‹å¸¸ç”¨çš„æ–¹æ³•æ˜¯ typeof æ“ä½œç¬¦ã€instanceofæ“ä½œç¬¦ã€Object.prototype.toString.callæ–¹æ³•ã€‚ä¸‰è€…çš„åŒºåˆ«æ˜¯ï¼š â‘  typeofï¼šèƒ½åˆ¤æ–­åŸºæœ¬çš„æ•°æ®ç±»å‹,é™¤äº†nullï¼Œåœ¨åˆ¤åˆ«æ˜¯å¦æ˜¯Arrayçš„æ—¶å€™ä¹Ÿä¸èƒ½åˆ¤åˆ«å‡ºæ¥ï¼Œéƒ½ä¼šè¿”å›æ˜¯objectã€‚ â‘¡ instanceofï¼šä¸èƒ½åˆ¤åˆ«åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œä½†èƒ½åˆ¤åˆ«å¯¹è±¡ï¼ˆå…·ä½“æ˜¯å“ªä¸ªç±»ï¼‰ï¼Œé€šè¿‡åŸå‹é“¾åˆ¤æ–­ã€‚ â‘¢ Object.prototype.toString.callï¼šä¹Ÿæ˜¯åªèƒ½åˆ¤åˆ«åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œæ— æ³•è¯†åˆ«å…·ä½“æ˜¯å“ªä¸ªå¯¹è±¡ã€‚ function A(){ return}var B = null;var c ;var D = new A();var E = { name:\"cn\",} //typeofconsole.log(typeof A) // functionconsole.log(typeof B) // objectconsole.log(typeof C) // undefinedconsole.log(typeof D) // objectconsole.log(typeof E) // object//instanceofconsole.log(A instanceof Function) // trueconsole.log(D instanceof A) // trueconsole.log(E instanceof A) // falseconsole.log(E instanceof Object) // true//Object.prototype.toString.call()console.log(Object.prototype.toString.call(A)) // [object Function]console.log(Object.prototype.toString.call(B)) // [object Null]console.log(Object.prototype.toString.call(c)) // [object Undefined]console.log(Object.prototype.toString.call(D)) // [object Object] é—­åŒ…çš„ä¸€äº›é—®é¢˜â€‹ ä½•ä¸ºé—­åŒ…ï¼Ÿé—­åŒ…å°±æ˜¯èƒ½çªç ´ä½œç”¨åŸŸé“¾ï¼Œèƒ½è¯»å–åˆ°å‡½æ•°å†…éƒ¨çš„å˜é‡ï¼Œå³å¦‚æœä¸€ä¸ªå‡½æ•°ä¼šåœ¨çˆ¶çº§è¿”å›åç•™ä½å¯¹çˆ¶çº§ä½œç”¨åŸŸçš„è¿æ¥çš„è¯ï¼Œç›¸åº”çš„é—­åŒ…å°±ä¼šè¢«åˆ›å»ºã€‚å…¶å®å‡½æ•°æœ¬èº«å°±æ˜¯ä¸€ä¸ªé—­åŒ…ï¼ //#1 å°†è¿”å›å€¼èµ‹å€¼ç»™å¦å¤–ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œä»è€Œç”Ÿæˆä¸€ä¸ªå¯ä»¥è®¿é—®å‡½æ•°ç§æœ‰ç©ºé—´çš„å‡½æ•°ã€‚var a=\"global\";var F=function(){ var b=\"local\"; var N=function(){ var c=\"inner\"; return b; }; return N;};var inner=F();inner();//local é€šè¿‡è¿™æ ·å°†Nå‡çº§ä¸ºå…¨å±€å˜é‡ï¼Œå› ä¸ºNå¯ä»¥è®¿é—®Fé‡Œé¢çš„å˜é‡ï¼Œæ‰€ä»¥innerå¯ä»¥è®¿é—®åˆ°bï¼›//#2ï¼Œå£°æ˜ä¸€ä¸ªå…¨å±€å ä½ç¬¦ï¼Œå®è´¨æ˜¯å°†Nå‡çº§ä¸ºå…¨å±€å˜é‡ã€‚var inner;var F=function(){ var b=\"local\"; var N=function(){ return b; }; inner=N;}inner();// local é—­åŒ…å¥½å¤„å°±æ˜¯èƒ½è®©æˆ‘ä»¬è®¿é—®åˆ°å‡½æ•°ä½œç”¨åŸŸé‡Œé¢çš„å˜é‡ï¼Œå¯ä»¥ç”¨æ¥å°è£…ç§æœ‰å˜é‡ã€‚ä½†æœ‰æ—¶å€™å› ä¸ºé—­åŒ…ä¹Ÿå¸¦æ¥äº†ä¸€äº›ä¸æƒ³è¦çš„ç»“æœã€‚ //#3å› ä¸ºé—­åŒ…å¯èƒ½å‡ºç°çš„é”™è¯¯function F(){ var arr=[],i; for(i=0;i&lt;3;i++){ arr[i]=function(){ return i; }; }return arr;}var arr=F();//arr[0]() 3 arr[1]() 3 arr[2]() 3å‡ºç°è¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºè¿™é‡Œåˆ›å»ºäº†ä¸‰ä¸ªé—­åŒ…ï¼Œä»–ä»¬éƒ½æŒ‡å‘äº†å…±åŒçš„å˜é‡i,å®ƒä»¬æ‹¥æœ‰çš„æ˜¯ç›¸å…³åŸŸåœ¨åˆ›å»ºæ˜¯çš„ä¸€ä¸ªå¼•ç”¨ã€‚//è§£å†³æ–¹æ³•ï¼š1.ç«‹å³æ‰§è¡Œå‡½æ•° for(i=0;i&lt;3;i++){ arr[i]=(function (x){ return x; })(i); }return arr; }2.èµ‹å€¼ç»™å±€éƒ¨å˜é‡function F(){function binder(x){ return function(){ return x; };} var arr=[],i; for(i=0;i&lt;3;i++){ arr[i]=binder(i); }return arr;}//ä¸¤ç§æ–¹æ³•çš„å®è´¨éƒ½æ˜¯å°†å…±åŒçš„å˜é‡å˜æˆè‡ªå·±çš„å±€éƒ¨å˜é‡3. ä½¿ç”¨ES6çš„ letfunction F(){ var arr=[]; for(let i=0;i&lt;3;i++){ arr[i]=function(){ return i; }; }return arr;} æµ…æ‹·è´ä¸æ·±æ‹·è´çš„åŒºåˆ«è·Ÿå®ç° å¯¹äºå¼•ç”¨ç±»å‹ï¼Œæµ…æ‹·è´åªæ˜¯å¤åˆ¶äº†å¯¹è±¡åœ¨å †é‡Œé¢çš„å¼•ç”¨åœ°å€ï¼Œå¦‚æœä¿®æ”¹äº†å…¶å€¼ï¼Œå…¶ä»–ä¸€èµ·å¼•ç”¨åˆ°è¿™ä¸ªå¯¹è±¡çš„å€¼ä¹Ÿä¼šå—åˆ°å½±å“ã€‚è€Œå¦‚æœæƒ³å®ç°ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´äº’ä¸å½±å“ï¼Œå°±éœ€è¦å®ç°æ·±æ‹·è´ï¼Œæ·±æ‹·è´æ˜¯å¼€è¾Ÿäº†ä¸€ä¸ªæ–°çš„æ ˆï¼Œä¸¤ä¸ªå¯¹è±¡å¯¹åº”ä¸¤ä¸ªä¸åŒçš„åœ°å€ï¼Œä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œä¸ä¼šæ”¹å˜å¦ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ã€‚ æµ…æ‹·è´å°±ä¸å¤šè¯´äº†ï¼Œæ·±æ‹·è´æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š å¦‚æœåªæ˜¯æ‹·è´ä¸€å±‚å¯¹è±¡çš„è¯å°±å¯ä»¥ä½¿ç”¨ES6æä¾›çš„Object.assign() var obj1={a:1,b:2};var obj2=Object.assign({},obj1);obj1.a=4;console.log(obj2);//{a: 1, b: 2} æƒ³ç®€å•ç²—æš´å°±ä½¿ç”¨JSONå®ç° var obj1={a:10,b:{c:[1,2,3]}};var obj2=JSON.parse(JSON.stringify(obj1));obj2.b.c[0]=2;console.log(obj1);//{a:10,b:{c:[1,2,3]}}console.log(obj2);//{a:10,b:{c:[2,2,3]}} æœ€ç›´æ¥å°±æ˜¯é€’å½’å®ç° function deepCopy(p,c){ c=c||{}; for(var i in p){ if(typeof p[i]==='object'){ //æ•°ç»„ä¹Ÿå¾—æ·±æ‹·è´ä¸€ä»½ c[i]=Array.isArray(p[i])?p[i].splice():{}; deepcopy(p[i],c[i]); }else{ c[i]=p[i]; } } return c} lodashåº“æä¾›çš„æ–¹æ³• var _=require('lodash');var obj1={a:10,b:{c:[1,2,3]}};var obj2=_.cloneDeep(obj); åŸå‹ä¸åŸå‹å¯¹è±¡â€‹ åŸå‹ï¼ˆprotoï¼‰è·ŸåŸå‹å¯¹è±¡ï¼ˆprototypeï¼‰ä¸€å¼€å§‹å°ç¼–ä¹Ÿæ˜¯æ™•æ™•ï¼Œæäº†å¤§åŠå¤©æ‰æ˜ç™½æ˜¯ä»€ä¹ˆã€‚ä¸ªäººä¹ æƒ¯è¿™æ ·å«æ¯”è¾ƒå®¹æ˜“åˆ†æ¸…æ¥šã€‚å…¶å®å½’å’å°±æ˜¯ä¸€å¥è¯ï¼ŒåŸå‹æ˜¯æ¯ä¸ªå¯¹è±¡éƒ½ä¼šæœ‰çš„å±æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ªéšå¼æŒ‡é’ˆï¼ŒæŒ‡å‘äº†åˆ›å»ºè¿™ä¸ªå¯¹è±¡çš„æ„é€ å™¨å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚åŸå‹å¯¹è±¡å°±åªæœ‰å‡½æ•°æ‰æ‹¥æœ‰ã€‚åˆå› ä¸ºå‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼ˆä¹Ÿæ˜¯é€šè¿‡new Functionå‡ºæ¥çš„ï¼Œæˆ‘ä»¬å¹³æ—¶å†™çš„éƒ½æ˜¯å‡½æ•°å­—é¢é‡ï¼‰ï¼Œæ‰€ä»¥å®ƒæœ¬èº«æ‹¥æœ‰äº†ä¸¤ä¸ªå±æ€§ï¼Œå³ä¸Šé¢çš„åŸå‹è·ŸåŸå‹å¯¹è±¡ã€‚ function A(){ this.name=\"cn\"; this.age=\"18\";}var obj=new A();console.log(obj.__proto__==A.prototype);//true è¿™æ—¶å€™å°±å¾—æ’ä¸ªé¢˜å¤–è¯å•¦ï¼Œåœ¨ES6ä¹‹å‰ï¼Œæ˜¯æ²¡æœ‰classè¿™ä¸ªè¯­æ³•ç³–çš„ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯é€šè¿‡æ„é€ å™¨å‡½æ•°åˆ›å»ºçš„ã€‚ //new ä¸€ä¸ªå¯¹è±¡çš„è¿‡ç¨‹function A(){ this.name=\"cn\"; this.age=\"18\";}var obj=new A();å½“new ä¸€ä¸ªå®ä¾‹å¯¹è±¡çš„æ—¶å€™ï¼Œå…¶å®å¤§è‡´å‘ç”Ÿäº†è¿™æ ·çš„äº‹æƒ…ï¼š1.é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªç©ºå¯¹è±¡ var obj={};2.å°†è¿™ä¸ªå¯¹è±¡çš„åŸå‹æŒ‡å‘è¿™ä¸ªæ„é€ å™¨å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼Œå®ç°å…±äº«æ–¹æ³•çš„ç»§æ‰¿obj.__proto__=A.prototype;3.ä½¿ç”¨call/applyå°†æ„é€ å™¨å‡½æ•°é‡Œé¢çš„thisæŒ‡å‘æ”¹å˜æˆä¸ºobjA.call(obj)4.æ„é€ å™¨å‡½æ•°æœ€ç»ˆè¿”å›thisï¼Œå°±æ˜¯æˆ‘ä»¬çš„newçš„å®ä¾‹å¯¹è±¡ â€‹ æ„é€ å™¨å‡½æ•°é‡Œé¢çš„å±æ€§æ˜¯å®ä¾‹çš„å±æ€§ï¼Œæ˜¯å±äºæ¯ä¸ªå®ä¾‹å¯¹è±¡çš„ï¼Œè€Œæ¯ä¸ªå®ä¾‹å¯¹è±¡éƒ½ä¼šæœ‰å…±æœ‰çš„å±æ€§ï¼Œé‚£å°±æ˜¯åŸå‹å¯¹è±¡ä¸Šçš„ã€‚ function Gadget(name,color){ this.name=name; this.color=color;}Gadget.prototype.pirce=100;var newtoy=new Gadget('cn','blue');newtoy.name //\"cn\"newtoy.price //100/*å½“æˆ‘ä»¬è®¿é—®priceå±æ€§çš„æ—¶å€™ï¼ŒJavaScriptå¼•æ“é¦–å…ˆæŸ¥è¯¢newtoyå¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œå°±è¿”å›ï¼Œä½†å¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±ä¼šå»æŸ¥è¯¢ç”¨äºåˆ›å»ºå½“å‰å¯¹è±¡çš„æ„é€ å™¨å‡½æ•°çš„åŸå‹ï¼Œå³è®¿é—®newtoy.constructor.prototype æ‰¾åˆ°å°±è¿”å›ã€‚å†æ‰¾ä¸åˆ°å°±é¡ºè€…åŸå‹é“¾æ‰¾ä¸‹å»ï¼Œç›´åˆ°æ‰¾åˆ°Object*/","link":"/2020/03/09/javascript/javaScript-base-1/"},{"title":"é‡å»ºäºŒå‰æ ‘","text":"é¢˜ç›®æè¿°:è¾“å…¥æŸäºŒå‰æ ‘çš„å‰åºéå†å’Œä¸­åºéå†çš„ç»“æœï¼Œè¯·é‡å»ºå‡ºè¯¥äºŒå‰æ ‘ã€‚å‡è®¾è¾“å…¥çš„å‰åºéå†å’Œä¸­åºéå†çš„ç»“æœä¸­éƒ½ä¸å«é‡å¤çš„æ•°å­—ã€‚ä¾‹å¦‚è¾“å…¥å‰åºéå†åºåˆ—{1,2,4,7,3,5,6,8}å’Œä¸­åºéå†åºåˆ—{4,7,2,1,5,3,8,6}ï¼Œåˆ™é‡å»ºäºŒå‰æ ‘å¹¶è¿”å›ã€‚ æ€è·¯:å› ä¸ºå‰åºä¸ä¸­åºåœ¨å„è‡ªå·¦å³èŠ‚ç‚¹ä¸‹çš„åºåˆ—å†…å®¹æ˜¯ä¸€æ ·çš„ï¼Œåˆ©ç”¨å‰åºä¸ä¸­åºçš„æ€§è´¨ï¼Œï¼ˆåœ¨å‰åºä¸­æ ¹èŠ‚ç‚¹æ°¸è¿œæ˜¯åœ¨ç¬¬ä¸€ä¸ªçš„ï¼Œåˆ©ç”¨å‰åºå¾—å‡ºçš„æ ¹èŠ‚ç‚¹åœ¨ä¸­åºé‡Œé¢å¯ä»¥åˆ†å‰²å‡ºå·¦å³èŠ‚ç‚¹çš„åºåˆ—ï¼‰è¿›è¡Œé€’å½’å¤„ç†ã€‚æ³¨æ„é€’å½’çš„å‡ºå£ï¼ ä»£ç å®ç° function TreeNode(x) { this.val = x; this.left = null; this.right = null;} /* * @description: é‡å»ºäºŒå‰æ ‘ * @param {Array} pre å‰åºæ•°ç»„ * @param {Array} vin ä¸­åºæ•°ç»„ * @return: äºŒå‰æ ‘*/function reConstructBinaryTree(pre, vin){ var rootTreeNode = null; //æ ¹èŠ‚ç‚¹ if(pre.length&gt;1){ //å¤šä¸ªèŠ‚ç‚¹çš„æ—¶å€™ let vinIndex = vin.indexOf(pre[0]); //åˆ†å‰²ä¸‹æ ‡ let rootTreeNode = new TreeNode(pre.shift()); let vinLeftArray = vin.slice(0,vinIndex); let vinRightArray = vin.slice(vinIndex+1); let preLeftArray = pre.slice(0,vinIndex); let preRightArray = pre.slice(vinIndex); rootTreeNode.left = reConstructBinaryTree(preLeftArray,vinLeftArray); rootTreeNode.right = reConstructBinaryTree(preRightArray,vinRightArray); return rootTreeNode; }else if(pre.length==1){ rootTreeNode = new TreeNode(pre[0]); //åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹çš„æ—¶å€™ return rootTreeNode; }else { return null }}console.log(reConstructBinaryTree([1,2,3,4,5,6,7],[3,2,4,1,6,5,7]))","link":"/2020/03/14/programming/rebuild-binaryTree/"},{"title":"å¹¿åº¦éå†å®ç°æ·±æ‹·è´","text":"é¢˜ç›®æè¿°:åˆ©ç”¨å¹¿åº¦éå†çš„æ€æƒ³å®ç°å¯¹è±¡çš„æ·±æ‹·è´ï¼Œä¸”èƒ½å¤„ç†å¥½ç¯çŠ¶æ•°æ®çš„é—®é¢˜ã€‚ æ€è·¯:æ ¹æ®å¹¿åº¦éå†çš„æ€è·¯ï¼Œå…ˆéå†æ‹·è´æ¯ä¸€å±‚çº§çš„å¯¹è±¡ï¼Œåˆ©ç”¨é˜Ÿåˆ—çš„å…ˆè¿›å…ˆå‡ºçš„æ€§è´¨ï¼Œè®°å½•åŒä¸€å±‚çº§çš„å¯¹è±¡çš„å­å±‚çº§å¯¹è±¡ï¼Œå†ä¾æ¬¡éå†æ‹·è´å„è‡ªå­å±‚çº§çš„å¯¹è±¡ã€‚ä¸‹é¢å®ç°äº†åŸºæœ¬çš„ç±»å‹çš„æ‹·è´ï¼Œè‡³äºå…¶ä»–ç±»å‹çš„å¾—ä¾ç…§ç¨åŠ å¤„ç†ã€‚ ä»£ç å®ç° let _toString = Object.prototype.toString;let map = { array: 'Array', object: 'Object', function: 'Function', string: 'String', null: 'Null', undefined: 'Undefined', boolean: 'Boolean', number: 'Number'}//è¿”å›æ•°æ®çš„ç±»å‹function getType (obj){ return _toString.call(obj).slice(8,-1);}function isTypeOf(obj,type){ return map[type] &amp;&amp; map[type] ===getType(obj)}/** * @description: å¹¿åº¦éå†å®ç°æ·±æ‹·è´,é˜Ÿåˆ—çš„æ–¹å¼æ¥å®ç° * @param {object} obj è¢«æ‹·è´çš„å¯¹è±¡ * @param {Array} visitedArr å­˜å‚¨å·²æ‹·è´çš„å¯¹è±¡å±æ€§çš„æ•°ç»„,æ¥å¤„ç†ç¯çŠ¶æ•°æ®é—®é¢˜ * @return: æ·±æ‹·è´çš„å¯¹è±¡ */function BFSdeepClone (obj,visitedArr = []){ let cloneObj = {}; //æ‹·è´çš„å¯¹è±¡ let sequeue = [obj]; //è¢«æ‹·è´çš„å¯¹è±¡çš„é˜Ÿåˆ— let cloneSequeue = [cloneObj]; //æ‹·è´çš„å¯¹è±¡çš„é˜Ÿåˆ— while(sequeue.length){ let _obj = sequeue.shift(); //æ¨¡æ‹Ÿé˜Ÿåˆ—.å…ˆè¿›å…ˆå‡º let _cloneObj = cloneSequeue.shift(); //æ¨¡æ‹Ÿé˜Ÿåˆ—,å…ˆè¿›å…ˆå‡º if(isTypeOf(_obj,'array')||isTypeOf(_obj,'object')){ for (let item in _obj) { if(isTypeOf(item,'object')){ let index = visitedArr.indexOf(_obj[item]); //å·²ç»å­˜åœ¨çš„å¯¹è±¡å±æ€§ç›´æ¥èµ‹å€¼ if(index&gt;-1){ _cloneObj[item] = visitedArr[index]; } else{ sequeue.push(_obj[item]); _cloneObj[item] = {}; cloneSequeue.push(_cloneObj[item]); visitedArr.push(_obj[item]); } } else if(isTypeOf(item,'array')){ sequeue.push(_obj[item]); _cloneObj[item] = []; cloneSequeue.push(_cloneObj[item]); } else{ _cloneObj[item] = _obj[item]; //å¦‚æœæ˜¯æ™®é€šå€¼çš„è¯å°±ç›´æ¥èµ‹å€¼ } } } else{ _cloneObj = _obj; //å¦‚æœæ˜¯ä¸€å¼€å§‹å°±æ˜¯æ™®é€šå€¼çš„è¯å°±ç›´æ¥èµ‹å€¼ } } return cloneObj;}//ç¯çŠ¶æ•°æ®let Circle = { a: 1, b: { c: 1, d: 2, circle: null, }}Circle.b.circle = Circle.b;cloneCircle = BFSdeepClone(Circle);//å¦‚æœä¸å¤„ç†ç¯é—®é¢˜ä¼šè¿›å…¥æ­»å¾ªç¯console.log(cloneCircle);","link":"/2020/03/14/programming/BFS-deepClone/"},{"title":"æ·±åº¦éå†å®ç°æ·±æ‹·è´","text":"é¢˜ç›®æè¿°:åˆ©ç”¨æ·±åº¦éå†çš„æ€æƒ³å®ç°å¯¹è±¡çš„æ·±æ‹·è´ï¼Œä¸”èƒ½å¤„ç†å¥½ç¯çŠ¶æ•°æ®çš„é—®é¢˜ã€‚ æ€è·¯:æ ¹æ®æ·±åº¦éå†çš„æ€è·¯ï¼Œé’ˆå¯¹æ¯ä¸ªå¯¹è±¡å±æ€§æ·±å…¥é€’å½’æ‹·è´ä¸‹å»ï¼Œç„¶åå†éå†æ•´ä¸ªå¯¹è±¡ï¼Œåœ¨å¯¹æ¯ä¸ªå¯¹è±¡å±æ€§éƒ½ä¾ç…§å‰é¢è§„åˆ™ã€‚ä¸‹é¢å®ç°äº†åŸºæœ¬çš„ç±»å‹çš„æ‹·è´ï¼Œè‡³äºå…¶ä»–ç±»å‹çš„å¾—ä¾ç…§ç¨åŠ å¤„ç†ã€‚ ä»£ç å®ç° let _toString = Object.prototype.toString;let map = { array: 'Array', object: 'Object', function: 'Function', string: 'String', null: 'Null', undefined: 'Undefined', boolean: 'Boolean', number: 'Number' } //è¿”å›æ•°æ®çš„ç±»å‹ function getType (obj){ return _toString.call(obj).slice(8,-1); } function isTypeOf(obj,type){ return map[type] &amp;&amp; map[type] ===getType(obj) } /** * @description: æ·±åº¦éå†å®ç°æ·±æ‹·è´ï¼Œé€’å½’å½¢å¼å®ç° * @param {object} obj è¢«æ‹·è´çš„å¯¹è±¡ * @param {Array} visitedArr å­˜å‚¨å·²æ‹·è´çš„å¯¹è±¡å±æ€§ï¼Œæ¥å¤„ç†ç¯çŠ¶æ•°æ®é—®é¢˜ * @return: æ·±æ‹·è´çš„å¯¹è±¡ */ function DFSdeepClone (obj,visitedArr = []) { let _obj = {} //æ‹·è´çš„å¯¹è±¡ // å¦‚æœæ‹·è´çš„å±æ€§æ˜¯ä¸€ä¸ªå¯¹è±¡çš„è¯ if(isTypeOf(obj,'array')||isTypeOf(obj,'object')){ let index = visitedArr.indexOf(obj); if(index &gt; -1){ _obj = visitedArr[index]; //å¦‚æœæ˜¯å·²ç»æ‹·è´äº†çš„å±æ€§ç›´æ¥è¿”å›è¿™ä¸ªå±æ€§çš„å€¼,å¤„ç†å›ç¯é—®é¢˜ } else{ visitedArr.push(obj) //ä¿å­˜è¿™ä¸ªå±æ€§ //é€’å½’çš„æ·±å…¥æ¯ä¸ªå±æ€§åµŒå¥—çš„å¯¹è±¡å»æ‹·è´ for (let item in obj) { _obj[item] = DFSdeepClone(obj[item],visitedArr) } } } else{ _obj = obj //å¦‚æœæ˜¯æ™®é€šå€¼çš„è¯å°±ç›´æ¥èµ‹å€¼ } return _obj } //ç¯çŠ¶æ•°æ® let Circle = { a: 1, b: { c: 1, d: 2, circle: null, } } Circle.b.circle = Circle.b; cloneCircle = DFSdeepClone(Circle);//å¦‚æœä¸å¤„ç†ç¯é—®é¢˜ä¼šè¿›å…¥æ­»å¾ªç¯ console.log(cloneCircle);","link":"/2020/03/14/programming/DFS-deepClone/"},{"title":"æ¡¥æ¥æ¨¡å¼","text":"ä¸€ã€æ¡¥æ¥æ¨¡å¼åŠå…¶åº”ç”¨æ¡¥æ¥æ¨¡å¼ï¼Œå°†æŠ½è±¡éƒ¨åˆ†è·Ÿå…·ä½“å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä¸¤è€…å¯ä»¥ç‹¬ç«‹å˜åŒ–ï¼Œä¹Ÿå¯ä»¥ä¸€èµ·å·¥ä½œã€‚ä¸­é—´é€šè¿‡â€˜æ¡¥â€™è¿æ¥ã€‚å¦‚ç»å¸¸ç”¨åˆ°çš„ç»„ä»¶ä¸Šçš„é‚£äº›æ–¹æ³•ï¼Œå®ƒä»¬æ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚æœç”¨æˆ·ä¼ å…¥è¿™ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆå°±ä¼šåœ¨æŸæ®µä»£ç é€»è¾‘é‡Œé¢ä½¿ç”¨ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œç»„ä»¶å°±æ˜¯æ¡¥çš„ä½œç”¨ï¼Œè€Œç”¨æˆ·ä¼ å…¥çš„å‡½æ•°åˆ™æ˜¯å…·ä½“å®ç°çš„éƒ¨åˆ†äº†ã€‚ äºŒã€ä»£ç å®ç°//ä¾‹å¦‚arrayå¯¹è±¡ä¸Šçš„forEachæ–¹æ³•ï¼Œå°±æ˜¯æ¡¥æ¥æ¨¡å¼çš„åº”ç”¨,forEachå°±æ˜¯æŠ½è±¡éƒ¨åˆ†ï¼Œè€Œå…·ä½“å®ç°æ˜¯ç”¨æˆ·ä¼ å…¥çš„å›è°ƒå‡½æ•°ã€‚const forEach=(arr,callback)=&gt;{ if(!Array.isArray(arr)) return; const length=arr.length; for(let i=0;i&lt;length,i++){ callback(arr[i],i); }}let arr=[\"a\",\"b\"];forEach(arr,(el,index)=&gt;{ console.log(el+index);})","link":"/2020/03/13/pattern/bridging-pattern/"},{"title":"æŠ½è±¡å·¥å‚æ¨¡å¼","text":"ä¸€ã€æŠ½è±¡å·¥å‚æ¨¡å¼åŠå…¶ç”¨é€”æŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œå…¶å®å°±æ˜¯åœ¨å·¥å‚æ¨¡å¼çš„åŸºç¡€ä¸Šï¼Œå¯¹å·¥å‚ç±»å†æ¬¡æŠ½è±¡å°è£…ï¼Œäº§ç”Ÿä¸€ä¸ªè¶…çº§å·¥å‚ç±»ã€‚è¿™ä¸ªè¶…çº§å·¥å‚ç±»åŒæ—¶å¯ä»¥ç”¨ä¸€ä¸ªæŠ½è±¡å·¥å‚ç±»å¯¹å­ç±»å·¥å‚è¿›è¡Œçº¦æŸï¼Œè¶…çº§å·¥å‚åˆ›å»ºçš„æ˜¯ä¸€ä¸ªç±»ç°‡ï¼Œç±»ç°‡é‡Œé¢æ‰æ˜¯ç›¸åº”çš„å¯¹è±¡å®ä¾‹ã€‚ äºŒã€ä»£ç å®ç°æŠ½è±¡å·¥å‚ç±»åˆ¶å®šçº¦æŸæ„å»ºä¸€ä¸ªæŠ½è±¡å·¥å‚ç±»æ¥å¯¹å·¥å‚ç±»çš„å®ç°è¿›è¡Œç›¸åº”çš„çº¦æŸ class AbstractFactory{ getPerson(){ throw new Error(\"å­ç±»è¯·å®ç°æ¥å£\"); } getAnimal(){ throw new Error(\"å­ç±»è¯·å®ç°æ¥å£\"); }} åˆ›å»ºå®ä½“ç±»class Dog { name(){ console.log('ç‹—'); }}class Cat { name(){ console.log('çŒ«'); }}class Male { name(){ console.log('ç”·äºº'); }}class Female { name(){ console.log('å¥³äºº'); }} åˆ›å»ºå„è‡ªçš„å·¥å‚ç±»è·Ÿä¹‹å‰å·¥å‚ç±»ä¸€æ ·åˆ›é€ å·¥å‚æ¥äº§å‡ºç›¸åº”çš„å®ä¾‹ï¼Œåªä¸è¿‡è¿™æ—¶å€™çš„å·¥å‚ä¼šå—åˆ°æŠ½è±¡å·¥å‚ç±»çš„çº¦æŸ class PersonFactory extends AbstractFactory{ getPerson(person){ switch(person){ case:'male' return new Male(); case:'female' return new Female(); default: break; } } getAnimal(){ return null; }}class AminalFactory extends AbstractFactory{ getAnimal(name){ name=name.toLocaleLowerCase(); switch(name){ case:'dog' return new Dog(); case:'cat' return new Cat(); default: break; } } getPerson(){ return null; }} è¶…çº§å·¥å‚ç±»çš„å®ç°//è¶…çº§å·¥å‚ç±»ï¼Œç”Ÿäº§å¯¹åº”çš„å·¥å‚ç±»ç°‡class Factory { constructor(choice){ choice=choice.toLocaleLowerCase(); switch(choice){ case:'person' return new PersonFactory(); case:'aminal' return new AminalFactory(); default: throw TypeError(\"class name wrong\"); } }}//åˆ›å»ºpersonå·¥å‚ç±»const personFactory =new Factory(\"person\");//åˆ›å»ºmaleå®ä¾‹const male=personFactory.getPerson(\"male\");male.name()//'ç”·äºº'","link":"/2020/03/13/pattern/abstractFactory-pattern/"},{"title":"é€‚é…å™¨æ¨¡å¼","text":"ä¸€ã€é€‚é…å™¨æ¨¡å¼åŠå…¶ç”¨é€”â€œæ°´ç®¡å¼¯å¼¯â€é€‚é…å™¨æ¨¡å¼ï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒå°±æ˜¯å¯¹æ•°æ®è¿›è¡Œé€‚é…ï¼Œå°†ä¸€ä¸ªç±»çš„æ¥å£ï¼ˆæ–¹æ³•äº¦æˆ–æ˜¯å±æ€§ï¼‰è½¬æ¢/è¿‡æ»¤/é‡ç»„æˆä¸ºå¦å¤–çš„æ¥å£æ¥æ»¡è¶³éœ€æ±‚ã€‚ä½†å¸¸ç”¨åœ¨ä¸¤ä¸ªæ¥å£æ„é€ ç±»ä¼¼çš„æƒ…å†µä¸‹ï¼Œå¦‚è‹¥ä¸¤ä¸ªå¤§ç›¸å¾„åº­ï¼Œé€‚é…æ¨¡å¼å°±æœ‰ç‚¹åŠ›ä¸ä»å¿ƒäº†ã€‚ äºŒã€ä»£ç å®ç°é€‚é…æ¡†æ¶å¤§åé¼é¼çš„Jquery æ¡†æ¶å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰å§ï¼Œå‡è®¾ç°åœ¨æœ‰ä¸€å†…éƒ¨æ¡†æ¶Aï¼Œå…¶ç»“æ„ä¸Jqueryå¾ˆç±»ä¼¼ï¼Œä½†æ˜¯æä¾›çš„æ–¹æ³•å´æ¯”è¾ƒå°‘ï¼Œæƒ³å¼•å…¥Jqueryå´ä¸æƒ³å½±å“åˆ°ä¹‹å‰å†™çš„ä»£ç ï¼Œå¯ä»¥è¿™æ ·åš A.g =function (id){ return document.getElementById(id);}window.A = jQuery;//é€‚é…å™¨æ–¹æ³•A.g = function (id){ return $('#'+id)[0]} æ•°æ®é€‚é…å‡è®¾æœ‰è¿™æ ·çš„å„å¤§éŸ³ä¹å¹³å°æä¾›çš„æ•°æ®ï¼Œä¸ºäº†åå°å¥½å¤„ç†ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ•°æ®è¿›è¡Œé€‚é… const API={ QQ:()=&gt;({ n:\"æœ€äº†ä¸èµ·çš„ä½ \", a:\"ç«ç®­å°‘å¥³101æ®µå¥¥å¨Ÿ\", f:0 }), Netease:()=&gt;({ name:\"æœ€äº†ä¸èµ·çš„ä½ \", author:\"ç«ç®­å°‘å¥³101æ®µå¥¥å¨Ÿ\", free:false })}const adapter=(info)=&gt;{ return { name:info.name||info.n, author:info.author||info.a, free:info.free||info.f }}","link":"/2020/03/13/pattern/adapter-pattern/"},{"title":"å‘½ä»¤æ¨¡å¼","text":"ä¸€ã€å‘½ä»¤æ¨¡å¼ è¡Œä¸ºæ¨¡å¼ä¸­çš„å‘½ä»¤æ¨¡å¼ï¼Œæ˜¯å°†å¯èƒ½è¯·æ±‚çš„å‘½ä»¤å°è£…åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œäº¤ç»™ä¸­é—´äººæ‰§è¡Œè€…ï¼Œæ‰§è¡Œè€…å†æ ¹æ®è¯·æ±‚è€…çš„è¯·æ±‚æ‰§è¡Œç›¸åº”çš„å‘½ä»¤ã€‚æ‰€ä»¥å‘½ä»¤æ¨¡å¼é‡Œé¢æœ‰ä¸‰ä¸ªä¸»ä½“ã€‚å‘½ä»¤å¯¹è±¡ã€æ‰§è¡Œè€…ã€è¯·æ±‚è€…ã€‚åº”ç”¨åœºæ™¯å°±æ˜¯å½“éœ€è¦å‘å‘½ä»¤å¯¹è±¡å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œä¸çŸ¥é“è¯·æ±‚çš„å¯¹è±¡å…·ä½“æ˜¯è°ï¼ˆæ‰§è¡Œè€…çŸ¥é“ï¼‰ï¼Œæ›´ä¸çŸ¥é“è¢«è¯·æ±‚æ‰§è¡Œçš„æ“ä½œæ˜¯ä»€ä¹ˆï¼ˆå‘½ä»¤å¯¹è±¡çŸ¥é“ï¼‰ï¼Œè¿™ä¸ªæ—¶å€™å°±ç”¨åˆ°å‘½ä»¤æ¨¡å¼äº†ã€‚ä¼˜ç‚¹å°±æ˜¯é«˜åº¦æ¾è€¦åˆï¼Œç¼ºç‚¹å˜›ï¼Œå°±æ˜¯éœ€è¦å®šä¹‰ä¸‰ä¸ªå¯¹è±¡ä¸”æ‰§è¡Œè€…è·Ÿå‘½ä»¤å¯¹è±¡ä¹‹é—´çš„å…³ç³»éœ€è¦çŸ¥é“ã€‚ äºŒã€ä»£ç å®ç°//å®šä¹‰ä¸€ä¸ªå‘½ä»¤å¯¹è±¡ï¼Œç”¨æ¥å­˜å‚¨æ‰§è¡Œçš„æ“ä½œconst MenuBar = { refresh(){ console.log(\"æ‰§è¡Œäº†åˆ·æ–°æ“ä½œ\") }}//å®šä¹‰æ‰§è¡Œè€…å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚ç”¨æ¥æ‰§è¡Œå‘½ä»¤const command = receiver=&gt;{ return { execute(){ receiver.refresh(); } }}//å®šä¹‰ä¸€ä¸ªè¯·æ±‚è€…,æ¥å—ä¸€ä¸ªdomå¯¹è±¡ä»¥åŠä¸€ä¸ªæ‰§è¡Œè€…const request = (button,command)=&gt;{ button.onclick=()=&gt;{ command.execute() } }}let refeshCommand = command(MenuBar);let button = document.xxxx;request(button,refeshCommand);","link":"/2020/03/13/pattern/command-pattern/"},{"title":"å·¥å‚æ¨¡å¼","text":"ä¸€ã€å·¥å‚æ¨¡å¼åŠå…¶ç”¨é€”æ‰€è°“å·¥å‚æ¨¡å¼ï¼Œå°±æ˜¯æ ¹æ®ä¸åŒçš„éœ€æ±‚è€Œâ€äº§å‡ºâ€ç›¸åº”çš„å¯¹è±¡çš„ç±»çš„å®ä¾‹ï¼Œåªå¯¹å¤–æä¾›ä¸€ä¸ªæ ¹æ®ä¸åŒå‚æ•°æ¥å®ä¾‹åŒ–ç›¸åº”çš„å¯¹è±¡çš„å‡½æ•°ã€‚å¥½å¤„æ˜¯åœ¨äºå¯ä»¥é¿å…äº†ä½¿ç”¨è€…äºå¯¹è±¡ç±»ä¹‹é—´çš„è€¦åˆï¼Œä½¿ç”¨è€…å®Œå…¨å¯ä»¥ä¸ç”¨çŸ¥é“è¿™ä¸ªç±»çš„ç»†èŠ‚ï¼Œåªéœ€è¦æ‡‚å¾—è°ƒç”¨ç›¸åº”çš„æ–¹æ³•ã€‚åå¤„ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œæ¯ä¸ªå·¥å‚åªèƒ½â€ç”Ÿäº§â€åŒä¸€ç±»å‹çš„ç±»çš„å®ä¾‹å¯¹è±¡ï¼Œå½“å¤šç±»åˆ«å¯¹è±¡çš„æ—¶å€™å°±ä¸å¥½ç”¨äº†ï¼Œä¸”å½“å¢åŠ äº§å“çš„æ—¶å€™éœ€è¦æ›´æ”¹åˆ¤æ–­çš„é€»è¾‘ï¼Œç¹ç äºŒã€ä»£ç å®ç°class Dog { run(){ console.log('ç‹—'); }}class Cat { run(){ console.log('çŒ«'); }}class Animal{ constructor(name){ name=name.toLocaleLowerCase(); switch(name){ case:'dog' return new Dog(); case:'cat' return new Cat(); default: throw TypeError(\"class name wrong\"); } }}const cat=new Animal(\"cat\");cat.run(); //ç‹—","link":"/2020/03/13/pattern/factory-pattern/"},{"title":"ä»£ç†æ¨¡å¼","text":"ä¸€ã€ä»£ç†æ¨¡å¼åŠå…¶ç”¨é€”ä»£ç†æ¨¡å¼ï¼Œç»™åŸå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œä»£ç†å¯¹è±¡æ‹¥æœ‰åŸå¯¹è±¡çš„å¼•ç”¨ï¼Œå¯ä»¥é€šè¿‡è®¿é—®è¿™ä¸ªä»£ç†å¯¹è±¡æ¥å®ç°æ‰§è¡ŒåŸå¯¹è±¡çš„ç›¸å…³æ“ä½œï¼Œè¿›è€Œèƒ½é¿å…å¯¹åŸå¯¹è±¡çš„ç›´æ¥è®¿é—®ã€‚ä¸¾ä¸ªä¾‹å­ï¼šå¦‚å¹³å¸¸æˆ‘ä»¬ä¹°è½¦ä¹°æˆ¿ï¼Œè‡ªå·±äº²è‡ªå»æ‰¾è½¦ä¸»æˆ¿ä¸»æ˜¯ä¸ç°å®çš„ï¼Œé€šå¸¸åšæ³•å°±æ˜¯å»æ‰¾ä¸­ä»‹ï¼Œä»£ç†å¯¹è±¡å°±äº†ç±»ä¼¼ä¸ä¸­ä»‹ï¼Œæ‹‰èµ·ä¸¤è€…ä¹‹é—´çš„æ¡¥æ¢ã€‚ä»£ç†æœ‰è™šæ‹Ÿä»£ç†è·Ÿä¿æŠ¤ä»£ç†ï¼Œä¿æŠ¤ä»£ç†çš„è¯å¯ä»¥åœ¨ä»£ç†ä¸­ç›´æ¥æ‹’ç»å¯¹çœŸå®å¯¹è±¡çš„è®¿é—®ï¼Œè€Œè™šæ‹Ÿä»£ç†çš„è¯å¯ä»¥å»¶è¿Ÿè®¿é—®åˆ°çœŸæ­£éœ€è¦çš„æ—¶å€™ï¼ŒèŠ‚çœç¨‹åºå¼€é”€ã€‚æ‰€ä»¥ä¼˜ç‚¹æ˜¯é«˜åº¦è§£è€¦ï¼Œå¯¹è±¡ä¿æŠ¤ï¼Œç¼ºç‚¹çš„è¯å°±æ˜¯æ·»åŠ çš„ä»£ç†å¯¹è±¡ï¼Œå¯èƒ½ä¼šå¼€é”€å¢å¤§ã€‚ äºŒã€ä»£ç å®ç°/*----------------------------------------------------------------------ä¿æŠ¤ä»£ç†*/ var Fans = { flower(){ Agent.reception(\"åˆ€ç‰‡\"); } } var Agent = { reception:function(gift){ console.log(\"ç²‰ä¸é€çš„:\"+gift); //ç²‰ä¸é€çš„:åˆ€ç‰‡ if(gift != \"èŠ±\"){ star.reception(\"èŠ±\"); } } } var star = { reception:function(gift){ console.log(\"æ”¶åˆ°ç²‰ä¸çš„:\"+gift); //æ”¶åˆ°ç²‰ä¸çš„:èŠ± } } Fans.flower();/*----------------------------------------------------------------------è™šæ‹Ÿä»£ç†*///ä»£ç†æ¨¡å¼å®ç°å›¾ç‰‡çš„å»¶è¿ŸåŠ è½½const myImg={ setSrc(imgNode,src){ imgNode.src=src; }}const proxyImg={ setSrc(imgNode,src){ myImg.setSrc(imgNode,'./img.jpg'); //1. åŠ è½½å ä½å›¾ç‰‡ let img=new Img(); //2. çœŸæ­£åŠ è½½å›¾ç‰‡ img.src=src; img.onload=()=&gt;{ myImg.setSrc(imgNode,src); //3. åŠ è½½å®Œæˆåï¼Œæ›¿æ¢çœŸæ­£å›¾ç‰‡ } }}","link":"/2020/03/13/pattern/proxy-pattern/"},{"title":"å•ä¾‹æ¨¡å¼","text":"ä¸€ã€å•ä¾‹æ¨¡å¼åŠå…¶ç”¨é€”æ‰€è°“å•ä¾‹æ¨¡å¼ï¼Œå°±æ˜¯ä¸€ä¸ªç±»å°±åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œç”¨é€”çš„è¯å¯ä»¥ç”¨æ¥å®šä¹‰å‘½åç©ºé—´ï¼Œé€šè¿‡åœ¨ä¸€ä¸ªå®ä¾‹å¯¹è±¡å®šä¹‰å…¶çš„æ–¹æ³•è·Ÿå±æ€§ï¼Œæ¥è¾¾åˆ°å‘½åä¸é‡å¤çš„ç›®çš„ï¼Œä¾‹å¦‚Jqueryçš„$ç¬¦å·å°±æ˜¯è¿™ä¸ªæ€æƒ³ã€‚å†è€…å°±æ˜¯å¦‚æœå¯¹äºä¸€ä¸ªç±»æ˜¯è´Ÿè´£è¿æ¥æ•°æ®åº“çš„çº¿ç¨‹æ± ï¼Œæ—¥å¿—ç­‰é€»è¾‘çš„ï¼Œç”¨åˆ°è¿™ç§æ¨¡å¼æ¥ä¿è¯å¯¹è±¡ä¸è¢«é‡å¤åˆ›å»ºï¼Œé™ä½å¼€é”€ã€‚ äºŒã€ä»£ç å®ç°//æƒ°æ€§å•ä¾‹æ¨¡å¼var laztSingle=(function(){ //ä½¿ç”¨é—­åŒ…ä½¿å¾—å•ä¾‹å¯¹è±¡ä¸ºç§æœ‰ var instance=null; function Signle(){ return { age:1 } } return function(){ if(!instance){ instance=new Signle() } return instance }})()var a=lazySingle();var b=lazySingle();console.log(a===b) //true","link":"/2020/03/13/pattern/single-pattern/"},{"title":"ç­–ç•¥æ¨¡å¼","text":"ä¸€ã€ç­–ç•¥æ¨¡å¼åŠå…¶ç”¨é€” è¡Œä¸ºå‹æ¨¡å¼ä¹‹ç­–ç•¥æ¨¡å¼ï¼Œå®è´¨å°±æ˜¯å°†ä¸€ç³»åˆ—å¯ä»¥äº’æ¢çš„ç®—æ³•å°è£…èµ·æ¥ï¼Œæ¯ç»„ç®—æ³•å¤„ç†çš„ä¸šåŠ¡æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å¤„ç†çš„è¿‡ç¨‹è·Ÿç»“æœæ˜¯ä¸ä¸€æ ·çš„ã€‚æ ¹æ®ç”¨æˆ·éœ€æ±‚é€‰æ‹©å…¶ä¸­ä¸€ç§ã€‚ä¼˜ç‚¹æ˜¯èƒ½å°†ç®—æ³•çš„ä½¿ç”¨è·Ÿå®ç°è¿›è¡Œåˆ†ç¦»ï¼Œå¹¶ä¸”å¯ä»¥æ·»åŠ ç›¸åº”çš„ç®—æ³•ã€‚ç¼ºç‚¹å°±æ˜¯å¾—çŸ¥é“æ¯ç§ç­–ç•¥ç®—æ³•æ˜¯å¼‚åŒç‚¹æ‰èƒ½é€‰æ‹©ã€‚ äºŒã€ä»£ç å®ç°//ç­–ç•¥ç±»ï¼Œå®šä¹‰ç›¸å…³çš„ç­–ç•¥ç®—æ³•const strategies={ A(){ console.log(\"A\"); } B(){ console.log(\"B\"); }}//ç¯å¢ƒç±»ï¼Œå°±æ˜¯é€‰æ‹©ç®—æ³•å·¥å…·const context=name=&gt;{ return strategies[name]} context('A')() //A","link":"/2020/03/13/pattern/strategy-pattern/"},{"title":"è§‚å¯Ÿè€…æ¨¡å¼","text":"ä¸€ã€è§‚å¯Ÿè€…æ¨¡å¼åŠå…¶ç”¨é€” è§‚å¯Ÿè€…æ¨¡å¼ï¼Œè¡Œä¸ºå‹æ¨¡å¼çš„ä¸€ç§ï¼Œå½“å­˜åœ¨ä¸€å¯¹å¤šçš„å…³ç³»çš„æ—¶å€™ï¼Œç”¨è§‚å¯Ÿè€…æ¨¡å¼å¯ä»¥å®ç°å½“è¿™ä¸ªè¢«è§‚å¯Ÿçš„å¯¹è±¡è¢«ä¿®æ”¹çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨çš„é€šçŸ¥è®¢é˜…å®ƒçš„å…¶ä»–ä¾èµ–å¯¹è±¡ã€‚ä¾‹å¦‚angular çš„ä¸€ä¸ªä¾èµ–åº“RXJSå°±æ˜¯å¹¿æ³›çš„åº”ç”¨äº†è¿™ç§æ¨¡å¼ã€‚ä½†å¸¸å¸¸ä¼šä¸å‘å¸ƒ-è®¢é˜…æ¨¡å¼å‚»å‚»åˆ†ä¸æ¸…æ¥šã€‚ äºŒã€ä»£ç å®ç° è§‚å¯Ÿè€…æ¨¡å¼ï¼šåªæœ‰è§‚å¯Ÿè€…è·Ÿè¢«è§‚å¯Ÿè€…ï¼Œä¸¤è€…æ˜¯ç›´æ¥é€šä¿¡çš„(æ¾è€¦åˆ) function Subject() { //è¢«è§‚å¯Ÿè€… this.observers = []; this.state = 'å¿«ä¹';}Subject.prototype.attach = function (observer) { this.observers.push(observer);}Subject.prototype.setState = function (state) { this.state = state; this.notify();}Subject.prototype.notify = function () { //è¢«è§‚å¯Ÿè€…çŠ¶æ€æ”¹å˜çš„è¯æ˜¯ç›´æ¥ä¸è§‚å¯Ÿè€…é€šè®¯ this.observers.forEach(function (observer) { observer.update(); })}function Observer(name,target){ // è§‚å¯Ÿè€… ä¸€èˆ¬ä¼šæœ‰ä¸€ä¸ªæ–¹æ³• this.name = name; this.target = target;}Observer.prototype.update = function () { // æ›´æ–°æ–¹æ³• console.log(`é€šçŸ¥ï¼š${this.name} å½“å‰çš„çŠ¶æ€æ˜¯ ${this.target.state}èµ¶ç´§å“„`) }let subject = new Subject();let observer1 = new Observer('å„¿å­', subject);let observer2 = new Observer('å¥³å„¿', subject);subject.attach(observer1); // ç»™ç›®æ ‡æ·»åŠ è§‚å¯Ÿè€…subject.attach(observer2);subject.setState('å¼€å¿ƒ') å‘å¸ƒ-è®¢é˜…æ¨¡å¼:å‘å¸ƒè€…è·Ÿè®¢é˜…è€…ä¸¤ä¸ªäº’ä¸çŸ¥æ™“ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªä¸­é—´äººæ¥ä¼ é€’ä¿¡æ¯(å¦‚è¯»è€…ä¸ä½œè€…ï¼Œä¸­é—´äººæ˜¯æŠ¥ç¤¾ï¼Œå®Œå…¨æ²¡è€¦åˆ) /*è¿™é‡Œçš„event ç›¸å½“äºæŠ¥ç¤¾ä¸­é—´äºº,è€Œfnè¯»è€…,é€šè¿‡æŠ¥ç¤¾è®¢é˜…æŠ¥çº¸,å½“ä½œè€…æœ‰æ–°çš„ä¸œè¥¿çš„æ—¶å€™,å°±ä¼šé€šè¿‡æŠ¥ç¤¾å‡ºç‰ˆæ–°çš„*/ function Event(){ this.events=[]; } Event.prototype.on=function(fn){ //è®¢é˜… this.events.push(fn); } Event.prototype.emit=function(data){ //å‘å¸ƒ this.events.forEach(function(fn){ fn(data); }) } æ‰€ä»¥ä¸¤è€…çš„åŒºåˆ«å°±æ˜¯å‘é€æ–¹ä¸æ¥æ”¶æ–¹æ˜¯å¦æ˜¯çŸ¥æ™“å¯¹æ–¹å­˜åœ¨çš„ï¼Œè§‚å¯Ÿè€…æ¨¡å¼ä¸­,è¢«è§‚å¯Ÿè€…çŠ¶æ€ä¸€æ—¦å‘ç”Ÿæ”¹å˜ï¼Œè®¢é˜…å®ƒçš„æ‰€æœ‰è§‚å¯Ÿè€…éƒ½ä¼šç«‹å³çŸ¥æ™“ã€‚è€Œè®¢é˜…å‘å¸ƒæ¨¡å¼ä¸­,å‘å¸ƒè€…ä¸è®¢é˜…è€…æ˜¯ä¸çŸ¥é“å¯¹æ–¹æ˜¯è°çš„ï¼Œè€Œæ˜¯é€šè¿‡ä¸­é—´äººï¼ˆä¾‹å¦‚eventï¼‰æ¥è”ç³»ã€‚","link":"/2020/03/13/pattern/observer-pattern/"},{"title":"CSS3 å¸¸è§çŸ¥è¯†(ä¸€)","text":"ğŸ‘‡å†…å®¹é€Ÿè§ˆğŸ‘‡ å¸¸è§çš„å‡ ç§å±…ä¸­æ–¹æ³• æµ®åŠ¨ä¸BFC ä¸æµè§ˆå™¨æ€§èƒ½ç›¸å…³ å¸¸è§çš„å‡ ç§å±…ä¸­æ–¹æ³• ä½¿ç”¨positionå®šä½åŠtransformç‰¹æ€§ &lt;div class=\"container\"&gt; &lt;div class=\"content\"&gt;&lt;/div&gt;&lt;/div&gt;.container{ position:relative;}.content{ position:absolute; top:50%; /*è¿™ä¸¤ä¸ªç™¾åˆ†æ¯”æ˜¯ç›¸å¯¹çˆ¶å…ƒç´ çš„*/ left:50%; transform:translate(-50%,-50%) /*è¿™é‡Œçš„ç™¾åˆ†æ¯”æ˜¯ç›¸å¯¹ä¸æœ¬èº«çš„*/}/*æˆ–è€…*/.container{ position:relative;}.content{ position:absolute; left:0; top:0; right:0; bottom:0; /*è®©å…¶è‡ªåŠ¨åˆ†å¸ƒ*/ margin:auto} flexå¸ƒå±€ .container{ display:flex; justify-content:center; align-items:center;} ä½¿ç”¨ä¼ªå…ƒç´  .container{ width:200px; height:200px; /*æ°´å¹³å±…ä¸­*/ text-align:center;} /*å®šä¹‰ä¸€ä¸ªåŸºçº¿ï¼Œå‚ç›´å±…ä¸­æ˜¯éœ€è¦ä¸€ä¸ªè¡Œå†…å…ƒç´ çš„åŸºçº¿æ¥ä½œä¸ºæ ‡å‡†çš„ :afterå‡ºç°çš„æ„ä¹‰å°±æ˜¯åœ¨äºåˆ©ç”¨display:inline-blockå’Œheight:100% è¿™ä¿©å±æ€§å®Œæˆè¡Œå†…ä¸åŸºçº¿è¿™ä¿©ä¸ªå¤§å‰æè¦æ±‚ (å³è¡Œå†…å—å…ƒç´ ï¼Œé«˜åº¦100%è‡ªç„¶å°±ä»¥é«˜åº¦50%å¤„å³å¹³å¸¸æ‰€è¯´çš„ä¸­çº¿ä¸ºåŸºçº¿*/.container:before{ content:\"\"; display:inline-block; height:100%; vertical-align:middle;}.content{ display:inline-block; /*æ ¹æ®ä¹‹å‰å®šä¹‰çš„åŸºçº¿è¿›è¡Œå¯¹é½*/ vertical-align:middle;} æµ®åŠ¨ä¸BFC æµ®åŠ¨ï¼šæµ®åŠ¨åŸºæœ¬å°±ä¸è¯´äº†ï¼Œä¸€äº›ç»†èŠ‚å°±æ˜¯æ™®é€šçš„å…ƒç´ ä¸æµ®åŠ¨å…ƒç´ ä¸€èµ·åï¼Œä¼šè¢«æµ®åŠ¨å…ƒç´ æ‰€é®æŒ¡ï¼Œä½†æ˜¯é‡Œé¢çš„æ–‡å­—å´å¯ä»¥çœ‹åˆ°è¿™ä¸ªæµ®åŠ¨å…ƒç´ ï¼Œå›´ç»•åœ¨è¿™ä¸ªæµ®åŠ¨å…ƒç´ çš„å‘¨å›´ã€‚æµ®åŠ¨æ˜¯å¯¹äºæ‰€åœ¨çš„é‚£ä¸€è¡Œçš„ï¼Œå£°æ˜ä¸ºæµ®åŠ¨çš„å…ƒç´ ä¸ç®¡æ˜¯å†…è”è¿˜æ˜¯å—çº§å…ƒç´ ï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªå—çº§æ¡†ï¼Œå¦‚æœä¸¤ä¸ªæµ®åŠ¨å…ƒç´ å› ä¸ºæ”¾ä¸ä¸‹è€Œå¯¼è‡´äº†ä¸€ä¸ªå‘ä¸‹ç§»åŠ¨ï¼Œå¯å¯¹ä¸‹ç§»çš„å…ƒç´ è®¾ç½®è´Ÿå¤–è¾¹è·ä½¿å…¶ä¸Šç§»ã€‚ æ¸…é™¤æµ®åŠ¨çš„æ–¹æ³• ä¼ªå…ƒç´ æ¸…é™¤æµ®åŠ¨ .clearfloat:after{ content:''; display:block; height:0; visibility:hidden; clear:both;} å£°æ˜BFCæ¸…é™¤æµ®åŠ¨ .clearfloat{ overflow:auto;} BFC:å—çº§æ ¼å¼ä¸Šä¸‹æ–‡ï¼Œè§„å®šäº†å†…éƒ¨å—çº§ç›’å­çš„å¸ƒå±€ã€‚floatä¸ä¸ºnoneï¼Œpositionä¸ºabsoluteã€fixedï¼Œdisplayä¸ºflexã€inline-blockçš„ï¼Œoverflowä¸ä¸ºvisibleçš„éƒ½èƒ½äº§ç”ŸBFCã€‚ç‰¹æ€§è·Ÿä½œç”¨å¦‚ä¸‹ï¼š ç‰¹æ€§ï¼šâ‘ å±äºä¸€ä¸ªBFCçš„ä¸¤ä¸ªç›¸é‚»ç›’å­ä¹‹é—´çš„marginä¼šå‡ºç°é‡å çš„æƒ…å†µã€‚â‘¡BFCåŒºåŸŸä¸ä¼šä¸æµ®åŠ¨çš„åŒºåŸŸå‘ç”Ÿäº¤é›†ï¼Œè€Œæ˜¯ç´§è´´åœ¨æµ®åŠ¨è¾¹ç¼˜ã€‚â‘¢BFCè®¡ç®—é«˜åº¦çš„æ—¶å€™æŠŠæµ®åŠ¨å…ƒç´ ä¹Ÿè®¡ç®—åœ¨é‡Œé¢ï¼Œæ‰€ä»¥å¯ä»¥ç”¨æ¥æ¸…é™¤æµ®åŠ¨ ä½œç”¨ï¼šâ‘ æ¸…é™¤æµ®åŠ¨ï¼Œå› ä¸ºç‰¹æ€§ä¸‰ã€‚â‘¡è§£å†³å¤–è¾¹è·åˆå¹¶é—®é¢˜ï¼Œå±äºåŒä¸€ä¸ªBFCçš„ä¸¤ä¸ªç›¸é‚»çš„ç›’å­å¤–è¾¹è·ä¼šé‡å ï¼Œå°†å…¶ä¸­ä¸€ä¸ªç›’å­displayå£°æ˜ä¸ºinline-blockã€‚â‘¢åˆ¶ä½œè‡ªé€‚åº”ä¸¤æ å¸ƒå±€ï¼Œå¸ƒå±€ä¹‹é—´æ²¡æœ‰ç¼éš™ã€‚ ä¸æµè§ˆå™¨æ€§èƒ½ç›¸å…³ å›æµä¸é‡ç»˜ï¼š å›æµï¼šå½“dom tree ä¸css rule tree ç»“åˆç”Ÿæˆrender treeåï¼Œéœ€è¦è®¡ç®—åœ¨è®¾å¤‡è§†å›¾ä¸­çš„ä½ç½®è·Ÿå¤§å°ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯å›æµã€‚ é‡ç»˜ï¼šåœ¨å›æµé˜¶æ®µåï¼Œå¾—åˆ°äº†èŠ‚ç‚¹çš„å¤§å°ï¼Œä½ç½®ç­‰å‡ ä½•ä¿¡æ¯ï¼Œå°†å…¶è½¬æ¢ä¸ºå±å¹•çš„å®é™…åƒç´ çš„è¿‡ç¨‹ï¼Œå°±æ˜¯é‡ç»˜ã€‚ å¼•å‘å›æµé‡ç»˜çš„åŸå› ï¼š é¡µé¢ä¸€å¼€å§‹çš„æ¸²æŸ“ domèŠ‚ç‚¹ä½ç½®ã€å¤§å°å‘ç”Ÿå˜åŒ– æ·»åŠ /åˆ é™¤domèŠ‚ç‚¹ æµè§ˆå™¨å°ºå¯¸å‘ç”Ÿå˜åŒ– å‡å°‘å›æµè·Ÿé‡ç»˜ï¼šå› ä¸ºæ¯æ¬¡å›æµè·Ÿé‡ç»˜éƒ½æ¯”è¾ƒè€—æµè§ˆå™¨çš„æ€§èƒ½ï¼Œæ‰€ä»¥è¦å°½é‡å‡å°‘å…¶æ¬¡æ•°ï¼Œå¸¸è§çš„æ–¹æ³•å°±æ˜¯æ‰¹é‡ä¿®æ”¹domï¼Œæˆ–è€…å…ˆå°†domå…ƒç´ è„±ç¦»æ–‡æ¡£æµï¼Œä¿®æ”¹å®Œæˆåå†å¸¦å›æ–‡æ¡£ã€‚å¤šä¿®æ”¹classå°‘ä½¿ç”¨styleã€‚ cssæ–‡ä»¶çš„å¯¼å…¥è·Ÿä½ç½®ï¼š å¯¼å…¥æ–‡ä»¶çš„æ—¶å€™linkæ ‡ç­¾å¯¼å…¥è·Ÿimport çš„åŒºåˆ« hrefï¼šè¶…æ–‡æœ¬é“¾æ¥ï¼Œç”¨æ¥å»ºç«‹æ–‡æ¡£ä¸å…ƒç´ çš„ä¹‹é—´çš„é“¾æ¥ï¼Œæµè§ˆå™¨ä¼šè¯†åˆ«å½“å‰æ˜¯cssæ–‡ä»¶ï¼Œå¹¶è¡Œä¸‹è½½æ–‡æ¡£ï¼Œä¸ä¼šé˜»å¡ä¸€å¼€å§‹çš„åŠ è½½è¿‡ç¨‹ã€‚ï¼ˆå¤šç”¨ï¼‰ sourceï¼šå¼•å…¥srcæ‰€æŒ‡å‘çš„å†…å®¹ï¼Œæµè§ˆå™¨é‡åˆ°è¯¥å…ƒç´ çš„æ—¶å€™ï¼Œä¼šåœæ­¢å¯¹é¡µé¢çš„æ¸²æŸ“ï¼Œè½¬è€Œå»åŠ è½½ç›¸åº”çš„èµ„æºï¼Œç›´åˆ°åŠ è½½å®Œæˆã€‚ï¼ˆå°‘ç”¨ï¼‰ ä½ç½®ï¼šcssæ–‡ä»¶å°½é‡æ”¾åœ¨headé‡Œé¢ï¼Œå› ä¸ºcssçš„åŠ è½½è¿‡ç¨‹ä¸­å› ä¸ºè·Ÿdomæ ‘ç”Ÿæˆæ˜¯å¹¶è¡Œçš„ï¼Œæ‰€ä»¥ä¸ä¼šå½±å“åˆ°domæ ‘ï¼Œä½†æ˜¯ä¼šå½±å“åˆ°æœ€åçš„renderæ ‘çš„ç”Ÿæˆï¼Œä»è€Œä¼šå½±å“åˆ°å›æµé‡ç»˜ã€‚æ‰€ä»¥linkæ ‡ç­¾æœ€å¥½æ˜¯å°½é‡æ”¾åœ¨headé‡Œé¢ï¼Œå› ä¸ºdomæ ‘çš„è§£ææ˜¯è‡ªä¸Šè€Œä¸‹ï¼Œè¿™æ ·å¯ä»¥åŠ å¿«renderæ ‘çš„ç”Ÿæˆã€‚","link":"/2020/03/13/ui/css-base1/"},{"title":"webpackåŸºæœ¬é…ç½®(ä¸‹)","text":"watch æ–‡ä»¶ç›‘å¬é…ç½®ï¼Œåœ¨æºç å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œè‡ªåŠ¨é‡æ–°æ„å»ºå‡ºæ–°çš„è¾“å‡ºæ–‡ä»¶ã€‚å› ä¸ºæ˜¯è¾“å‡ºåœ¨ç£ç›˜é‡Œé¢çš„æ–‡ä»¶ï¼Œæ‰€ä»¥æ¯æ¬¡æ›´æ–°åå¾—æ‰‹åŠ¨åˆ·æ–°æµè§ˆå™¨ã€‚å¯ä»¥åœ¨é…ç½®æ–‡ä»¶é…ç½®æˆ–è€…åœ¨è„šæœ¬åé¢åŠ ä¸Š--watchå‚æ•°å¼€å¯ã€‚ //æ–‡ä»¶ç›‘å¬çš„åŸç†ï¼šè½®è¯¢åˆ¤æ–­æ–‡ä»¶çš„æœ€åç¼–è¾‘æ—¶é—´æ˜¯å¦å˜åŒ–ï¼Œå½“æŸä¸ªæ–‡ä»¶å‘ç”Ÿå˜åŒ–åï¼Œå¹¶ä¸æ˜¯ç«‹åˆ»çš„å‘Šè¯‰ç›‘å¬è€…ï¼Œè€Œæ˜¯å…ˆç¼“å­˜èµ·æ¥ï¼Œç­‰å¾…aggregateTimeoutå†å»é€šçŸ¥module.exports = { watch:true, watchOptions:{ ignored:/node_modules/, //ä¸ç›‘å¬å˜åŒ–çš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ï¼Œæ”¯æŒæ­£åˆ™ aggregateTimeout:300, //ç›‘å¬åˆ°å˜åŒ–åç­‰å¾…300msåå†å»æ‰§è¡Œã€‚é»˜è®¤æ˜¯300ms poll:1000 //åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å‘é€å˜åŒ–æ˜¯é€šè¿‡ä¸åœè¯¢é—®ç³»ç»ŸæŒ‡å®šæ–‡ä»¶æœ‰æ²¡æœ‰å˜åŒ–å®ç°çš„ï¼Œé»˜è®¤æ¯ç§’è¯¢é—®1000æ¬¡ }} webpack-dev-server åœ¨å¼€å‘ç¯å¢ƒçš„æ—¶å€™ï¼Œä½¿ç”¨webpack-dev-serveræ¥å¼€å¯ä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨æ¥å®æ—¶ç›‘å¬æ–‡ä»¶çš„å˜åŒ–ã€‚å¼€å¯çƒ­æ›´æ–°(ä¸ç”¨åˆ·æ–°æµè§ˆå™¨å°±èƒ½æ˜¾ç¤ºæœ€æ–°çš„ç»“æœ) npm i webpack-dev-server -D module.exports={ plugins:[ new CleanWebpackPlugin(), //è‡ªåŠ¨æ¸…é™¤ç›®å½•æ’ä»¶ new HtmlWebpackPlugin({template:'./src/index.html',filename:'index.html'}), new webpack.HotModuleReplacementPlugin() /*webpack æ„å»ºå‡ºæ¥çš„ bundle.js æœ¬èº«æ˜¯ä¸å…·å¤‡çƒ­æ›´æ–°çš„èƒ½åŠ›çš„ï¼Œ HotModuleReplacementPlugin çš„ä½œç”¨å°±æ˜¯å°† HMR runtime æ³¨å…¥åˆ° bundle.jsï¼Œ ä½¿å¾—bundle.jså¯ä»¥å’ŒHMR serverå»ºç«‹websocketçš„é€šä¿¡è¿æ¥ã€‚*/ ], devServer:{ contentBase:'./dist', /*é»˜è®¤çš„è¯webpack-dev-serverä¼šä¸ºæ ¹æ–‡ä»¶æä¾›ä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨ï¼Œ å¦‚æœæƒ³ä¸ºå¦å¤–çš„ç›®å½•ä¸‹æ–‡ä»¶æä¾›æœ¬åœ°æœåŠ¡å™¨çš„è¯ï¼Œåœ¨è¿™é‡Œè®¾ç½®ã€‚ æ³¨æ„å¦‚æœæƒ³è·å–åˆ°å®æ—¶çš„æ•°æ®å˜æ¢çš„è¯æ–‡ä»¶å¤¹é‡Œé¢å¿…é¡»æœ‰ä¸€ä¸ªhtmlæ–‡ä»¶ä¸”æ–‡ä»¶é‡Œé¢å¼•å…¥çš„è„šæœ¬å¾—ä»¥'/'æ¥æŒ‡å®šæ˜¯è·å–å†…å­˜é‡Œé¢çš„æ–‡ä»¶è€Œä¸æ˜¯ç£ç›˜ä¸Šçš„æ—§çš„æ‰“åŒ…çš„æ–‡ä»¶ã€‚ å¦‚æœæœ‰æŒ‡å®šHtmlWebpackPluginæ’ä»¶æ¥ä½¿å¾—htmlæ–‡ä»¶ä¹Ÿæ˜¯åœ¨å†…å­˜ä¸­çš„è¯ï¼Œå°±å¯ä»¥ä¸ç”¨è®¾ç½®è¿™ä¸ªå‚æ•°ã€‚*/ hot:true,//å¼€å¯çƒ­æ›´æ–° port:8080, //è®¾ç½®ç«¯å£ï¼Œé»˜è®¤æ˜¯8080 historyApiFallback:true //åœ¨å¼€å‘å•é¡µåº”ç”¨æ—¶ï¼Œå®ƒä¾èµ–äºHTML5 history APIï¼Œå¦‚æœè®¾ç½®ä¸ºtrueï¼Œæ‰€æœ‰çš„è·³è½¬å°†æŒ‡å‘index.html }} çƒ­æ›´æ–°åŸç†åˆ†æ æ–‡ä»¶é€šè¿‡ç¼–è¾‘åç»è¿‡æ–‡ä»¶ç³»ç»Ÿï¼Œä¼ è¾“ç»™webpack compilerå°†jsç¼–è¯‘æˆä¸ºbundle.jsã€‚å†ç”±Bundle serveræä¾›ä¸ªç«¯å£æœåŠ¡è®©æ–‡ä»¶åœ¨æµè§ˆå™¨è®¿é—®ã€‚ä¸€å¼€å§‹çš„è¿‡ç¨‹æ˜¯12ABã€‚è€Œåçš„æ›´æ–°è¿‡ç¨‹åˆ™æ˜¯ä¾é å¦å¤–çš„ä¸€ä¸ªæœåŠ¡å™¨HMR server ä¸æµè§ˆå™¨è¿›è¡Œwebsocketé€šä¿¡ã€‚HMR Server æ˜¯æœåŠ¡ç«¯ï¼Œç”¨æ¥å°†å˜åŒ–çš„ js æ¨¡å—é€šè¿‡ websocket çš„æ¶ˆæ¯é€šçŸ¥ç»™æµè§ˆå™¨ç«¯ã€‚HMR Runtimeæ˜¯æµè§ˆå™¨ç«¯ï¼Œç”¨äºæ¥å— HMR Server ä¼ é€’çš„æ¨¡å—æ•°æ®ã€‚webpack æ„å»ºå‡ºæ¥çš„ bundle.js æœ¬èº«æ˜¯ä¸å…·å¤‡çƒ­æ›´æ–°çš„èƒ½åŠ›çš„ï¼ŒHotModuleReplacementPlugin çš„ä½œç”¨å°±æ˜¯å°† HMR runtime æ³¨å…¥åˆ° bundle.jsï¼Œä½¿å¾—bundle.jså¯ä»¥å’ŒHMR serverå»ºç«‹websocketçš„é€šä¿¡è¿æ¥ã€‚ WDM å¦å¤–çš„ä¸€ç§å½¢å¼å°±æ˜¯ä½¿ç”¨webpack-dev-middleä¸­é—´ä»¶æ­é…expressè‡ªå·±æ­å»ºä¸€ä¸ªæœåŠ¡å™¨æ¥å®ç°çƒ­æ›´æ–°ï¼Œå¯ä»¥æ›´åŠ çµæ´»ã€‚ const express = require('express');const webpack = require('webpack');const webpackDevMiddleware = require('webpack-dev-middleware');const app = express();const config = require('./webpack.config.js');const compiler = webpack(config); //ä½¿ç”¨webpackå†…ç½®çš„ç¼–è¯‘é…ç½®æ–‡ä»¶app.use(webpackDevMiddleware(compiler,{ publicPath:config.output.publicPath}));app.listen(3000); æ–‡ä»¶æŒ‡çº¹ç­–ç•¥ ä¸Šé¢ä¹Ÿè®²åˆ°ï¼Œè¾“å‡ºæ–‡ä»¶çš„æ—¶å€™å¯ä»¥æŒ‡å®šhashå€¼æ¥å‘½åæ–‡ä»¶ã€‚å¯ä»¥æ ¹æ®è¿™ä¸ªå€¼æ¥ç¡®å®šæ–‡ä»¶æ˜¯å¦æ”¹å˜è¿‡ï¼Œè¿›è€Œå†³å®šè¦ä¸è¦ä½¿ç”¨ç¼“å­˜ç­‰æ“ä½œã€‚hashä¸€èˆ¬æ˜¯ç»“åˆCDNç¼“å­˜æ¥ä½¿ç”¨çš„ï¼Œæ–‡ä»¶å‘ç”Ÿå˜åŒ–çš„è¯ï¼Œå¯¹åº”çš„æ–‡ä»¶çš„hashå°±ä¼šå‘ç”Ÿæ”¹å˜ï¼Œå¯¹åº”çš„ HTML å¼•ç”¨çš„ URL åœ°å€ä¹Ÿä¼šæ”¹å˜ï¼Œè§¦å‘ CDN æœåŠ¡å™¨ä»æºæœåŠ¡å™¨ä¸Šæ‹‰å–å¯¹åº”æ•°æ®ï¼Œè¿›è€Œæ›´æ–°æœ¬åœ°ç¼“å­˜ã€‚webpackä¸­æœ‰ä¸‰ç§hashæ¥å‘½åæ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯hashã€chunkhashã€contenthashã€‚åŒºåˆ«å¦‚ä¸‹ï¼š hashï¼šè·Ÿæ•´ä¸ªé¡¹ç›®æ¯æ¬¡æ‰“åŒ…æœ‰å…³ï¼Œåªè¦é¡¹ç›®æ–‡ä»¶æœ‰ä¿®æ”¹ï¼Œå³é‡æ–°buildçš„è¯ï¼Œæ•´ä¸ªé¡¹ç›®çš„hashå°±ä¼šå‘ç”Ÿæ”¹å˜ã€‚å¤šé¡µé¢é¡¹ç›®æ‰“åŒ…çš„è¯å°±ä¸ç”¨è¿™ä¸ªäº†ï¼ŒåŠ¨ä¸€å‘è€Œç‰µå…¨èº«ã€‚ chunkhashï¼šä¸æ‰“åŒ…è¿‡ç¨‹çš„chunkæœ‰å…³ï¼Œæ ¹æ®ä¸åŒçš„entryå…¥å£è¿›è¡Œæ–‡ä»¶ä¾èµ–è§£æï¼Œæ„å»ºå¯¹åº”çš„chunkï¼Œç”Ÿæˆç›¸åº”çš„hashå€¼ã€‚å¤šé¡µé¢æ‰“åŒ…çš„æ—¶å€™å°±ç”¨è¿™ä¸ªï¼Œåªä¿®æ”¹ç›¸åº”æ¨¡å—ï¼Œå…¶ä»–æ¨¡å—å°†ä¸å—å½±å“ã€‚ contenthashï¼šé¡¾åæ€ä¹‰ï¼Œå®ƒæ›´åŠ ç»†ï¼Œåªæœ‰ç›¸åº”çš„æ–‡ä»¶çš„å†…å®¹å‘ç”Ÿæ”¹å˜æ‰ä¼šæ”¹å˜ï¼Œä¾‹å¦‚index.cssæ–‡ä»¶ä¸index.jsæ–‡ä»¶åœ¨åŒä¸€ä¸ªchunk,ä½†ä¸€èˆ¬éƒ½æ˜¯jså‘ç”Ÿæ”¹åŠ¨æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™å°±è®¾ç½®cssçš„å‘½åç”¨contenthashã€‚æ”¹å˜index.jsçš„æ—¶å€™å°±ä¸ä¼šå½±å“åˆ°index.cssæ–‡ä»¶ã€‚ æ–‡ä»¶å‹ç¼© jsæ–‡ä»¶å‹ç¼©ï¼šwebpack4ä¹‹åå†…ç½®äº†uglifyjs-webpack-pluginå¯¹æ‰“åŒ…çš„jsæ–‡ä»¶è¿›è¡Œäº†å‹ç¼©ã€‚ cssæ–‡ä»¶å‹ç¼©ï¼šä½¿ç”¨optimize-css-assets-webpack-pluginåŠcssnanoæ¥å¯¹cssæ–‡ä»¶è¿›è¡Œå‹ç¼©ã€‚plugins:[ new CleanWebpackPlugin(), //è‡ªåŠ¨æ¸…é™¤ç›®å½•æ’ä»¶ new HtmlWebpackPlugin({template:'./src/index.html',filename:'index.html'}), new MiniCssExtractPlugin({ filename:'./static/css/[name]_[contenthash:8].css', //å°†css æŠ½ç¦»æˆå•ç‹¬çš„æ–‡ä»¶ chunkFilename:'[id].css' }), new OptimizeCssassetsWebpackPlugin({ //å‹ç¼©cssæ’ä»¶ assetNameRegExp:/\\.css$/g, cssProcessor:require('cssnano') //ä½¿ç”¨cssnanoæ¥å‹ç¼©cssä»£ç  })], htmlæ–‡ä»¶å‹ç¼©ï¼šHtmlWebpackPluginé‡Œé¢å°±å¯ä»¥é…ç½®minfyæ¥å®ç°å‹ç¼©ã€‚plugins:[ new HtmlWebpackPlugin({ template:path.join(__dirname,'src/index.html'), filename:'index.html', chunks:['index'], //é’ˆå¯¹å¤šå…¥å£æ–‡ä»¶,å°±æ˜¯é€‰æ‹©è¦htmlåµŒå…¥çš„jsæ–‡ä»¶ inject:true, //æ”¾ç½®jsæ–‡ä»¶çš„ä½ç½®ï¼Œå¦‚æœè®¾ç½®ä¸º true æˆ–è€… bodyï¼Œæ‰€æœ‰çš„ javascript èµ„æºå°†è¢«æ”¾ç½®åˆ° body å…ƒç´ çš„åº•éƒ¨ï¼Œ'head' å°†æ”¾ç½®åˆ° head å…ƒç´ ä¸­ã€‚falseåˆ™ä¸ä¼šå¼•å…¥ã€‚ minify:{ html5:true, collapseWhitespace:true,//å»é™¤ç©ºæ ¼æ¢è¡Œç¬¦ removeComments:true,//æ˜¯å¦å»é™¤æ³¨é‡Š minifyCSS:true, //å‹ç¼©ä¸€å¼€å§‹å°±å†…è”åœ¨ html é‡Œé¢çš„csså’Œjs minifyJS:true, preserveLineBreaks:false } }),],","link":"/2020/03/15/webpack4/webpack4-base3/"},{"title":"webpackè¿›é˜¶ä½¿ç”¨(ä¸‹)","text":"treeShaking-æ‘‡æ ‘ä¼˜åŒ–ä½¿ç”¨CJSçš„æ—¶å€™ï¼Œä¸ºäº†ä½¿ç”¨ä¸€ä¸ªæ¨¡å—ä¸­çš„æ–¹æ³•å¼•å…¥ä¸€ä¸ªæ¨¡å—ï¼Œæ•´ä¸ªæ¨¡å—éƒ½ä¼šæœ€åæ‰“åŒ…åˆ°bundleé‡Œé¢ã€‚è€Œåœ¨wepack4å¯¹å…¶è¿›è¡Œäº†ä¼˜åŒ–ï¼Œåœ¨modeæŒ‡å®šä¸ºproductionçš„æ—¶å€™é»˜è®¤å¼€å¯three shakingã€‚æ³¨æ„åªèƒ½æ£€æµ‹é™æ€å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯ES6çš„importï¼Œexport è¯­æ³•ã€‚CJSåˆ™æ— æ³•æ£€æµ‹ã€‚è€Œtree shakingæ˜¯DCEçš„ä¸€ç§æ–¹å¼ï¼Œæ£€æµ‹çš„ä¾æ®æ˜¯ä»£ç ä¸ä¼šè¢«æ‰§è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰å¼•å…¥çš„åˆ™ä¼šæ ‡è®°åˆ é™¤ï¼Œæˆ–è€…æ‰§è¡Œçš„ç»“æœä¸ä¼šè¢«ç”¨åˆ°çš„ã€æ‰§è¡Œçš„å½±å“åªæ˜¯å½±å“æ­»å˜é‡ä¹Ÿä¼šè¢«æ ‡è®°åˆ é™¤ã€‚è¿™æ ·çš„å¥½å¤„æ˜¾è€Œæ˜“è§ï¼Œå¯ä»¥å‡å°‘æ‰“åŒ…åçš„ä»£ç çš„ä½“ç§¯ï¼Œå‡å°‘ç¨‹åºçš„æ‰§è¡Œæ—¶é—´ç­‰â€¦ scopeHoisting-ä½œç”¨åŸŸæå‡webpackæ‰“åŒ…å‡ºæ¥çš„æ˜¯ä¸€ä¸ªIIFEï¼ˆç«‹å³æ‰§è¡Œå‡½æ•°ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªåŒ¿åé—­åŒ…ï¼‰ï¼Œä¼ å…¥çš„modulesæ˜¯ä¸ªæ•°ç»„ï¼Œæ•°ç»„æ¯ä¸€ä¸ªéƒ½æ˜¯ä¸€ä¸ªæ¨¡å—åˆå§‹åŒ–å‡½æ•°ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰å¯¼å…¥å¯¼å‡ºçš„æ¨¡å—ï¼‰ã€‚å½“é¡¹ç›®åºå¤§çš„æ—¶å€™ï¼Œå°±ä¼šç”Ÿæˆå¾ˆå¤šå‡½æ•°åŒ…è£¹å—ï¼Œå¢åŠ å†…å­˜çš„å¼€é”€ã€‚è€Œscope hoistingå¯ä»¥ç†è§£ä¸ºæ˜¯æŠŠæ¯ä¸ªæ¨¡å—è¢«webpackå¤„ç†æˆçš„æ¨¡å—åˆå§‹åŒ–å‡½æ•°æ•´ç†åˆ°ä¸€ä¸ªç»Ÿä¸€çš„åŒ…è£¹å‡½æ•°é‡Œï¼Œä¹Ÿå°±æ˜¯æŠŠå¤šä¸ªä½œç”¨åŸŸç”¨ä¸€ä¸ªä½œç”¨åŸŸå–ä»£ï¼Œä»¥å‡å°‘å†…å­˜æ¶ˆè€—å¹¶å‡å°‘åŒ…è£¹å—ä»£ç ï¼Œä»æ¯ä¸ªæ¨¡å—æœ‰ä¸€ä¸ªåŒ…è£¹å‡½æ•°å˜æˆåªæœ‰ä¸€ä¸ªåŒ…è£¹å‡½æ•°åŒ…è£¹æ‰€æœ‰çš„æ¨¡å—ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªå‰æå°±æ˜¯ï¼Œå½“æ¨¡å—çš„å¼•ç”¨æ¬¡æ•°å¤§äº1æ—¶ï¼Œæ¯”å¦‚è¢«å¼•ç”¨äº†ä¸¤æ¬¡æˆ–ä»¥ä¸Šï¼Œé‚£ä¹ˆè¿™ä¸ªæ•ˆæœä¼šæ— æ•ˆï¼Œä¹Ÿå°±æ˜¯è¢«å¼•ç”¨å¤šæ¬¡çš„æ¨¡å—åœ¨è¢«webpackå¤„ç†åï¼Œä¼šè¢«ç‹¬ç«‹çš„åŒ…è£¹å‡½æ•°æ‰€åŒ…è£¹ã€‚è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œè¢«å¤šæ¬¡å¼•ç”¨çš„è¯ï¼Œè‚¯å®šæ˜¯æŠ½ç¦»æˆä¸ºä¸€ä¸ªæ¨¡å—æ›´åŠ æ–¹ä¾¿ã€‚ //ä¸¾ä¸ªä¾‹å­ï¼Œæ²¡æœ‰ä½¿ç”¨scope hoisting,indexæ–‡ä»¶é‡Œimportä¸¤ä¸ªæ¨¡å—,æ‰“åŒ…åçš„indexæ–‡ä»¶æ˜¯è¿™æ ·å­çš„,ä¸¤ä¸ªå‡½æ•°ä½œç”¨åŸŸ(function(module, __webpack_exports__, __webpack_require__) {\"use strict\";__webpack_require__.r(__webpack_exports__);/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"hello\", function() { return hello; });function hello() { return 'hellos';}/***/ }),/* 14 *//***/ (function(module, __webpack_exports__, __webpack_require__) {\"use strict\";__webpack_require__.r(__webpack_exports__);/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"square\", function() { return square; });function square(x) { return x * x;}/***/ }), è®¾ç½®modeä¸ºnoneçš„æ—¶å€™ è®¾ç½® new webpack.optimize.ModuleConcatenationPlugin(),ä½œç”¨å°±æ˜¯å¼€å¯scopeHoisting/***/ 13:/***/ (function(module, __webpack_exports__, __webpack_require__) {\"use strict\";__webpack_require__.r(__webpack_exports__);// EXTERNAL MODULE: ./node_modules/react/index.jsvar react = __webpack_require__(0);var react_default = /*#__PURE__*/__webpack_require__.n(react);// EXTERNAL MODULE: ./node_modules/react-dom/index.jsvar react_dom = __webpack_require__(5);var react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);// EXTERNAL MODULE: ./src/index/style.cssvar style = __webpack_require__(11);// CONCATENATED MODULE: ./src/index/hello.jsfunction hello() { return 'hellos';}// CONCATENATED MODULE: ./src/commons/util.jsfunction square(x) { return x * x;} æ‰“åŒ…ç»„ä»¶/åŸºç¡€åº“webpackè¿˜å¯ä»¥ç”¨æ¥æ‰“åŒ…ç»„ä»¶æˆ–è€…åŸºç¡€åº“(å‘å¸ƒåˆ°npmä¸Š),ä¸¾ä¸ªç®€å•ä¾‹å­ã€‚ //config.jsconst path = require('path');const webpack =require('webpack');const TerserPlugin = require('terser-webpack-plugin');module.exports = { entry:{ \"long-number\":'./src/index.js', \"long-number.min\":'./src/index.js', }, output:{ path:path.join(__dirname,'dist'), filename:\"[name].js\", library:\"longNumber\", //æŒ‡å®šåº“çš„å…¨å±€å˜é‡ libraryTarget:'umd', //æ”¯æŒåº“çš„å¼•å…¥æ–¹å¼ umdè¡¨ç¤ºæ”¯æŒCJS ESM AMDæ–¹å¼ã€å…¨å±€å˜é‡ libraryExport:'default' // æ²¡æœ‰å£°æ˜æ˜¯defaultçš„è¯,æ‰“åŒ…åè¢«åŒ…è£¹äº†ä¸€å±‚å¯¹è±¡ï¼Œå¯¹è±¡ä¸‹çš„defaultæ‰æ˜¯æˆ‘ä»¬exportçš„ //Module {default: {â€¦}, __esModule: true, Symbol(Symbol.toStringTag): \"Module\"} }, mode:'none', optimization:{ minimize:true, minimizer:[ //è‡ªå®šä¹‰éœ€è¦å‹ç¼©çš„æ–‡ä»¶,wp4åæŠ›å¼ƒäº†UglifyJsPluginï¼ŒUglifyJsPluginå†…éƒ¨å…¶å®ä¹Ÿæ˜¯ç”¨äº†è¿™ä¸ªæ’ä»¶ new TerserPlugin({ include:/\\.min\\.js$/ }) ] } }//src/index.jsfunction add (num1,num2){ let a = String.prototype.split.call(num1,\"\"); let b = String.prototype.split.call(num2,\"\"); let res = []; let addOne = 0; //è¿›ä½æ•° //ä»¥ä¸¤ä¸ªæ•°æœ€é•¿çš„é‚£ä½ä¸ºæ ‡å‡† while(a.length||b.length){ let item1 = parseInt(a.pop())||0; let item2 = parseInt(b.pop())||0; let temp = item1+item2+addOne; if(temp&gt;9){ temp = temp%10; addOne = 1; }else{ addOne = 0; } res.unshift(temp) //æ¯æ¬¡éƒ½ä»å¤´æ’å…¥ } if(addOne){res.unshift(1)} //å½“æœ€åç›¸åŠ è¦è¿›ä½çš„æ—¶å€™ return res.join('');}export default {add}//æœ€ånpmç™»å½•å publishä¸Šå»åœ¨å…¶ä»–åœ°æ–¹å¯ä»¥import ä½¿ç”¨,ä¸”å…¨å±€çš„è¯ä¼šæœ‰ä¸ªlongNumberå˜é‡ï¼Œå¯ä»¥åœ¨å¼•å…¥scriptæ ‡ç­¾ä½¿ç”¨ å‘½ä»¤è¡Œæ„å»ºä¿¡æ¯çš„ä¼˜åŒ–é€šè¿‡é…ç½®statsæ¥å†³å®šæ„å»ºåè¾“å‡ºçš„å†…å®¹åŠå£°æ˜æ—¶å€™ä¼šè¾“å‡ºã€‚ä¸€èˆ¬æƒ…å†µä¸‹é…ç½®é¡¹éƒ½æ˜¯&quot;errors-only&quot;,åœ¨å‘ç”Ÿé”™è¯¯çš„æ—¶å€™æ‰è¾“å‡ºã€‚ä½†æ˜¯åœ¨æ¯æ¬¡æ„å»ºæˆåŠŸæˆ–è€…è­¦å‘Šçš„æ—¶å€™å°±æ²¡æœ‰å†…å®¹äº†ï¼Œè¿™æ—¶å¯ä»¥æ­é…friendly-errors-webpack-pluginæ¥å‹å¥½çš„æ˜¾ç¤ºæ„å»ºçš„å†…å®¹ã€‚","link":"/2020/03/24/webpack4/webpack4-base5/"},{"title":"webpack4ä¼˜åŒ–ç­–ç•¥","text":"é€Ÿåº¦åˆ†æä¸ä½“ç§¯åˆ†æwebpackè™½ç„¶å†…ç½®äº†statså¯¹è±¡å¯ä»¥çœ‹åˆ°æ¯æ¬¡æ‰“åŒ…åçš„ç»“æœï¼ˆè¾“å‡ºçš„ä¸€å¤§ä¸²ï¼‰ï¼Œä½†æ˜¯å†…å®¹è™½å¤šä½†æ˜¯éš¾çœ‹æ˜ç™½ã€‚æ‰€ä»¥å¾—å€ŸåŠ©å…¶ä»–æ’ä»¶æ¥ä½¿å¾—èƒ½æ˜æ˜¾çš„çœ‹åˆ°å“ªä¸ªç¯èŠ‚ï¼ˆå“ªä¸ªloader/pluginï¼‰çš„è€—æ—¶ï¼Œç›´è§‚çš„çœ‹åˆ°æ‰“åŒ…åé‚£äº›æ¨¡å—æ‰€å çš„ä½“ç§¯çš„æ¯”ä¾‹ï¼Œæ‰èƒ½è¿›è¡Œç›¸å…³å†…å®¹çš„ä¼˜åŒ–ä¸æé€Ÿã€‚ const SpeedMeasureWebpackPlugin = require('speed-measure-webpack-plugin'); //é€Ÿåº¦åˆ†ææ’ä»¶const BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin;//ä½“ç§¯åˆ†ææ’ä»¶const smp = new SpeedMeasureWebpackPlugin();module.exports = smp.wrap({plugins:[ new BundleAnalyzerPlugin();]})//SpeedMeasureWebpackPluginä¼šè¯¦ç»†çš„è¾“å‡ºæ¯ä¸ªloader pluginçš„è€—æ—¶SMP â± PluginsHtmlWebpackPlugin took 1.57 secsOptimizeCssAssetsWebpackPlugin took 0.227 secsBundleAnalyzerPlugin took 0.148 secsCleanWebpackPlugin took 0.01 secsMiniCssExtractPlugin took 0 secsSMP â± Loadersmodules with no loaders took 1.28 secsmodule count = 16//BundleAnalyzerPluginåˆ™ä¼šåœ¨æ‰“åŒ…åæ‰“å¼€ä¸€ä¸ª8888ç«¯å£æ¥å±•ç¤ºæ‰“åŒ…åæ¨¡å—çš„ä½“ç§¯æ¯”ä¾‹ ä½¿ç”¨å¤šè¿›ç¨‹æ„å»ºä¸å¤šè¿›ç¨‹å‹ç¼©ä»£ç ç”±äºnode.jsçš„å•è¿›ç¨‹å•çº¿ç¨‹çš„æ€§è´¨ï¼Œåœ¨è€—æ—¶çš„loaderè§£æçš„æ—¶å€™ï¼Œå¯ä»¥å¼€å¯å¤šè¿›ç¨‹çš„æ–¹å¼åŠ å¿«æ„å»ºï¼Œåœ¨æœ€åæ„å»ºå®Œæˆå‹ç¼©é˜¶æ®µä¹Ÿå¯ä»¥å¼€å¯å¤šè¿›ç¨‹çš„æ–¹å¼åŠ å¿«å‹ç¼©æ•ˆç‡ã€‚ //åœ¨è€—æ—¶çš„loaderä¸Šä½¿ç”¨æ‰æ˜¯æœ€å¥½çš„module.exports = {module:{ rules:[ { test:/\\.js$/, use: [ { loader: \"thread-loader\", // æœ‰åŒæ ·é…ç½®çš„ loader ä¼šå…±äº«ä¸€ä¸ª worker æ± (worker pool) options: { // äº§ç”Ÿçš„ worker çš„æ•°é‡ï¼Œé»˜è®¤æ˜¯ cpu çš„æ ¸å¿ƒæ•° workers: 2, // ä¸€ä¸ª worker è¿›ç¨‹ä¸­å¹¶è¡Œæ‰§è¡Œå·¥ä½œçš„æ•°é‡ // é»˜è®¤ä¸º 20 workerParallelJobs: 50, } }, \"babel-loader\" ] },}optimization:{ minimize:true, minimizer:[ new TerserPlugin({ //è‡ªå®šä¹‰éœ€è¦å‹ç¼©çš„æ–‡ä»¶,wp4åæŠ›å¼ƒäº†UglifyJsPluginï¼ŒUglifyJsPluginå†…éƒ¨å…¶å®ä¹Ÿæ˜¯ç”¨äº†è¿™ä¸ªæ’ä»¶ parallel:true //å¼€å¯å¤šè¿›ç¨‹å‹ç¼© }) ] } } é¢„ç¼–è¯‘èµ„æºæ¨¡å—åˆ†ç¦»(DLLä¼˜åŒ–)å°†ä¸€äº›ç¬¬ä¸‰æ–¹åº“ï¼Œå…ˆè¿›è¡Œé¢„ç¼–è¯‘æ‰“åŒ…æˆä¸€ä¸ªå›ºå®šçš„åº“ï¼ŒåŒæ—¶ç”Ÿæˆä¸€ä¸ªjsonæ–‡ä»¶ï¼Œè®°å½•ç›¸å…³å†…å®¹ä¿¡æ¯ï¼ŒåŒæ—¶å†ä¸»é…ç½®æ–‡ä»¶è¿›è¡Œå…³è”ï¼Œå°±èƒ½è¿›è¡Œç›¸å…³æ¨¡å—å¼•ç”¨ã€‚ä½†åœ¨webpack4åï¼Œå¯¹dllçš„åº”ç”¨å°±ä¸æ˜¯å¾ˆå¤šäº†ï¼Œå› ä¸ºæœ‰äº†splitchunkè¿›è¡Œåˆ†åŒ…å¤„ç†ï¼Œè¿˜æœ‰hard-source-webpack-plugin ç¼“å­˜æ¥æå‡äº†æ„å»ºé€Ÿåº¦ã€‚ä½†æ˜¯dllå¯¹äºä¸€ä¸ªå›¢é˜Ÿè€Œè¨€ï¼Œç‰¹åˆ«é‡‡ç”¨ç›¸åŒçš„æŠ€æœ¯æ ˆï¼Œè¦ä¹ˆ reactã€è¦ä¹ˆvue ç­‰ç­‰ã€‚è¿™ä¸ªæ—¶å€™ï¼Œé€šå¸¸çš„åšæ³•éƒ½æ˜¯æŠŠå…¬å…±æ¡†æ¶æ‰“æˆä¸€ä¸ª common bundle æ–‡ä»¶ä¾›æ‰€æœ‰é¡¹ç›®ä½¿ç”¨ã€‚æ¯”å¦‚å°† reactã€react-domã€reduxã€react-redux ç­‰ç­‰æ‰“åŒ…æˆä¸€ä¸ªå…¬å…±åº“ã€‚dll å¯ä»¥å¾ˆå¥½çš„æ»¡è¶³è¿™ç§åœºæ™¯ã€‚ /*webpack.dll.js*/ const webpack = require('webpack');const path = require('path');module.exports = { entry:{ //å¯ä»¥é…ç½®å¤šä¸ªkey,ä¾‹å¦‚è¿˜æœ‰å…¶ä»–çš„å…¬å…±æ¨¡å—ç­‰ vender:[ 'react', 'react-dom' ] }, output:{ path:path.join(__dirname,'dll'), filename:\"[name].js\", library:\"[name]_dll\" //æš´éœ²çš„åº“çš„åå­—,è¿™ä¸ªå¿…é¡»è·Ÿä¸‹é¢çš„jsonçš„nameä¸€è‡´,ä¸ç„¶å°±ä¼šå‡ºç°æ‰¾ä¸åˆ°é¢„ç¼–è¯‘çš„åº“çš„æƒ…å†µ }, mode:'production', plugins:[ new webpack.DllPlugin({ name:'[name]_dll', //jsonæ–‡ä»¶é‡Œé¢nameçš„å€¼ path:path.join(__dirname,'dll/[name].json'), }) ]}/*webpack.prod.js*/plugins:[ new webpack.DllReferencePlugin({ manifest:require('./dll/vender.json') }), //å¯ä»¥æ‰‹åŠ¨å¼•å…¥vender.jsæ–‡ä»¶ æˆ–è€…é€šè¿‡è¿™ä¸ªæ’ä»¶å¼•å…¥é™æ€èµ„æºæ–‡ä»¶ new AddAssetHtmlPlugin({ filepath: path.resolve(__dirname, './dll/vender.js') })] ä½¿ç”¨ç¼“å­˜æ¥æå‡äºŒæ¬¡æ„å»ºé€Ÿåº¦åœ¨è€—æ—¶çš„loaderä¾‹å¦‚babel-loaderå¼€å¯ç¼“å­˜å½¢å¼ï¼Œåœ¨æ„å»ºæ¨¡å—è½¬åŒ–é˜¶æ®µä½¿ç”¨hard-source-webpack-pluginå¼€å¯ç¼“å­˜ï¼Œåœ¨å‹ç¼©é˜¶æ®µå¼€å¯å‹ç¼©ç¼“å­˜ã€‚éƒ½èƒ½æå‡äºŒæ¬¡æ„å»ºçš„é€Ÿåº¦ã€‚å¼€å¯ç¼“å­˜åèƒ½åœ¨node_modulesç›®å½•ä¸‹çš„.cacheçœ‹åˆ°ç›¸å…³ç¼“å­˜æ–‡ä»¶ã€‚ { test:/\\.js$/, use:['babel-loader?cacheDirectory=true'], //å¼€å¯babel-loader çš„cache exclude: /node_modules/ }, optimization:{ minimize:true, minimizer:[ new TerserPlugin({ //è‡ªå®šä¹‰éœ€è¦å‹ç¼©çš„æ–‡ä»¶,wp4åæŠ›å¼ƒäº†UglifyJsPluginï¼ŒUglifyJsPluginå†…éƒ¨å…¶å®ä¹Ÿæ˜¯ç”¨äº†è¿™ä¸ªæ’ä»¶ parallel:true, //å¼€å¯å¤šè¿›ç¨‹å‹ç¼© cache:true //å¼€å¯å‹ç¼©ç¼“å­˜,æŒ‡å®šmodeä¸ºproductionçš„æ—¶å€™ä¼šè‡ªåŠ¨å¼€å¯ }) ] } //ä½¿ç”¨hard-source-webpack-pluginæ’ä»¶æ¥æä¾›æ¨¡å—è½¬æ¢çš„é˜¶æ®µç¼“å­˜plugins:[ new HardSourceWebpakPlugin()] ç¼©å°æ„å»ºç›®æ ‡æ¥åŠ å¿«æ„å»ºé€Ÿåº¦ åœ¨rulesè§„åˆ™åŒ¹é…çš„æ—¶å€™é€šè¿‡é…ç½®excludeæ¥å†³å®šé‚£äº›éœ€ç›®å½•ä¸éœ€è¦è¢«æœç´¢åŒ¹é…ï¼Œä¾‹å¦‚node_modules ä½¿ç”¨resloveè‡ªå®šä¹‰é…ç½®æ¨¡å—å¦‚ä½•è§£æ module.exports={ resolve:{ //åˆ›å»ºæ¨¡å—çš„åˆ«åï¼Œå¯ä»¥æ–¹ä¾¿å¼•å…¥åŒæ—¶å¯ä»¥å‘ŠçŸ¥webpackå¼•å…¥æ¨¡å—çš„æ—¶å€™å¯ä»¥ç›´æ¥é€šè¿‡è·¯å¾„å»å¯»æ‰¾è€Œä¸ç”¨ä¸€ç›´æŸ¥æ‰¾ã€‚å¦å¤–å¯ä»¥é…ç½®è‡ªå·±ç»„ä»¶æ¨¡å—å¼•å…¥çš„æ–¹å¼ï¼Œç®€åŒ–å¼•å…¥æ—¶å€™è·¯å¾„çš„é•¿åº¦ã€‚ alias:{ react:path.resolve(__dirname,'./node_modules/react/umd/react.production.min.js') }, //é…ç½®å½“æ‰¾ä¸åˆ°æ¨¡å—çš„æ—¶å€™æœç´¢çš„ç›®å½•ï¼Œé»˜è®¤æ˜¯è·ŸNode.jsä¸€æ ·ä¼šå…ˆæŸ¥æ‰¾å½“å‰ç›®å½•çš„ä»¥åŠçˆ¶çº§ç›®å½•çš„ ï¼ˆnode_modulesï¼‰ä¸€ç›´å¾€ä¸Šæ‰¾ modules:[path.resolve(__dirname,\"node_modules\")], extensions:['.js'], //è‡ªåŠ¨è§£æçš„æ‰©å±•åç§°,è¡¨ç¤ºåœ¨å¼•å…¥æ–‡ä»¶çš„æ—¶å€™å¯ä»¥ä¸ç”¨å†™åç¼€,é»˜è®¤æ˜¯js/json mainFields:['main'],//è‡ªå®šä¹‰å½“ä»npmåŒ…ä¸­å¯¼å…¥æ¨¡å—æ—¶å€™ï¼Œä»package.jsonä¸­ä½¿ç”¨å“ªä¸ªå­—æ®µå¯¼å…¥æ¨¡å—ï¼ŒåŠå“ªä¸ªæ˜¯æ¨¡å—çš„å…¥å£æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯[\"browser\", \"module\", \"main\"] }}","link":"/2020/03/24/webpack4/webpack4-base6/"},{"title":"webpack4é…ç½®æ–‡ä»¶åŠå…¶ç›¸å…³æ¦‚å¿µ","text":"é…ç½®æ–‡ä»¶ webpacké»˜è®¤è¯†åˆ«çš„é…ç½®æ–‡ä»¶æ˜¯webpack.config.jsã€‚ä½†æ˜¯åœ¨æ—¥å¸¸çš„é¡¹ç›®ä¸­ï¼Œé€šå¸¸æœ‰åˆ†ç”Ÿäº§ç¯å¢ƒä¸å¼€å‘ç¯å¢ƒï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡webpack â€“config æŒ‡å®šé…ç½®æ–‡ä»¶ã€‚ä¾‹å¦‚webpack â€“config webpack.pro.jsã€‚åœ¨package.jsoné‡Œé¢è„šæœ¬é…ç½®ã€‚æ‰“åŒ…çš„å‘½ä»¤æ˜¯./node_modules/.bin/webpackã€‚åŸç†æ˜¯å±€éƒ¨å®‰è£…çš„ä¾èµ–å¦‚æœæœ‰åˆ›å»ºä¸€äº›å‘½ä»¤çš„è¯ï¼Œä¼šåœ¨node_modules/.binç›®å½•åˆ›å»ºè½¯é“¾æ¥ã€‚è€Œpackage.jsoné»˜è®¤ä¼šè¯»å–è¿™äº›è½¯é“¾æ¥ã€‚æ‰€ä»¥å¯ä»¥åœ¨package.jsonçš„è„šæœ¬é‡Œé¢é…ç½®å‘½ä»¤ã€‚ æ‰“åŒ…è¾“å‡ºç»“æœ module.exports = { entry:{ index:'./src/index.js', utils:'./src/util.js' }, output:{ path:path.join(__dirname,'dist'), filename:'[id].bundle.js' }, mode:'production'} Hash: 8a5dd3006c8eb99d09ca //æœ¬æ¬¡æ‰“åŒ…å¯¹åº”çš„å”¯ä¸€çš„ä¸€ä¸ªhashå€¼Version: webpack 4.41.6 //webpack ç‰ˆæœ¬Time: 96ms //æ‰“åŒ…è€—æ—¶Built at: 2020-02-16 8:16:35 PM /* æ‰“åŒ…å‡ºçš„æ–‡ä»¶ æ–‡ä»¶å¤§å° chunks idæ•°ç»„ assetå¯¹åº”çš„chunkåç§° å°±æ˜¯entryæŒ‡å®šå¯¹è±¡çš„key å½“entryæ˜¯å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œä¼šé»˜è®¤æŒ‡å®šåç§°ä¸ºmain*/ Asset Size Chunks Chunk Names0.bundle.js 976 bytes 0 [emitted] index1.bundle.js 1020 bytes 1 [emitted] utilsEntrypoint index = 0.bundle.js //æ‰“åŒ…å…¥å£æ–‡ä»¶åŠè¾“å‡ºçš„ç»“æœEntrypoint utils = 1.bundle.js[0] ./src/util.js 179 bytes {1} [built][1] ./src/index.js + 1 modules 378 bytes {0} [built] //chunk 0 é‡Œæœ‰å¼•ç”¨å…³ç³»çš„æ–‡ä»¶åˆ—è¡¨| ./src/index.js 196 bytes [built]| ./src/hello.js 182 bytes [built] moduleã€chunkã€bundleåœ¨webpacké‡Œé¢çš„æ„ä¹‰ä¸åŒºåˆ« moduleï¼šæˆ‘ä»¬å†™çš„æ¯ä¸ªæ–‡ä»¶ï¼Œå¦‚jsæ–‡ä»¶,cssæ–‡ä»¶ï¼Œjsxæ–‡ä»¶ã€‚ç”šè‡³æ˜¯è¢«å¼•ç”¨çš„ä¸€å¼ å›¾ç‰‡ã€‚éƒ½æ˜¯è®¤ä¸ºæ˜¯moduleã€‚ chunkï¼šwebpackåœ¨è¿è¡Œæ‰“åŒ…çš„æ—¶å€™ï¼Œæ ¹æ®æ–‡ä»¶çš„å¼•ç”¨å…³ç³»ç”Ÿæˆchunkæ–‡ä»¶ï¼Œç„¶ååœ¨å¯¹è¿™ä¸ªchunkæ–‡ä»¶è¿›è¡Œç›¸å…³æ“ä½œã€‚ä¾‹å¦‚ä¸Šé¢ä¾‹å­ï¼Œindex.jså¼•ç”¨äº†hello.jsæ–‡ä»¶ï¼Œè¿™ä¸¤ä¸ªå°±ç”Ÿæˆäº†chunkæ–‡ä»¶ã€‚ bundleï¼šwebpackå¤„ç†å®Œchunkæ–‡ä»¶åï¼Œæœ€ç»ˆè¾“å‡ºçš„å°±æ˜¯bundleæ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶åŒ…å«äº†åŠ è½½ä¸ç¼–è¯‘åçš„æœ€ç»ˆæºæ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨è¿è¡Œã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªchunkä¼šå¯¹åº”ä¸€ä¸ªbundleï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¾‹å¤–ï¼Œä¾‹å¦‚æˆ‘åœ¨index.jsé‡Œé¢å¼•å…¥äº†index.cssæ–‡ä»¶,ä½†æˆ‘ç”¨æ’ä»¶å°†å…¶åˆ†å‰²å‡ºæ¥ç”Ÿæˆäº†index.bundle.cssæ–‡ä»¶ã€‚è¿™ä¸ªæ—¶å€™è¿™ä¸ªchunkå°±å¯¹åº”äº†ä¸¤ä¸ªbundleã€‚ æ€»ç»“æ¥è¯´ï¼Œæˆ‘ä»¬ç¼–å†™çš„æ˜¯moduleï¼Œwebpackè¿è¡Œçš„æ—¶å€™æ˜¯chunkï¼Œæœ€ç»ˆè¾“å‡ºçš„æ˜¯å¯ä»¥ç›´æ¥è¿è¡Œçš„bundleã€‚","link":"/2020/03/15/webpack4/webpack4-base1/"},{"title":"CSS3 å¸¸è§çŸ¥è¯†(äºŒ)","text":"ğŸ‘‡å†…å®¹é€Ÿè§ˆğŸ‘‡ å„ç§åƒç´ çš„åŒºåˆ«ä¸ç†è§£ é‚£äº›å¹´é‡åˆ°è¿‡çš„â€è§†å£â€ ç§»åŠ¨ç«¯é€‚é…çš„ä¸€äº›å°ç†è§£ å„ç§åƒç´ çš„åŒºåˆ«ä¸ç†è§£ è®¾å¤‡åƒç´ ï¼šè®¾å¤‡åƒç´ ï¼Œå³ç‰©ç†åƒç´ ã€åœ¨è®¾å¤‡å‡ºå‚çš„æ—¶å€™å°±å·²ç»å›ºåŒ–å¥½äº†ã€‚ è®¾å¤‡ç‹¬ç«‹åƒç´ ï¼šé€»è¾‘åƒç´ ï¼Œåœ¨ç¼©æ”¾æ¯”ä¾‹ç­‰äº100%çš„æ—¶å€™ï¼Œä¸€ä¸ªè®¾å¤‡ç‹¬ç«‹åƒç´ åˆšå¥½å°±ç­‰äºä¸€ä¸ªcssåƒç´ ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨è°·æ­Œæµè§ˆå™¨æ§åˆ¶å°åˆ‡æ¢åˆ°ç§»åŠ¨è®¾å¤‡çš„æ—¶å€™æ‰€æ˜¾ç¤ºçš„ã€‚ä¸ºä»€ä¹ˆåˆäº†ç‰©ç†åƒç´ è¿˜è¦å¼•å…¥è¿™äº›åƒç´ æ¥æ··æ·†å‘¢ã€‚å› ä¸ºå‘€ï¼Œåœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå¾ˆå¤šæ‰‹æœºçš„å±å¹•å°ºå¯¸ä¸å˜ï¼Œä½†æ˜¯ä»–çš„åˆ†è¾¨ç‡å´æé«˜äº†å¥½å‡ å€ï¼Œå¯¼è‡´äº†åœ¨ç›¸åŒå°ºå¯¸ä¸åŒåˆ†è¾¨ç‡çš„æ‰‹æœºä¸Šï¼Œå¦‚æœéƒ½æŒ‰ç‰©ç†åƒç´ é‚£æ ·å­è®¡ç®—çš„è¯ï¼Œåœ¨ä½åˆ†è¾¨ç‡çš„æ‰‹æœºä¸Šï¼Œèƒ½å¤Ÿæ’‘æ»¡çš„å†…å®¹ï¼Œåœ¨é«˜åˆ†è¾¨ç‡çš„æ‰‹æœºä¸Šï¼Œå¾€å¾€ä¼šç¼©å°å¥½å‡ å€ã€‚è¾¾ä¸åˆ°æˆ‘ä»¬æƒ³è¦çš„å…¼å®¹æ•ˆæœã€‚æ‰€ä»¥è¦å¼•å…¥ä¸€ä¸ªæ–°çš„å•ä½æ¥ç»Ÿä¸€çš„è®¡ç®—ã€‚ä¹Ÿå°±æœ‰äº†æ‰€è°“çš„è®¾å¤‡åƒç´ æ¯”ï¼ˆdprï¼‰ã€‚ è®¾å¤‡åƒç´ æ¯”ï¼šdpr =è®¾å¤‡åƒç´ /è®¾å¤‡ç‹¬ç«‹åƒç´ ï¼Œä¾‹å¦‚ï¼ŒiPhone6çš„è®¾å¤‡åƒç´ æ¯”æ˜¯2ï¼Œå³ä¸€ä¸ªè®¾å¤‡ç‹¬ç«‹åƒç´ ç­‰äºä¸¤ä¸ªç‰©ç†åƒç´ ã€‚ //åœ¨jsè·å–window.devicePixelRatio//css è·å– å½“è®¾å¤‡çš„dprå¤§äºç­‰äº3çš„æ—¶å€™ï¼Œå­—ä½“æ˜¾ç¤ºçº¢è‰²@media (min-resolution: 3dppx) { body { color: red; }} é‚£äº›å¹´é‡åˆ°è¿‡çš„â€è§†å£â€ å¸ƒå±€è§†å£ï¼šåœ¨pcæµè§ˆå™¨ä¸Šï¼Œå¸ƒå±€è§†å£ç­‰äºæµè§ˆå™¨çš„çª—å£å¤§å°ï¼Œä½†ä¸åŒ…æ‹¬ï¼ˆborder,margin,æ»šåŠ¨æ¡å®½åº¦ï¼‰åŒ…æ‹¬å†…å®¹è·Ÿpaddingã€‚åœ¨ç§»åŠ¨ç«¯ï¼Œè¿™ä¸ªè¢«é»˜è®¤çš„è®¾ç½®ä¸º980px,æœ¬æ„æ˜¯ä¸ºäº†è®©pcæµè§ˆå™¨çš„é¡µé¢èƒ½å®Œæ•´çš„æ˜¾ç¤ºåœ¨ç§»åŠ¨ç«¯ï¼Œä½†æ˜¯ç›¸åº”çš„é¡µé¢å°±è¦è¿›è¡Œç¼©å°å¤„ç†ï¼Œè¿›è€Œæ­¤æ—¶cssåƒç´ å°±ä¸ä¼šç­‰äºè®¾å¤‡ç‹¬ç«‹åƒç´ ã€‚ è§†è§‰è§†å£ï¼šç”¨æˆ·åœ¨å±å¹•çœ‹åˆ°çš„çœŸå®åŒºåŸŸï¼Œåœ¨pcæµè§ˆå™¨ä¸Šï¼Œè§†è§‰è§†å£å°±æ˜¯ç­‰äºæµè§ˆå™¨çš„çª—å£å¤§å°ï¼Œä½†ä¸åŒ…æ‹¬ï¼ˆborder,marginï¼‰ä½†åŒ…æ‹¬æ»šåŠ¨æ¡å®½åº¦ã€‚åœ¨ç§»åŠ¨ç«¯ï¼Œè¿™ä¸ªè¢«é»˜è®¤çš„è®¾ç½®ä¸º981pxã€‚ç”¨æˆ·ç¼©æ”¾æµè§ˆå™¨ï¼Œä¸ä¼šæ”¹å˜å¸ƒå±€è§†å£ï¼Œä½†æ˜¯ä¼šæ”¹å˜è§†è§‰è§†å£ã€‚ ç†æƒ³è§†å£ï¼šè°·æ­Œæµè§ˆå™¨è°ƒè¯•ç§»åŠ¨ç«¯çš„åˆ°æ—¶å€™é¡µé¢ç»™çš„åƒç´ å¤§å°ï¼Œåƒç´ å•ä½æ˜¯è®¾å¤‡ç‹¬ç«‹åƒç´ ã€‚ è®©cssåƒç´ ç­‰äºè®¾å¤‡åƒç´  &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"&gt;/*width=device-widthä½œç”¨æ˜¯å°†viewportå®½åº¦è®¾ç½®ä¸ºè®¾å¤‡ç‹¬ç«‹åƒç´ çš„å®½åº¦-&gt;å³å¸ƒå±€è§†å£ç­‰äºç†æƒ³è§†å£ã€‚è¿™æ—¶å€™cssåƒç´ å°±ä¸è®¾å¤‡ç‹¬ç«‹åƒç´ ä¸€ä¸€å¯¹åº”ï¼Œæ­¤æ—¶çš„innerWidthå°±æ˜¯è®¾å¤‡ç‹¬ç«‹åƒç´ çš„å¤§å°è€Œä¸æ˜¯980pxäº†initial-scale é»˜è®¤ç¼©æ”¾æ¯”ä¾‹ï¼Œ100%ï¼Œå¦‚æœæ”¹å˜çš„è¯æ¯”å¦‚width: 128pxã€‚cssåƒç´ çš„å¤§å°æ˜¯å¾ˆå®¹æ˜“å˜åŒ–çš„ã€‚å½“æˆ‘ä»¬ç¼©æ”¾é¡µé¢çš„æ—¶å€™ï¼Œå…ƒç´ çš„cssåƒç´ æ•°é‡ä¸ä¼šæ”¹å˜ï¼Œæ”¹å˜çš„åªæ˜¯æ¯ä¸ªcssåƒç´ çš„å¤§å°ã€‚ä¹Ÿå°±æ˜¯è¯´width: 128pxçš„å…ƒç´ åœ¨ç¼©æ”¾200%ä»¥åï¼Œå®½åº¦ä¾ç„¶æ˜¯128ä¸ªcssåƒç´ ï¼Œåªä¸è¿‡æ¯ä¸ªcssåƒç´ çš„å®½åº¦å’Œé«˜åº¦å˜ä¸ºåŸæ¥çš„ä¸¤å€ã€‚å¦‚æœåŸæœ¬å…ƒç´ å®½åº¦ä¸º128ä¸ªè®¾å¤‡ç‹¬ç«‹åƒç´ ï¼Œé‚£ä¹ˆç¼©æ”¾200%ä»¥åå…ƒç´ å®½åº¦ä¸º256ä¸ªè®¾å¤‡ç‹¬ç«‹åƒç´ ï¼ˆcssåƒç´ å®½åº¦å§‹ç»ˆæ˜¯128ï¼‰æ”¾å¤§çš„æ—¶å€™ï¼Œè§†è§‰è§†å£çš„å¤§å°å³ç”¨æˆ·çœ‹åˆ°çš„å¤§å°å°±ä¼šå˜å°ï¼Œæ‰€ä»¥ç†æƒ³è§†å£/è§†è§‰è§†å£=è®¾å¤‡ç‹¬ç«‹åƒç´ /cssåƒç´ =é¡µé¢çš„ç¼©æ”¾æ¯”ä¾‹psï¼šå¯ä»¥è®¾ç½®ç¦æ­¢ç¼©æ”¾æ¥è¾¾åˆ°cssåƒç´ ä¸è®¾å¤‡ç‹¬ç«‹åƒç´ çš„1:1ï¼Œä½†ç”¨æˆ·ä½“éªŒå¯èƒ½ä¼šä¸å¥½*/ æµè§ˆå™¨çš„ä¸€äº›ç›¸å…³å¤§å°è·å–ï¼šå½“é¡µé¢ç¼©æ”¾æ¯”ä¾‹ä¸º 100%æ—¶ï¼Œ CSSåƒç´ =è®¾å¤‡ç‹¬ç«‹åƒç´ ï¼Œç†æƒ³è§†å£=è§†è§‰è§†å£ã€‚ window.innerHeightï¼šè·å–æµè§ˆå™¨è§†è§‰è§†å£é«˜åº¦ï¼ˆåŒ…æ‹¬å‚ç›´æ»šåŠ¨æ¡ï¼‰ã€‚ window.outerHeightï¼šè·å–æµè§ˆå™¨çª—å£å¤–éƒ¨çš„é«˜åº¦ã€‚è¡¨ç¤ºæ•´ä¸ªæµè§ˆå™¨çª—å£çš„é«˜åº¦ï¼ŒåŒ…æ‹¬ä¾§è¾¹æ ã€çª—å£é•¶è¾¹å’Œè°ƒæ­£çª—å£å¤§å°çš„è¾¹æ¡†ã€‚ window.screen.Heightï¼šè·å–è·å±å¹•å–ç†æƒ³è§†å£é«˜åº¦ï¼Œè¿™ä¸ªæ•°å€¼æ˜¯å›ºå®šçš„ã€‚ window.screen.availHeightï¼šæµè§ˆå™¨çª—å£å¯ç”¨çš„é«˜åº¦ã€‚ document.documentElement.clientHeightï¼šè·å–æµè§ˆå™¨å¸ƒå±€è§†å£é«˜åº¦ï¼ŒåŒ…æ‹¬å†…è¾¹è·ï¼Œä½†ä¸åŒ…æ‹¬å‚ç›´æ»šåŠ¨æ¡ã€è¾¹æ¡†å’Œå¤–è¾¹è·ã€‚ document.documentElement.offsetHeightï¼šåŒ…æ‹¬å†…è¾¹è·ã€æ»šåŠ¨æ¡ã€è¾¹æ¡†å’Œå¤–è¾¹è·ã€‚ document.documentElement.scrollHeightï¼šåœ¨ä¸ä½¿ç”¨æ»šåŠ¨æ¡çš„æƒ…å†µä¸‹é€‚åˆè§†å£ä¸­çš„æ‰€æœ‰å†…å®¹æ‰€éœ€çš„æœ€å°å®½åº¦ã€‚æµ‹é‡æ–¹å¼ä¸ clientHeightç›¸åŒï¼šå®ƒåŒ…å«å…ƒç´ çš„å†…è¾¹è·ï¼Œä½†ä¸åŒ…æ‹¬è¾¹æ¡†ï¼Œå¤–è¾¹è·æˆ–å‚ç›´æ»šåŠ¨æ¡ã€‚ ç§»åŠ¨ç«¯é€‚é…çš„ä¸€äº›å°ç†è§£ flexibleæ–¹æ¡ˆï¼šä½¿ç”¨remæ¥å¸ƒå±€ï¼Œç¼ºç‚¹è®¡ç®—æ¯”è¾ƒç¹çï¼Œä½†æ˜¯æœ‰æ’ä»¶å¯ä»¥æ”¯æŒ (function (win, doc) { if (!win.addEventListener) return; var html = document.documentElement; function setFont() { var cliWidth = html.clientWidth; var rem = clientWidth /10 html.style.fontSize = rem+'px' //å°†font-sizeè®¾ç½®ä¸ºå¸ƒå±€è§†å£çš„1/10 } win.addEventListener('resize', setFont, false) doc.addEventListener('DOMContentLoaded', setFont, false)})(window, document); vw,vh è§†å£å®½åº¦è§†å£é«˜åº¦ç™¾åˆ†æ¯”ï¼Œå°†è§†å£å®½åº¦è·Ÿè§†å£é«˜åº¦åˆ†ä¸º100ä»½ï¼Œæ¯ä»½æ˜¯1%ã€‚ç¼ºç‚¹æ˜¯pxè½¬æ¢ä¸ºvwçš„æ—¶å€™ä¸ä¸€å®šèƒ½æ•´é™¤ã€‚ è§£å†³1pxé€‚é…é—®é¢˜ï¼šåœ¨è®¾å¤‡åƒç´ æ¯”å¤§äº1çš„è®¾å¤‡ä¸Šï¼Œ1pxæ˜¯è¢«å¤šä¸ªç‰©ç†åƒç´ æ¸²æŸ“ã€‚ /*ä½¿ç”¨ä¼ªç±»è·Ÿåª’ä½“æŸ¥è¯¢*/.border_1px:before{ content:'', position:absolute; height:1px; width:100%; backgorund-color:#000; transform-origin:50% 0;}/*2å€å±*/@media only and screen(min-resolution: 2dppx) { .border_1px:before{ transform:scaleY(0.5) }}/*3å€å±*/@media only and screen(min-resolution: 3dppx) { .border_1px:before{ transform:scaleY(0.33) }}","link":"/2020/03/13/ui/css-base2/"},{"title":"webpackåŸºæœ¬é…ç½®(ä¸Š)","text":"entry(å…¥å£) webpackæ‰“åŒ…çš„å…¥å£,æ ¹æ®è¿™ä¸ªå…¥å£æ–‡ä»¶åŠé‡Œé¢æ–‡ä»¶çš„ç›¸å…³ä¾èµ–æ¥å¼€å§‹æ„å»º,å¯ä»¥æŒ‡å®šå•ä¸ªæˆ–è€…å¤šä¸ªå…¥å£ã€‚ä¸¾ä¸ªä¾‹å­ module.exports = { entry:'./src/index.js', //å•ä¸ªå…¥å£çš„æ—¶å€™æ˜¯å­—ç¬¦ä¸² é»˜è®¤æ˜¯.src/index //å¤šä¸ªå…¥å£çš„æ—¶å€™æ˜¯å¯¹è±¡ã€‚å¯ä»¥åŠ¨æ€é…ç½® entry:{ phone:'./src/phone.js', pc:'./src/pc.js' } } output(å‡ºå£) webpackæ‰“åŒ…ç”Ÿæˆçš„bundleçš„æœ€ç»ˆå‡ºå£ï¼Œå¯ä»¥æŒ‡å®šæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•åŠå‘½åæ ¼å¼ç­‰é…ç½®ï¼ŒæŒ‰éœ€åŠ è½½çš„æ–‡ä»¶åç§°ç­‰ã€‚å…·ä½“æ›´å¤šçš„é…ç½®å¯å‚ç…§å®˜ç½‘çš„ã€‚ä¸¾ä¸ªä¾‹å­ module.exports = { output:{ path:path.join(__dirname,'dist'), filename:'bundle.js' //å•å…¥å£çš„æ—¶å€™ filename:'[name].bundle.js' //å¤šå…¥å£çš„æ—¶å€™ä½¿ç”¨å…¥å£åç§°å ä½ç¬¦ filename:'[id].bundle.js'//å¤šå…¥å£ä½¿ç”¨å†…éƒ¨chunk idå ä½ç¬¦ filename: \"[name].[hash].bundle.js\" //å¤šå…¥å£çš„æ—¶å€™ä½¿ç”¨å…¥å£åç§°å ä½ç¬¦åŠ æ¯æ¬¡æ‰“åŒ…çš„hash chunkFilename: 'chunk.bundle.js', // æŒ‡æœªåˆ—åœ¨ entry ä¸­ï¼Œå´åˆéœ€è¦è¢«æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶çš„åç§°,é€šå¸¸æŒ‡æŒ‰éœ€åŠ è½½çš„ä»£ç  },} loaders webpacké»˜è®¤åªæ”¯æŒjs/jsonä¸¤è€…æ–‡ä»¶ç±»å‹ï¼Œéœ€è¦é€šè¿‡loadersæ¥æ”¯æŒå…¶ä»–æ–‡ä»¶ç±»å‹å¹¶è½¬æ¢ä¸ºæœ‰æ•ˆçš„æ¨¡å—ï¼Œä»è€Œå¯ä»¥æ·»åŠ åˆ°ä¾èµ–å›¾ã€‚æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—æºæ–‡ä»¶ä½œä¸ºå‚æ•°ï¼Œè¿”å›è½¬æ¢çš„ç»“æœï¼Œå¯ä»¥å¯¹ä¸€ä¸ªè§„åˆ™æŒ‡å®šå¤šä¸ªloader,æŒ‡å®šå¤šä¸ªloaderçš„æ—¶å€™ï¼Œæ‰§è¡Œæ˜¯ä»å³åˆ°å·¦ã€‚ä¸¾ä¸ªä¾‹å­ module.exports = { module: { rules: [ { test: /\\.css$/, //åŒ¹é…è§„åˆ™ï¼Œä»¥.cssä¸ºç»“å°¾çš„æ–‡ä»¶ use:['style-loader','css-loader'] //æˆ–è€… loader:'style-loaer!css-loade' /*loaderéœ€è¦ç›¸åº”é…ç½®çš„æ—¶å€™*/ use: [ { loader: 'style-loader' }, //å°†ç”Ÿæˆçš„cssä»£ç æ”¾åœ¨ä¸€ä¸ªstyleæ ‡ç­¾é‡Œé¢ï¼Œæ”¾åˆ°headæ ‡ç­¾ï¼Œå½“æ ·å¼ä»£ç å¤ªå¤§çš„æ—¶å€™ä¸å¥½ç”¨ï¼Œéœ€è¦ä½¿ç”¨pluginæŠ½ç¦»å‡ºæˆä¸ºcssæ–‡ä»¶linkå¼•ç”¨ { loader: 'css-loader', //æ”¯æŒ.cssæ–‡ä»¶çš„åŠ è½½ä¸è§£æ å¦‚import style.css options: { modules: true } } ], exclude: /node_modules/ } ] }} plugins ç”¨äºæœ€ç»ˆbundleæ–‡ä»¶çš„ä¼˜åŒ–ï¼Œèµ„æºç®¡ç†å’Œç¯å¢ƒå˜é‡æ³¨å…¥ï¼Œå¼¥è¡¥loadersæ²¡æœ‰çš„åŠŸèƒ½ã€‚åé¢å¾ˆå¤šå†…å®¹é…ç½®éƒ½ä¼šç”¨åˆ°ç›¸å…³çš„pluginï¼Œæœ‰äº›æ˜¯webpackè‡ªå¸¦çš„æœ‰äº›æ˜¯ç¤¾åŒºéœ€è¦é¢å¤–ä¸‹è½½çš„ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œwebpackè‡ªå¸¦çš„å®šä¹‰å…¨å±€å˜é‡æ’ä»¶ module.exports = { /*ä½¿ç”¨JSON.srtingfyçš„åŸå› æ˜¯definePluginæ’ä»¶å£°æ˜çš„å…¨å±€å˜é‡æ˜¯ç›´æ¥å°†å†…å®¹æ›¿æ¢äº†ï¼Œå¦‚æœä¸stringfyçš„è¯ \"development\"æœ€åå˜æˆdevelopmentå˜é‡äº†ï¼Œ \"'development'\" æ‰ä¼šç­‰äº'devlopment'*/ new webpack.DefinePlugin({ \"process.env.NODE_ENV\": JSON.stringify(\"development\") }), } mode å‘ŠçŸ¥webpackä½¿ç”¨ç›¸åº”æ¨¡å¼çš„å†…ç½®ä¼˜åŒ–ï¼šæœ‰ä¸¤ä¸ªé€‰é¡¹ï¼Œä¸€ä¸ªæ˜¯developmentï¼Œå°†process.env.NODE_ENVè®¾ç½®ä¸ºdevelopment,åŒæ—¶å¯ç”¨webpackåœ¨å¼€å‘ç¯å¢ƒçš„ç›¸å…³æ’ä»¶ã€‚å¦å¤–ä¸€ä¸ªproductionï¼Œå°†process.env.NODE_ENVè®¾ç½®ä¸ºproductionï¼ŒåŒæ—¶å¯ç”¨webpackåœ¨ç”Ÿäº§ç¯å¢ƒçš„ç›¸å…³æ’ä»¶(åé¢ä¼šè®²åˆ°)ã€‚ module.exports = { + mode: 'development' //ç­‰åŒäºä½¿ç”¨ä¸‹é¢è¿™äº›æ’ä»¶ - plugins: [ - new webpack.NamedModulesPlugin(), - new webpack.DefinePlugin({ \"process.env.NODE_ENV\": JSON.stringify(\"development\") }), - ]}","link":"/2020/03/15/webpack4/webpack4-base2/"},{"title":"ES6çŸ¥è¯†ç‚¹(äºŒ)","text":"ğŸ‘‡å†…å®¹é€Ÿè§ˆğŸ‘‡ Setã€Mapæ•°æ®ç»“æ„ Proxy(ä»£ç†å™¨) Promiseå¯¹è±¡ Setã€Mapæ•°æ®ç»“æ„ Set â€‹å­¦è¿‡Javaçš„è¯å°±ä¼šå¯¹è¿™ä¸ªæ•°æ®ç»“æ„å¾ˆç†Ÿæ‚‰ã€‚å®ƒç±»ä¼¼äºæ•°ç»„ï¼Œä½†æ˜¯åŒºåˆ«åœ¨äºå®ƒçš„æˆå‘˜å€¼åªèƒ½æ˜¯å”¯ä¸€çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé‡Œé¢æ˜¯æ²¡æœ‰é‡å¤çš„å€¼ã€‚è·Ÿå…¶ä»–æ•°æ®ç±»å‹ä¸€æ ·ï¼Œéƒ½æ˜¯ç”±æ„é€ å™¨å‡½æ•°Setæœ¬èº«æ¥newç”Ÿæˆç›¸åº”çš„å®ä¾‹ã€‚å®ƒå¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ï¼Œæ‰€ä»¥å¯ä»¥ç”¨æ¥è¿›è¡Œæ•°ç»„çš„å»é‡å·¥ä½œã€‚ æ³¨æ„ï¼šSetæ²¡æœ‰é”®åï¼Œåªæœ‰é”®å€¼ã€‚æˆ–è€…è¯´å®ƒçš„é”®å€¼ä¸é”®åæ˜¯åŒä¸€ä¸ªï¼ //æ„é€ ä¸€ä¸ªSetå®ä¾‹ï¼Œæ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°const set=new Set([1,2,3,4]);//å¯ä»¥è¢«for...oféå†ã€‚å¯ä»¥çœ‹åˆ°é”®å€¼ä¸é”®åæ˜¯ä¸€æ ·çš„for(let item of set.entries()){ console.log(item)}// [1,1] [2,2] [3,3] [4,4] Set çš„å››ä¸ªæ“ä½œæ–¹æ³• add(value)ï¼šæ·»åŠ æŸä¸ªå€¼ï¼Œè¿”å› Set ç»“æ„æœ¬èº«ã€‚ delete(value)ï¼šåˆ é™¤æŸä¸ªå€¼ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºåˆ é™¤æ˜¯å¦æˆåŠŸã€‚ has(value)ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥å€¼æ˜¯å¦ä¸ºSetçš„æˆå‘˜ã€‚ clear()ï¼šæ¸…é™¤æ‰€æœ‰æˆå‘˜ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚ Set çš„å››ä¸ªéå†æ–¹æ³• keys()ï¼šè¿”å›é”®åçš„éå†å™¨ values()ï¼šè¿”å›é”®å€¼çš„éå†å™¨ entries()ï¼šè¿”å›é”®å€¼å¯¹çš„éå†å™¨ forEach()ï¼šä½¿ç”¨å›è°ƒå‡½æ•°éå†æ¯ä¸ªæˆå‘˜ WeakSet ä¸Setç±»ä¼¼ï¼Œä½†æ­£å¦‚å…¶åä¸€æ ·ï¼Œå®ƒåªæ˜¯Setçš„å¼±ç±»å‹ï¼Œä¸”æˆå‘˜åªèƒ½æ˜¯å¯¹è±¡ï¼Œå¯¹æˆå‘˜å¯¹è±¡çš„å¼•ç”¨æ˜¯å¼±å¼•ç”¨ã€‚å¼±å¼•ç”¨å°±æ˜¯å¯¹å€¼çš„å¼•ç”¨çš„ä¸è®¡å…¥åƒåœ¾å›æ”¶æœºåˆ¶çš„å¼•ç”¨æ¬¡æ•°çš„ï¼Œå¾ˆå¯èƒ½åœ¨æŸæ—¶åˆ»è¢«åƒåœ¾å›æ”¶æœºåˆ¶ç»™å›æ”¶æ‰ã€‚æ‰€ä»¥ä¸èƒ½è¢«éå†ï¼Œå› ä¸ºå€¼ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™ä¼šè¢«å›æ”¶äº†ã€‚ä½†æ˜¯å› ä¸ºè¿™ä¸ªç‰¹æ€§ï¼Œå¯ä»¥ç”¨æ¥å­˜æ”¾ä¸€ç»„ä¸´æ—¶çš„å¯¹è±¡ï¼Œä»¥åŠå­˜æ”¾å¯¹è±¡çš„ç›¸å…³ä¿¡æ¯ï¼Œåªè¦å¤–éƒ¨çš„å¼•ç”¨æ¶ˆå¤±ï¼ŒWeakSetå¯¹è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ä¹Ÿè‡ªåŠ¨æ¶ˆå¤±ã€‚ä»¥æ­¤å‡å°‘å†…å­˜æ³„æ¼ã€‚ const ws = new WeakSet();var a={dom:document.getElementById('root'),name:'cn'}ws.add(a);console.log(ws.has(a));//truea = nullconsole.log(ws.has(a));//false Map Mapè·Ÿå¯¹è±¡å¾ˆç±»ä¼¼ï¼Œä½†æ˜¯ä¼ ç»Ÿçš„å¯¹è±¡çš„é”®ååªèƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™é‡Œçš„Mapçš„é”®åå¯ä»¥æ˜¯ä»»ä½•çš„ç±»å‹ï¼ŒåŒ…æ‹¬å¯¹è±¡ã€‚åŒæ ·çš„ï¼Œä¹Ÿæ˜¯é€šè¿‡æ„é€ å™¨å‡½æ•°æ¥åˆå§‹åŒ–å®ä¾‹ï¼Œå¯ä»¥æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œä»»ä½•å…·æœ‰è¿­ä»£å™¨æ¥å£ï¼Œä¸”æˆå‘˜æ˜¯ä¸€ä¸ªåŒå…ƒç´ çš„æ•°ç»„çš„æ•°æ®ç»“æ„ï¼Œéƒ½å¯ä»¥ä½œä¸ºå‚æ•°ã€‚ const map=new Map([['name','cn'],['age','20']]);console.log(map.size); //2console.log(map.get('name'));//cn//æ¥å—æ•°ç»„ä¸ºå‚æ•°ï¼Œå®é™…æ˜¯æ‰§è¡Œäº†ä¸€ä¸‹çš„ä»£ç var item=[['name','cn'],['age','20']];const map=new Map();item.forEach(([key,value])=&gt;{ map.set(key,value);}) æ³¨æ„ï¼šåŒä¸€ä¸ªå€¼çš„ä¸åŒå¯¹è±¡æ˜¯è¢«è§†ä¸ºä¸åŒçš„é”®çš„ã€‚ Mapçš„å±æ€§å’Œæ–¹æ³• size å±æ€§ è¿”å›æˆå‘˜æ€»æ•°ã€‚ set(key, value) è®¾å€¼ get(key) è·å–å€¼ has(key) æŸ¥è¯¢ delete(key) åˆ é™¤ clear() æ¸…é™¤æ‰€æœ‰æˆå‘˜ éå†æ–¹æ³•ç±»åŒSet WeakMap ä¸Mapç±»ä¼¼ï¼Œä½†åªæ¥å—å¯¹è±¡ä½œä¸ºé”®ï¼Œé”®åå¯¹å¯¹è±¡çš„å¼•ç”¨æ˜¯å¼±å¼•ç”¨ï¼Œå…¶å¼•ç”¨å¯¹è±¡å¯ä»¥è¢«åƒåœ¾å›æ”¶ï¼Œä¸èƒ½éå†ã€‚å¯ä»¥ç”¨æ¥ä¿å­˜DOMèŠ‚ç‚¹ã€‚å³å¦‚æœæƒ³ä¸ºå¯¹è±¡æ·»åŠ ç›¸åº”çš„æ•°æ®æˆ–è€…æè¿°ï¼Œåˆä¸æƒ³å¹²æ‰°åƒåœ¾å›æ”¶æœºåˆ¶ï¼ŒMapæ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚ const wm = new WeakMap();const element = document.getElementById('root');wm.set(element, 'information');/*æ­¤æ—¶å¦‚æœæ¶ˆé™¤elementçš„å¼•ç”¨ï¼Œåˆ™æ‰€å çš„å†…å­˜å°†ä¼šè¢«å›æ”¶ï¼ŒWeakmap ä¿å­˜çš„è¿™ä¸ªé”®å€¼å¯¹ï¼Œä¹Ÿä¼šè‡ªåŠ¨æ¶ˆå¤±ã€‚*/-------------------------------------------------/*psï¼šä¸‹é¢æ˜¯ç”¨ nodeæ¨¡æ‹Ÿçš„ä¸€ä¸ªç¯å¢ƒ,æœäº†ä¸å°‘éƒ½æ˜¯è¯´heapUsedå€¼æ‰æ˜¯åˆ¤æ–­å†…å­˜æ˜¯å¦æ³„æ¼çš„æ ‡å‡†ï¼Œä½†æ˜¯æˆ‘è¿™é‡Œçš„é”®å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„å­˜å‚¨ç©ºé—´æ˜¯åœ¨æ ˆé‡Œé¢è€Œä¸æ˜¯å †ï¼Œæ‰€ä»¥æ„Ÿè§‰çœ‹rssçš„å ç”¨å¯èƒ½æ˜¯æ¯”è¾ƒå¯¹å§ï¼ˆä¸ªäººçŒœæƒ³ï¼Œå› ä¸ºheapUsedçš„å€¼å°±æŒ‰ç…§æ‰€æƒ³çš„å€¼çš„é¡ºåºå‡ºç°ï¼Œæœ‰æ­£ç¡®çš„ è§‚ç‚¹çš„æ¬¢è¿åœ¨è¯„è®ºæŒ‡å‡º................ï¼‰*/PS D:\\react\\server&gt; node --expose-gc&gt; global.gc();undefined&gt; process.memoryUsage();{ rss: 22376448, //æ‰€æœ‰å†…å­˜å ç”¨ heapTotal: 6635520,//å †å ç”¨çš„å†…å­˜ åŒ…æ‹¬ç”¨åˆ°è·Ÿæ²¡ç”¨åˆ°çš„ heapUsed: 4548648,//ç”¨åˆ°çš„å † external: 9625 }// V8å¼•æ“å†…éƒ¨C++å¯¹è±¡å ç”¨çš„å†…å­˜&gt; let wm = new WeakMap();undefined&gt; let b = new Object();undefined&gt; global.gc();undefined&gt; process.memoryUsage();{ rss: 22044672, heapTotal: 7684096, heapUsed: 4830024, external: 8716 }&gt; wm.set(b, new Array(5*1024*1024));WeakMap {}&gt; global.gc();undefined&gt; process.memoryUsage();{ rss: 64049152, //setä¹‹åï¼Œå†…å­˜å ç”¨æ˜æ˜¾å˜å¤§ heapTotal: 49639424, heapUsed: 46702528, external: 8619 }&gt; b=null; //æ¸…é™¤å¤–éƒ¨å¼•ç”¨null&gt; global.gc();undefined&gt; process.memoryUsage();{ rss: 22102016, //å†…å­˜å¤§å°æ¢å¤è·Ÿä¹‹å‰å¼€å§‹çš„å·®ä¸å¤šå¤§å°çš„å€¼ heapTotal: 7684096, heapUsed: 4757064, external: 8682 }&gt; Proxy(ä»£ç†å™¨) ES6å¼•å…¥äº†proxyå¯¹è±¡ï¼Œç”¨æ¥åœ¨è®¿é—®ç›®æ ‡å¯¹è±¡ä¹‹å‰è¿›è¡Œä¸€äº›æ‹¦æˆªæ“ä½œï¼Œå¯ä»¥å¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œè¿‡æ»¤è·Ÿæ”¹å†™ã€‚åŒæ ·çš„ï¼Œå®ƒä¹Ÿæ˜¯æœ‰ç›¸åº”çš„æ„é€ å™¨å‡½æ•°æ¥æ„å»ºå®ä¾‹ã€‚ æ³¨æ„ï¼Œè¦ä½¿å¾—Proxyèµ·ä½œç”¨ï¼Œå¿…é¡»é’ˆå¯¹Proxyå®ä¾‹ï¼ˆä¸Šä¾‹æ˜¯proxyå¯¹è±¡ï¼‰è¿›è¡Œæ“ä½œï¼Œè€Œä¸æ˜¯é’ˆå¯¹ç›®æ ‡å¯¹è±¡è¿›è¡Œæ“ä½œã€‚ var proxy=new Proxy(target,handler)//å…¶ä¸­targetè¡¨ç¤ºè¦æ‹¦æˆªçš„å¯¹è±¡ï¼Œhandleråˆ™æ˜¯å®šä¹‰æ‹¦æˆªçš„è¡Œä¸ºï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡Ps:å¦‚æœhandlerä¸ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œåˆ™wæ²¡æœ‰æ‹¦æˆªæ•ˆæœï¼Œè®¿é—®proxyå°±æ˜¯è®¿é—®targetæœ¬èº«//å¯¹è±¡çš„è¯»å–æ“ä½œ,ä½¿ç”¨getæ–¹æ³•var person={ name:'cn'}var proxy=new Proxy(person,{ get:function (target,property){ if(property in target ){ return target[property] }else{ throw new Error('æ²¡æœ‰è¿™ä¸ªå‚æ•°') } }});proxy.name //cnproxy.age //æŠ›å‡ºå¼‚å¸¸ Proxyæ”¯æŒçš„æ‹¦æˆªæ“ä½œä¸€å…±æœ‰13ç§ï¼Œå…·ä½“å¯ä»¥å»çœ‹é˜®ä¸€å³°å¤§ä½¬çš„æ–‡æ¡£ğŸ‘‡ http://es6.ruanyifeng.com/#docs/proxy#Proxy Promiseå¯¹è±¡ ä»¥å¾€çš„å¼‚æ­¥ç¼–ç¨‹ï¼Œå¾€å¾€éƒ½æ˜¯é€šè¿‡äº‹ä»¶+å›è°ƒå‡½æ•°æ¥å®ç°ï¼Œä½†æ˜¯å½“å›è°ƒåµŒå¥—å¾ˆå¤šå±‚çš„æ—¶å€™ï¼Œå…¶ä»£ç çš„å¯è¯»æ€§è·Ÿç»´æŠ¤éš¾åº¦éƒ½ä¼šå¤§å¤§å¢åŠ ï¼Œè¿›è€Œå‡ºç°â€œå›è°ƒåœ°ç‹±â€è¿™ç§æƒ…å†µã€‚è€Œpromiseå¯¹è±¡ï¼Œè¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆçŠ¶æ€(æˆåŠŸæˆ–è€…å¤±è´¥),å¯ä»¥å°†å¼‚æ­¥æ“ä½œç”¨â€œåŒæ­¥â€çš„å½¢å¼è¡¨ç¤ºå‡ºæ¥ï¼Œä»è€Œè§£å†³äº†â€œå›è°ƒåœ°ç‹±çš„é—®é¢˜â€ã€‚ promiseæœ‰ä¸‰ç§çŠ¶æ€ï¼špending(è¿›è¡Œä¸­)ã€resolved-fulfilled(å·²æˆåŠŸ)ã€ rejected(å·²å¤±è´¥),å¯¹è±¡çš„çŠ¶æ€ä¸å—å¤–ç•Œå½±å“ã€‚æ‰€ä»¥Promiseä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ã€‚é¦–å…ˆï¼Œæ— æ³•å–æ¶ˆPromiseï¼Œä¸€æ—¦æ–°å»ºå®ƒå°±ä¼šç«‹å³æ‰§è¡Œï¼Œæ— æ³•ä¸­é€”å–æ¶ˆã€‚å…¶æ¬¡ï¼Œå¦‚æœä¸è®¾ç½®å›è°ƒå‡½æ•°ï¼ŒPromiseå†…éƒ¨æŠ›å‡ºçš„é”™è¯¯ï¼Œä¸ä¼šååº”åˆ°å¤–éƒ¨ã€‚ åŸºæœ¬ç”¨æ³• const promise = new Promise(function(resolve, reject) { // ... some code if (/* å¼‚æ­¥æ“ä½œæˆåŠŸ */){ resolve(value); } else { reject(error); }});promise.then((data)=&gt;{ console.log(data)}).catch(err=&gt;{ console.log(err)})/*å¦‚æœæ²¡æœ‰ä½¿ç”¨catchæ–¹æ³•æŒ‡å®šé”™è¯¯å¤„ç†çš„å›è°ƒå‡½æ•°ï¼ŒPromiseå¯¹è±¡æŠ›å‡ºçš„å¼‚å¸¸æ˜¯ä¸ä¼šä¼ é€’åˆ°å¤–å±‚ä»£ç çš„ã€‚æ‰€ä»¥ä¸€èˆ¬è¦å®ç°catchæ–¹æ³•ï¼Œcatchæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œæ‰€ä»¥ä¾æ—§å¯ä»¥è°ƒç”¨thenæ–¹æ³•Promise å¯¹è±¡çš„é”™è¯¯å…·æœ‰â€œå†’æ³¡â€æ€§è´¨ï¼Œä¸€ç›´å‘åä¼ é€’ï¼Œç›´åˆ°è¢«æ•è·ä¸ºæ­¢ã€‚é”™è¯¯æ€»æ˜¯ä¼šè¢«ä¸‹ä¸€ä¸ªcatchè¯­å¥æ•è·ã€‚æ‰€ä»¥catchä¸€èˆ¬å†™åœ¨æœ€å*/ Promise.all() å°†å¤šä¸ªpromiseå®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°çš„promiseå¯¹è±¡ï¼Œæ–°çš„promiseå¯¹è±¡åªæœ‰ç­‰åˆ°å‚æ•°æˆå‘˜é‡Œé¢çš„æ‰€æœ‰æˆå‘˜çš„çŠ¶æ€æ˜¯fulfilledï¼Œå®ƒæ‰ä¼šæ˜¯fulfilledã€‚å¦‚æœæˆå‘˜ä¸­æœ‰å®šä¹‰äº†è‡ªå·±çš„catchæ–¹æ³•ï¼Œé‚£ä¹ˆæ–°çš„Promiseå®ä¾‹çš„catchæ–¹æ³•ä¸ä¼šè¢«è§¦å‘ var promise1=new Promise((resolve,reject)=&gt;{ setTimeout(() =&gt; { resolve(\"promise1\"); }, 2000);});var promise2=new Promise((resolve,reject)=&gt;{ setTimeout(() =&gt; { resolve(\"promise1\"); }, 0);});Promise.all([promise1,promise2]).then((data)=&gt;{ console.log(data);})// ç»“æœæ˜¯ä¸¤ç§’åè¾“å‡º[ 'promise1', 'promise1' ]var promise1=new Promise((resolve,reject)=&gt;{ setTimeout(() =&gt; { resolve(\"promise1\"); }, 2000);});var promise2=new Promise((resolve,reject)=&gt;{ setTimeout(() =&gt; { reject(); }, 0);});Promise.all([promise1,promise2]).then((data)=&gt;{ console.log(data);}).catch(()=&gt;{ console.log(\"promise_all\"); })// promise_allvar promise1=new Promise((resolve,reject)=&gt;{ setTimeout(() =&gt; { resolve(\"promise1\"); }, 2000);});var promise2=new Promise((resolve,reject)=&gt;{ setTimeout(() =&gt; { reject(); }, 1000);}).catch(()=&gt;{ console.log(\"promise_2\");})//è¿™é‡Œçš„promise2å®é™…æ˜¯catchåè¿”å›çš„æ–°çš„promiseå®ä¾‹Promise.all([promise1,promise2]).then((data)=&gt;{ console.log(data);}).catch(()=&gt;{ console.log(\"promise_all\");})/*è¾“å‡º promise_2 [ 'promise1', undefined ]ä¸ºä»€ä¹ˆå‘¢?å› ä¸ºp2ä¼šå…ˆreject,rejectåè¢«è‡ªèº«çš„catchæ•è·ï¼Œcatchä¼šè¿”å›æ–°çš„promiseï¼Œè¿™ä¸ªåœ¨catchæ‰§è¡Œå®Œæˆåä¼šå˜æˆresolved,æ‰€ä»¥æœ€åä¼šè°ƒç”¨promise.allçš„thenæ–¹æ³•*/ Promise.race è¯¥æ–¹æ³•ä¸Promise.all()æ–¹æ³•ç±»ä¼¼ï¼Œåªä¸è¿‡æ˜¯åªè¦æœ‰ä¸€ä¸ªçš„çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œæ–°çš„å®ä¾‹çš„å¯¹è±¡ä¹Ÿå°±ä¼šè·Ÿç€æ”¹å˜ã€‚ var promise1=new Promise((resolve,reject)=&gt;{ setTimeout(() =&gt; { resolve(\"promise1\"); }, 2000);});var promise2=new Promise((resolve,reject)=&gt;{ setTimeout(() =&gt; { resolve(\"promise2\"); }, 1000);})Promise.race([promise1,promise2]).then((data)=&gt;{ console.log(data);}).catch(()=&gt;{ console.log(\"promise_all\");})//promise2 Promise.resolve å‚æ•°æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œå°†ä¸åšä»»ä½•æ”¹å˜ å…¶ä»–å‚æ•°ï¼Œåˆ™ç›´æ¥è½¬æ¢ï¼ŒçŠ¶æ€ä¸ºresolvedã€‚å¸¸ç”¨æ¥ç”Ÿæˆä¸€ä¸ªçŠ¶æ€ä¸ºfulfilledçš„promiseå®ä¾‹ const p = Promise.resolve('Hello');p.then(function (s){ console.log(s)});// Hello Promise.reject è¿”å›çš„æ˜¯ä¸€ä¸ªpromiseå®ä¾‹ï¼ŒçŠ¶æ€æ˜¯rejected,å¸¸ç”¨æ¥ç”Ÿæˆä¸€ä¸ªçŠ¶æ€ä¸ºrejectedçš„promiseå®ä¾‹ const p = Promise.reject('error');//ç­‰åŒäºconst p = new Promise((resolve, reject) =&gt; reject('error'))p.catch((err)=&gt;{ console.log(err);})//error","link":"/2020/03/12/es6/es6-base-2/"},{"title":"ES6çŸ¥è¯†ç‚¹(ä¸‰)","text":"ğŸ‘‡å†…å®¹é€Ÿè§ˆğŸ‘‡ Generatorå‡½æ•° async/await Classè¯­æ³• Generatorå‡½æ•° åŸºæœ¬è¯­æ³• ä¸promiseå¯¹è±¡ä¸€æ ·ï¼ŒåŒæ ·æ˜¯ä¸ºäº†å¼‚æ­¥ç¼–ç¨‹ã€‚ES6æå‡ºäº†Generatorå‡½æ•°ï¼ŒGeneratorå‡½æ•°æ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œå†…éƒ¨å°è£…äº†å¤šä¸ªçŠ¶æ€ï¼Œè¿”å›ç»“æœæ˜¯ä¸€ä¸ªè¿­ä»£å™¨(Iterator)å¯¹è±¡ã€‚ä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«åœ¨äºfunctionå£°æ˜ä¸å‡½æ•°åä¹‹é—´å¤šäº†ä¸ªæ˜Ÿå·ã€‚ä¸”å‡½æ•°å†…éƒ¨èƒ½ä½¿ç”¨yieldå…³é”®å­—ï¼ˆæ™®é€šå‡½æ•°ä½¿ç”¨å°†æŠ¥é”™ï¼‰ã€‚ğŸ™‹â€ä¸ªä¾‹å­ function * exampleGenerator(){ yield 'hello'; yield 'world'; return \"end\"}var g= exampleGenerator();//é‡Œé¢æœ‰ä¸‰ä¸ªçŠ¶æ€,åˆ†åˆ«å¯¹åº”ä¸‰ä¸ªå…³é”®å­—åé¢çš„å­—ç¬¦ä¸² è°ƒç”¨å‡½æ•°åï¼Œå¹¶ä¸ä¼šæ‰§è¡Œï¼Œå› ä¸ºå…¶è¿”å›çš„ä¸æ˜¯ä¸€ä¸ªå€¼ï¼Œè€Œæ˜¯ä¸€ä¸ªIteratorå¯¹è±¡ï¼Œå¿…é¡»æ˜¯è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„nextæ–¹æ³•ï¼Œå°†å†…éƒ¨çš„æŒ‡é’ˆä»å‡½æ•°å¤´éƒ¨æˆ–è€…æ˜¯ä¸Šä¸€æ¬¡åœç•™çš„åœ°æ–¹å‘ä¸‹ç§»åŠ¨ï¼Œé‡åˆ°yield/returnå°±ä¼šåœæ­¢ä¸‹æ¥ï¼Œè¿”å›åé¢è·Ÿéšçš„å€¼ï¼Œç„¶åæŒ‚èµ·ï¼Œä¸‹æ¬¡nextå†é‡å¤ä¸Šé¢çš„æ­¥éª¤ã€‚ console.log(g.next());/*{value: \"hello\", done: false}valueè¡¨ç¤ºå½“å‰çš„å€¼ï¼Œdone åˆ™è¡¨ç¤ºéå†æ˜¯å¦ç»“æŸ*/console.log(g.next());//{value: \"world\", done: false}console.log(g.next());//{value: \"end\", done: true} å¸¦å‚æ•°çš„nextæ–¹æ³• å› ä¸ºyieldæ–¹æ³•å¹¶æ²¡æœ‰è¿”å›å€¼ï¼Œå½“æˆ‘ä»¬ä¸‹ä¸€ä¸ªyieldéœ€è¦ä¸Šå‚æ•°çš„æ—¶å€™ï¼Œè¿™æ—¶å€™å°±åªèƒ½é€šè¿‡nextæ–¹æ³•ä¼ å‚è¿›å»ã€‚nexté‡Œé¢çš„å‚æ•°è¡¨ç¤ºçš„æ˜¯ä¸Šä¸€ä¸ªyieldè¡¨è¾¾å¼çš„è¿”å›å€¼,å¦‚æœåœ¨å¦å¤–ä¸€ä¸ªè¡¨è¾¾å¼é‡Œé¢ï¼Œå¿…é¡»æ”¾åœ¨åœ†æ‹¬å·é‡Œé¢ã€‚è¿™ä¸ªä¹Ÿæ˜¯åé¢asyncå‡½æ•°å†…éƒ¨å®ç°çš„åŸç†æ­¥éª¤ä¹‹ä¸€ã€‚ function * exampleGenerator(x){ var y = yield (x+1) ; var z = yield (y*2); return x+y+z;}var g= exampleGenerator(2);console.log(g.next());//2+1=3 {value: 3, done: false}console.log(g.next(4));//4*2=8 {value: 8, done: false}console.log(g.next(5));//2+4+5=11 {value: 11, done: true}-----------------------------------//å†çœ‹ä¸€ä¸ªä¾‹å­ï¼Œä¼šæ›´åŠ æ˜ç™½function * exampleGenerator(x){ var y = 2 * (yield(x+1) ); var z = yield (y*2); return x+y+z;}var g= exampleGenerator(2);console.log(g.next());// 2+1=3console.log(g.next(4));// 2*4*2=16console.log(g.next(5));// 2+2*4+5=15 è‡ªåŠ¨éå†å†…éƒ¨çš„å€¼ï¼šä½¿ç”¨forâ€¦ofå¾ªç¯ å› ä¸ºforâ€¦ofå¾ªç¯èƒ½éå†å…·æœ‰Iteratoræ¥å£çš„ï¼Œè€Œgeneratorå‡½æ•°è¿”å›çš„åˆšå¥½æ˜¯ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ã€‚æ— éœ€è°ƒç”¨nextæ–¹æ³•ï¼Œé€‚åˆé‚£äº›ä¸ç”¨ä¼ å‚è®¡ç®—çš„æƒ…å†µã€‚æ³¨æ„ï¼šreturn è¿”å›çš„å€¼ä¸åŒ…æ‹¬åœ¨é‡Œé¢ function * exampleGenerator(){ yield 'hello'; yield 'world'; return \"end\"}var g= exampleGenerator();for(let item of g){ console.log(item);}// hello world yield* yield è¯­å¥åé¢å¦‚æœæƒ³æ‰§è¡Œä¸€ä¸ªgenerator,ä½¿ç”¨yield*è¡¨è¾¾å¼ã€‚ function * firstGenerator(){ yield 'cn'; yield 'emmmm';}function * secondGenerator(){ yield 'hello'; yield 'world'; yield *firstGenerator() ;}var g= secondGenerator();for(let item of g){ console.log(item);}// hello world cn emmmm throwæ–¹æ³• å®šä¹‰åœ¨åŸå‹å¯¹è±¡ä¸Šçš„throwæ–¹æ³•ï¼Œæ¯ä¸ªç”±generatorå‡½æ•°è¿”å›çš„è¿­ä»£å™¨å¯¹è±¡ï¼Œéƒ½ä¼šæ‹¥æœ‰ï¼Œå¯ä»¥åœ¨å‡½æ•°ä½“å¤–éƒ¨è°ƒç”¨ï¼Œç”¨æ¥æŠ›å‡ºé”™è¯¯ï¼Œä¼˜å…ˆè¢«å‡½æ•°å†…éƒ¨çš„tryâ€¦catchæ•è·ï¼Œå¦‚æœå†…éƒ¨æ²¡æœ‰tryâ€¦catchçš„è¯ï¼Œå°±è¢«å¤–éƒ¨çš„tryâ€¦catchæ•è·ã€‚å¦‚æœå†…å¤–éƒ½æ²¡æœ‰çš„è¯ï¼Œå°±ç›´æ¥æŠ¥é”™ï¼Œä¸­æ–­æ‰§è¡Œã€‚ æ³¨ï¼šg.throwä¸throwäº’ä¸å½±å“ï¼ è¢«å†…éƒ¨æ•è·çš„è¯ï¼Œä¼šé¡ºå¸¦æ‰§è¡Œä¸‹ä¸€ä¸ªyieldè¡¨è¾¾å¼ï¼Œä¸”ä¸ä¼šå½±å“ä¸‹é¢çš„æ‰§è¡Œ,å¦‚æœä¸æ˜¯è¢«å†…éƒ¨æ•è·çš„ï¼Œå°±ä¸ä¼šç»§ç»­æ‰§è¡Œä¸‹å»ï¼Œå³ä½¿åœ¨å¤–é¢æœ‰tryâ€¦catchå—ã€‚ #å†…éƒ¨æ•è·function * exampleGenerator(){ try{ yield 'hello'; }catch(e){ console.log(e); } yield 'world'; yield 'emmm';}var g= exampleGenerator();console.log(g.next());console.log(g.throw('é”™è¯¯'));console.log(g.next());/*{value: \"hello\", done: false} é”™è¯¯ {value: \"world\", done: false} {value: \"emmm\", done: false}*/#å¤–éƒ¨æ•è·function * exampleGenerator(){ yield 'hello'; yield 'world'; yield 'emmm';}var g= exampleGenerator(); console.log(g.next()); //hellotry{g.throw('é”™è¯¯')}catch(e){ console.log(e); //é”™è¯¯}console.log(g.next());//undefined async/awaitä¹‹å‰è®²è¿‡çš„å¼‚æ­¥ç¼–ç¨‹çš„æ–¹æ³•ï¼Œå›è°ƒå‡½æ•°ï¼ŒåµŒå¥—å¤šå±‚çš„æ—¶å€™â€œå›è°ƒåœ°ç‹±â€é—®é¢˜éš¾ä»¥å¤„ç†ã€‚æ‰€ä»¥æ‰æœ‰äº†Promiseå¯¹è±¡ã€‚ä½†æ˜¯å½“åµŒå¥—å¾ˆå¤šå±‚çš„æ—¶å€™ï¼Œä¸€å †çš„returnã€thenè¯­å¥å†™åˆ°è¿·èŒ«ï¼Œä»£ç å¯è¯»æ€§è·Ÿç®€æ´æ€§å°±ä¼šé™ä½ã€‚è€Œasync/awaitåˆ™æ˜¯ç”¨åŒæ­¥çš„æ€æƒ³æ¥å¤„ç†å¼‚æ­¥çš„æ“ä½œï¼Œä»£ç çš„å¯è¯»æ€§è·Ÿç®€æ´æ€§å°±ä¼šå¤§å¤§æé«˜ï¼Œå®ƒå…¶å®æ˜¯ç”±generatorè·Ÿpromiseç»“åˆè€Œæˆçš„ã€‚ ç”¨æ³• å¯ä»¥çœ‹æˆæ˜¯generatorå‡½æ•°çš„è¯­æ³•ç³–ï¼Œå°†(*)æ›¿æ¢æˆasyncï¼Œå°†yield æ›¿æ¢æˆawaitï¼Œä¸”æ˜¯è‡ªæ‰§è¡Œçš„ï¼Œawaitåé¢è·Ÿçš„æ˜¯ä¸€ä¸ªpromiseå¯¹è±¡æˆ–è€…å…¶ä»–ç±»å‹çš„å€¼éƒ½è¡Œï¼Œawaitæœ‰è¿”å›å€¼ï¼Œè¿”å›å€¼å°±æ˜¯åé¢è·Ÿç€çš„é‚£ä¸ªã€‚æ•´ä¸ªå‡½æ•°è¿”å›å€¼ä¹Ÿæ˜¯ä¸€ä¸ªpromiseå¯¹è±¡ã€‚ console.log('start');var p1=new Promise((resolve,reject)=&gt;{ setTimeout(()=&gt;{ resolve(1); },1000)})var p2=(x)=&gt;{ return new Promise((resolve,reject)=&gt;{ setTimeout(()=&gt;{ resolve(x); },1000) })}var a=async function(){ var a1= await p1; var a2= await p2(a1) return a1+a2}()a.then((data)=&gt;{ console.log(data);})console.log('end');// start end 2 ç”±æ­¤å¯ä»¥çœ‹å‡ºå¼‚æ­¥å‡½æ•°è™½ç„¶ä»¥åŒæ­¥çš„å½¢å¼å†™çš„ï¼Œä½†æ˜¯å¹¶ä¸ä¼šé˜»å¡ä½ï¼Œå®è´¨æ˜¯é‡åˆ°awaitçš„æ—¶å€™ï¼Œä¼šå…ˆè®©å‡ºæ‰§è¡Œæ ˆï¼Œç­‰åˆ°å¼‚æ­¥æ“ä½œå®Œæˆ(è¿™é‡Œå°±æ˜¯promiseå¯¹è±¡resolveçš„æ—¶å€™)ï¼Œå†æ‰§è¡Œä¸‹é¢çš„æ“ä½œï¼Œä¸”å¯ä»¥å°†å…¶è¿”å›å€¼ä½œä¸ºä¸‹ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„å‚æ•°ï¼ˆè¿™ä¸ªåœ¨å¾ˆå¤šæƒ…å†µä¸‹å¾ˆæœ‰ç”¨ï¼‰ã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœawaitåé¢çš„promiseå¯¹è±¡å˜æˆäº†rejectçŠ¶æ€çš„è¯ï¼Œæ•´ä¸ªå‡½æ•°å°†ä¼šä¸­æ–­æ‰§è¡Œã€‚å¦‚æœæƒ³ä¸å½±å“ä¸‹é¢æ‰§è¡Œçš„è¯ï¼Œå°±å¾—åœ¨å†…éƒ¨è¿›è¡Œå¼‚å¸¸æ•è·ã€‚ var a=async function(){ try { await Promise.reject('hhh'); } catch (error) { console.log(error); } var a1= await 'hehehe' return a1}()a.then((data)=&gt;{ console.log(data);})//hhh hehehe å®ç°åŸç† å‰é¢è¯´åˆ°ï¼Œasync å¯ä»¥ç”±generatorå‡½æ•°+promiseå¯¹è±¡æ¥å®ç°ï¼ŒğŸ‘‡ä¸‹é¢æ˜¯å®ç°æ€è·¯ function getCountry(url){ return new Promise((resolve,reject)=&gt;{ resolve(\"ä¸­å›½\"); })}function getCity(country){ return new Promise((resolve,reject)=&gt;{ resolve(\"æ½®å·\"); })}function getProvince(country){ return new Promise((resolve,reject)=&gt;{ resolve(\"å¹¿ä¸œçœ\"); })}// å®šä¹‰ä¸€ä¸ªgeneratorå‡½æ•°function * gen(){ //getCountryæ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œ const country = yield getCountry(\"url\"); const province = yield getProvince (country); const city = yield getCity(province); return city}//è‡ªå®šä¹‰asyncå‡½æ•°function async (generator){ //è¿”å›ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ var interator = generator(); return new Promise((resolve,reject)=&gt;{ function handle (interatorResult){ console.log(interatorResult); /* è·å–å½“å‰å€¼ { value: Promise { 'ä¸­å›½' }, done: false } { value: Promise { 'å¹¿ä¸œçœ' }, done: false } { value: Promise { 'æ½®å·' }, done: false } { value: 'æ½®å·', done: true } */ const value=interatorResult.value; //åˆ°æœ€åä¸€ä¸ªçš„æ—¶å€™å°±ç›´æ¥resolveå‡ºå» if(interatorResult.done){resolve(value)} if(value instanceof Promise){ value.then((res)=&gt;{ //é€’å½’è°ƒç”¨ï¼Œresä½œä¸ºä¸Šä¸€ä¸ªyieldçš„è¿”å›å€¼ä¼ é€’ä¸‹å» handle(interator.next(res)) }).catch(e=&gt;{interator.throw(e)}) } } //å¯åŠ¨è°ƒç”¨ handle(interator.next()); })} async(gen).then(val=&gt;{ console.log(val);//æ½®å· }) Classè¯­æ³•åœ¨ES6ä¹‹å‰ï¼Œæ˜¯æ²¡æœ‰classç±»ä¸extendsç»§æ‰¿çš„æ¦‚å¿µçš„ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯é€šè¿‡æ„é€ å™¨å‡½æ•°åˆ›å»ºçš„ï¼Œç»§æ‰¿ä¹Ÿæ˜¯é€šè¿‡åŸå‹é“¾æ¥å®ç°ï¼Œä¸ºäº†ç®€ä¾¿è¯­æ³•ï¼Œæ›´åŠ é¢å‘å¯¹è±¡ï¼ŒES6å¼•å…¥äº†è¿™ä¸¤ä¸ªâ€œè¯­æ³•ç³–â€ã€‚ Class åœ¨ç±»é‡Œé¢ï¼Œå®ä¾‹çš„å±æ€§å¾—æ˜¾ç¤ºçš„å®šä¹‰åœ¨thisä¸Šã€‚å¦åˆ™å°†è¢«è®¤ä¸ºè¦å®šä¹‰åœ¨åŸå‹ä¸Šï¼Œä¸ES5ä¸€æ ·ï¼Œå®ä¾‹çš„åŸå‹ä¼šæŒ‡å‘ç±»çš„åŸå‹å¯¹è±¡ä¸Šã€‚ class Man { constructor(name){ this.name=name } getName(){ console.log(this.name); }}var man=new Man('cn');console.log(man.hasOwnProperty('name'));/* true æ„é€ å™¨é‡Œé¢å®šä¹‰çš„å±æ€§æ˜¯åœ¨å®ä¾‹ä¸Šçš„*/console.log(man.getName===Man.prototype.getName);console.log(man.hasOwnProperty('getName'));console.log(man.__proto__.hasOwnProperty('getName'));/* true false true ç±»é‡Œé¢å£°æ˜çš„æ–¹æ³•éƒ½æ˜¯å®šä¹‰åœ¨ç±»çš„åŸå‹å¯¹è±¡ä¸Šçš„ã€‚ å®ä¾‹çš„__proto__æŒ‡å‘çš„æ˜¯Class.prototype*/ getter/setter classé‡Œé¢ä¹Ÿå¯ä»¥å¯¹å¯¹è±¡å±æ€§çš„è¯»å–è·Ÿè®¾ç½®è¿›è¡Œæ‹¦æˆªä¿®æ”¹ï¼Œé€”å¾„å°±æ˜¯get / set æ–¹æ³• class Man { constructor(){ } get name(){ return 'cn1997' } set name(value){ console.log('setter '+value); }}var man=new Man();man.name='cn'; // setter cnconsole.log(man.name); // cn1997 å…¶ä»– class å†…éƒ¨æ–¹æ³•çš„thisé»˜è®¤æ˜¯æŒ‡å‘ç±»çš„å®ä¾‹çš„ï¼Œç±»ä¸å¿…å‡½æ•°ï¼Œä¸å­˜åœ¨å˜é‡æå‡ï¼Œå³ä¸èƒ½åœ¨ç±»å£°æ˜ä¹‹å‰åˆ›å»ºä¸€ä¸ªå®ä¾‹å¯¹è±¡ã€‚class.nameå±æ€§å°†ä¼šè¿”å›ç±»åâ€¦â€¦ ç»§æ‰¿ ES5ï¼šå¯¹æ¯”ES5çš„ç»§æ‰¿ä¸€èˆ¬éƒ½æ˜¯å¯„ç”Ÿç»„åˆå¼ï¼Œå³å®ä¾‹å±æ€§ä½¿ç”¨æ„é€ å™¨ç»§æ‰¿ï¼Œè€Œæ–¹æ³•ä½¿ç”¨åŸå‹ç»§æ‰¿æ–¹æ³•ã€‚ function A(){ this.name='a'}A.prototype.getName=function(){ return this.name;}function B(){ A.apply(this); //ç»§æ‰¿å±æ€§ this.age='12'}B.prototype=new A();console.log(B.portotype._proto_===A.prototype) //trueconsole.log(B._proto_===A)//false ES6çš„ç»§æ‰¿ï¼Œæ ¹æ®é˜®ä¸€å³°å¤§ä½¬çš„è¯æ¥è¯´ï¼ŒES6çš„ç»§æ‰¿åˆ†ä¸¤æ¡é“¾ï¼Œä¸€æ¡æ˜¯åŸå‹é“¾ï¼Œä¸€æ¡æ˜¯åŸå‹å¯¹è±¡çš„é“¾ã€‚ å­ç±»çš„protoå±æ€§ï¼Œè¡¨ç¤ºæ„é€ å™¨çš„ç»§æ‰¿ï¼ŒæŒ‡å‘çˆ¶ç±»ã€‚è·ŸES5çš„ä¸åŒä¹‹å¤„ã€‚ å­ç±»çš„prototypeå±æ€§çš„protoï¼Œè¡¨ç¤ºæ–¹æ³•çš„ç»§æ‰¿ï¼ŒæŒ‡å‘çˆ¶ç±»çš„prototypeï¼Œè¿™ä¸€ç‚¹ä¸ES5çš„ä¸€è‡´ã€‚ å®ä¾‹çš„æŒ‡å‘å°±å¾ˆæ˜ç¡®äº†ï¼Œæ ¹æ®æ‰€æ„é€ çš„ç±»çš„å…³ç³»å»æ‰¾ã€‚ class A{ constructor(){ this.name='cn'; } getName(){ return this.name; }}class B extends A{ constructor(){ super() }}var a=new A();var b=new B();console.log(a.__proto__===b.__proto__)//falseconsole.log(a.__proto__===b.__proto__.__proto__);//trueconsole.log(B.prototype.__proto__===A.prototype) //trueconsole.log(B.__proto__===A)//true åŒºåˆ«æ¥äº†ï¼ŒES6çš„ç»§æ‰¿ï¼Œå­ç±»å¿…é¡»åœ¨æ„é€ å™¨å‡½æ•°é‡Œé¢è°ƒç”¨superæ–¹æ³•ï¼Œå› ä¸ºå­ç±»çš„thiså¯¹è±¡ï¼Œå¿…é¡»å…ˆé€šè¿‡çˆ¶ç±»çš„æ„é€ å‡½æ•°å¡‘é€ ï¼Œå¾—åˆ°çˆ¶ç±»çš„å®ä¾‹å±æ€§è·Ÿå®ä¾‹æ–¹æ³•ï¼Œè€Œååœ¨å°†å…¶åŠ å·¥ï¼ŒåŠ ä¸Šå­ç±»çš„å®ä¾‹å±æ€§è·Ÿæ–¹æ³•ï¼Œæ€»è€Œè¨€ä¹‹ï¼Œä¸è°ƒç”¨superæ–¹æ³•ï¼Œå­ç±»å¾—ä¸åˆ°thiså¯¹è±¡ã€‚è€ŒES5çš„ç»§æ‰¿ï¼Œæ˜¯å…ˆé€šè¿‡åˆ›å»ºäº†ä¸€ä¸ªå­ç±»çš„å®ä¾‹å¯¹è±¡thisï¼Œå†å°†çˆ¶ç±»çš„æ–¹æ³•è·Ÿå±æ€§æ·»åŠ åˆ°thisä¸Š( A.apply(this) )ã€‚å¯ä»¥è¿™æ ·ç†è§£â˜ï¼Œä¹‹å‰æˆ‘ä»¬çŸ¥é“new ä¸€ä¸ªå®ä¾‹çš„è¿‡ç¨‹ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œè€ŒES6å¯èƒ½æ˜¯åˆ›å»ºçš„æ˜¯ä¸€ä¸ªçˆ¶ç±»çš„å¯¹è±¡ï¼Œæ‰€ä»¥superå¯èƒ½å°±æ˜¯åˆ›å»ºçš„ä¸€ä¸ªçˆ¶ç±»çš„å¯¹è±¡ï¼Œå†è¿›è¡Œåç»­çš„æ“ä½œâ€¦.","link":"/2020/03/12/es6/es6-base-3/"},{"title":"javaScriptåŸºç¡€çŸ¥è¯†(ä¸‹)","text":"ğŸ‘‡å†…å®¹é€Ÿè§ˆğŸ‘‡ JSçš„è¿è¡Œæœºåˆ¶ï¼ˆæµè§ˆå™¨ï¼‰ ES5çš„ç»§æ‰¿çš„å®ç° æµè§ˆå™¨å¯¹è±¡ä¸æ–‡æ¡£å¯¹è±¡ JSçš„è¿è¡Œæœºåˆ¶ï¼ˆæµè§ˆå™¨ï¼‰ JavaScriptæ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œä¹Ÿåªèƒ½æ˜¯å•çº¿ç¨‹ï¼Œå› ä¸ºJSçš„ç”¨é€”å°±æ˜¯ä¸ç”¨æˆ·äº¤äº’ï¼Œå‡è®¾åŒæ—¶æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨æŸä¸ªDOMèŠ‚ç‚¹ä¸Šæ·»åŠ å†…å®¹ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹åœ¨åˆ é™¤è¿™ä¸ªèŠ‚ç‚¹ï¼Œæ­¤æ—¶æµè§ˆå™¨å°±ä¸çŸ¥é“ä»¥å“ªä¸ªçº¿ç¨‹ä¸ºå‡†ã€‚å› æ­¤å®ƒåªæœ‰ä¸€ä¸ªè°ƒç”¨å †æ ˆï¼ˆcall stackï¼‰ï¼Œä¸€æ¬¡åªèƒ½åšä¸€ä»¶äº‹æƒ…ã€‚ä¾‹å¦‚è¿›å…¥ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™æŠŠå‡½æ•°æ”¾åœ¨å †æ ˆçš„é¡¶éƒ¨ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°è¿”å›ï¼Œåˆ™å¼¹å‡ºã€‚å› ä¸ºæ˜¯å•çº¿ç¨‹ï¼Œæ‰€ä»¥åªèƒ½é¡ºåºæ‰§è¡Œï¼Œä½†å¦‚æœæ‰§è¡Œçš„ä»»åŠ¡è€—æ—¶é—´è¿‡é•¿ï¼Œåˆ™ä¼šäº§ç”Ÿå¾ˆå¤šä¸å¥½çš„å½±å“ï¼Œè§£å†³è¿™ä¸ªçš„æ–¹æ³•å°±æ˜¯å®ƒæœ¬èº«çš„äº‹ä»¶å¾ªç¯æœºåˆ¶è·Ÿå…¶å›è°ƒé˜Ÿåˆ—ã€‚JavaScript äº‹ä»¶å¾ªç¯æœºåˆ¶åˆ†ä¸ºæµè§ˆå™¨å’Œ Node äº‹ä»¶å¾ªç¯æœºåˆ¶ã€‚ä»Šå¤©å…ˆè®²æµè§ˆå™¨çš„ã€‚ â€‹ è®²äº‹ä»¶å¾ªç¯ä¹‹å‰å…ˆè®²ä¸€ä¸‹æµè§ˆå™¨çš„å†…æ ¸ï¼šæµè§ˆå™¨å†…æ ¸æ˜¯å¤šçº¿ç¨‹ï¼Œåœ¨å†…æ ¸æ§åˆ¶ä¸‹å„ä¸ªçº¿ç¨‹ç›¸äº’é…åˆä¿æŒåŒæ­¥ï¼Œæœ‰ä»¥ä¸‹çš„å¸¸é©»çº¿ç¨‹ï¼š GUIæ¸²æŸ“çº¿ç¨‹ï¼šè´Ÿè´£é¡µé¢çš„æ¸²æŸ“ï¼Œè§£æHTMLã€ CSS,æ„å»ºDOMæ ‘ï¼Œå¸ƒå±€è·Ÿç»˜åˆ¶ã€‚å½“ç•Œé¢éœ€è¦å›æµé‡ç»˜çš„æ—¶å€™å°±ä¼šæ‰§è¡Œè¯¥çº¿ç¨‹ï¼ŒåŒæ—¶è¿™ä¸ªçº¿ç¨‹æ˜¯è·ŸJSå¼•æ“çº¿ç¨‹äº’æ–¥çš„ã€‚ JSå¼•æ“çº¿ç¨‹ï¼šé¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªçº¿ç¨‹æ˜¯æ¥è§£æJSä»£ç çš„ï¼ŒåŒæ—¶ä¹Ÿæ˜¯è´Ÿè´£æ‰§è¡Œéœ€è¦æ‰§è¡Œçš„äº‹ä»¶ï¼Œä¾‹å¦‚å®šæ—¶å™¨ç»“æŸã€å¼‚æ­¥æˆåŠŸçš„å›è°ƒå‡½æ•°ï¼Œå°†ä¾æ­¤è¿›å…¥äº‹ä»¶é˜Ÿåˆ—ï¼Œç­‰å¾…è¿™ä¸ªçº¿ç¨‹çš„æ‰§è¡Œã€‚ å®šæ—¶å™¨è§¦å‘çº¿ç¨‹ï¼šè´Ÿè´£æ‰§è¡Œå®šæ—¶å™¨ä¸€ç±»çš„å‡½æ•°çš„çº¿ç¨‹ã€‚è®¡æ•°å®Œæ¯•åï¼Œäº‹ä»¶è§¦å‘çº¿ç¨‹å°±ä¼šå°†è®¡æ•°å®Œæ¯•çš„äº‹ä»¶åŠ å…¥äº‹ä»¶é˜Ÿåˆ—ï¼ˆè¿™ä¸ªäº‹ä»¶å°±æ˜¯è§¦å‘å›è°ƒå‡½æ•°çš„äº‹ä»¶ï¼‰ï¼Œç­‰å¾…JSå¼•æ“çº¿ç¨‹æ‰§è¡Œã€‚ äº‹ä»¶è§¦å‘çº¿ç¨‹ï¼šè´Ÿè´£å°†å‡†å¤‡å¥½çš„äº‹ä»¶äº¤ç»™JSçº¿ç¨‹æ‰§è¡Œï¼Œä¾‹å¦‚ï¼šå®šæ—¶å™¨å‡½æ•°è®¡æ•°å®Œæ¯•ï¼Œå¼‚æ­¥è¯·æ±‚æˆåŠŸè§¦å‘å›è°ƒå‡½æ•°ï¼Œç”¨æˆ·è§¦å‘ç‚¹å‡»äº‹ä»¶â€¦.. å¼‚æ­¥HTTPè¯·æ±‚çº¿ç¨‹:è´Ÿè´£å¼‚æ­¥è¯·æ±‚çš„çº¿ç¨‹ï¼Œå½“å¼‚æ­¥æ‰§è¡Œå®Œæ¯•åè§¦å‘å›è°ƒå‡½æ•°ï¼Œäº‹ä»¶è§¦å‘å°†ç›¸åº”çš„äº‹ä»¶åŠ å…¥ä»»åŠ¡é˜Ÿåˆ—ã€‚ äº‹ä»¶å¾ªç¯ï¼šå°†æ‰§è¡Œçš„ä»»åŠ¡åˆ†æˆå¼‚æ­¥è·ŸåŒæ­¥ä»»åŠ¡ã€‚ä¸€åŒæ­¥ä»»åŠ¡è·Ÿå¼‚æ­¥ä»»åŠ¡è¿›å…¥ä¸åŒçš„æ‰§è¡Œåœºæ‰€ã€‚åŒæ­¥è¿›å…¥ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œå¼‚æ­¥çš„ä»»åŠ¡è¿›å…¥Event table å¹¶æ³¨å†Œå…¶å›è°ƒå‡½æ•°ã€‚å½“ä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼ŒEvent tableå°†è¿™ä¸ªå‡½æ•°ç§»å…¥Event queueï¼ˆå›è°ƒé˜Ÿåˆ—ï¼‰â€”â€”ï¼ˆå³åœ¨è¿™ä¸ªé˜Ÿåˆ—ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶ï¼‰,ç­‰åˆ°ä¸»çº¿ç¨‹å†…çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¸ºç©ºï¼Œåˆ™å»Event queueè¯»å–ç›¸åº”äº‹ä»¶ï¼Œå°†å¯¹åº”çš„å‡½æ•°æ”¾å…¥ä¸»çº¿ç¨‹æ‰§è¡Œã€‚ ä¸æ–­é‡å¤ï¼Œå°±æ˜¯äº‹ä»¶å¾ªç¯ã€‚ â€œä»»åŠ¡é˜Ÿåˆ—/å›è°ƒé˜Ÿåˆ—â€æ˜¯ä¸€ä¸ªäº‹ä»¶çš„é˜Ÿåˆ—ï¼ˆä¹Ÿå¯ä»¥ç†è§£æˆæ¶ˆæ¯çš„é˜Ÿåˆ—ï¼‰ï¼ŒIOè®¾å¤‡å®Œæˆä¸€é¡¹ä»»åŠ¡ï¼Œå°±åœ¨â€ä»»åŠ¡é˜Ÿåˆ—â€ä¸­æ·»åŠ ä¸€ä¸ªäº‹ä»¶ï¼Œè¡¨ç¤ºç›¸å…³çš„å¼‚æ­¥ä»»åŠ¡å¯ä»¥è¿›å…¥â€æ‰§è¡Œæ ˆâ€äº†ã€‚ä¸»çº¿ç¨‹è¯»å–â€ä»»åŠ¡é˜Ÿåˆ—â€ï¼Œå°±æ˜¯è¯»å–é‡Œé¢æœ‰å“ªäº›äº‹ä»¶ã€‚å°±æ˜¯ä¸Šé¢äº‹ä»¶è§¦å‘çº¿ç¨‹è·ŸJSçº¿ç¨‹ä¹‹é—´çš„äº¤æµäº†ã€‚ â€œä»»åŠ¡é˜Ÿåˆ—/å›è°ƒé˜Ÿåˆ—â€ä¸­çš„äº‹ä»¶ï¼Œé™¤äº†IOè®¾å¤‡çš„äº‹ä»¶ä»¥å¤–ï¼Œè¿˜åŒ…æ‹¬ä¸€äº›ç”¨æˆ·äº§ç”Ÿçš„äº‹ä»¶ï¼ˆæ¯”å¦‚é¼ æ ‡ç‚¹å‡»ã€é¡µé¢æ»šåŠ¨ç­‰ç­‰ï¼‰ã€‚åªè¦æŒ‡å®šè¿‡å›è°ƒå‡½æ•°ï¼Œè¿™äº›äº‹ä»¶å‘ç”Ÿæ—¶å°±ä¼šè¿›å…¥â€ä»»åŠ¡é˜Ÿåˆ—â€ï¼Œç­‰å¾…ä¸»çº¿ç¨‹è¯»å–ã€‚ å¼‚æ­¥ä»»åŠ¡çš„åŒºåˆ«ï¼šä½†æ˜¯å¼‚æ­¥ä»»åŠ¡æ¥è¯´ï¼Œåº”è¯¥ä¹Ÿæœ‰æ‰§è¡Œçš„å…ˆåå§ï¼Œæœ‰äººä¼šè¿™æ ·é—®ã€‚ç¡®å®ï¼Œå½“åŒæ—¶æœ‰å¼‚æ­¥ä»»åŠ¡ä¸€èµ·æ‰§è¡Œçš„æ—¶å€™ï¼Œåˆ°åº•æ˜¯è°å…ˆè°åã€‚è¿™ä¸ªæ—¶å€™å°±å¾—è¯´ä¸€ä¸‹å®ä»»åŠ¡è·Ÿå¾®ä»»åŠ¡äº†ã€‚æ³¨ï¼šå®ä»»åŠ¡é˜Ÿåˆ—èƒ½æœ‰å¤šä¸ªï¼Œå¾®ä»»åŠ¡é˜Ÿåˆ—å°±åªæœ‰ä¸€ä¸ª å®ä»»åŠ¡ï¼šåŒ…æ‹¬æ•´ä½“çš„åŒæ­¥ä»£ç ï¼ŒsetTimeout, setIntervalï¼ŒIO ï¼Œå„ç§äº‹ä»¶ç­‰ã€‚ å¾®ä»»åŠ¡ï¼šPromise process.nexTick(ç›®å‰å°±ä¸¤ä¸ª)ã€‚ æ­¤æ—¶äº‹ä»¶çš„å¾ªç¯é¡ºåºæ˜¯ï¼Œè¿›å…¥æ•´ä½“ä»£ç ï¼ˆç¬¬ä¸€ä¸ªå®ä»»åŠ¡ï¼‰å¼€å§‹ç¬¬ä¸€æ¬¡å¾ªç¯ã€‚é‡åˆ°å®ä»»åŠ¡ï¼Œå°†å…¶å›è°ƒå‡½æ•°åˆ†å‘åˆ°å®ä»»åŠ¡Event queueã€‚é‡åˆ°å¾®ä»»åŠ¡ï¼Œå°†å…¶å›è°ƒå‡½æ•°åˆ†å‘åˆ°å¾®ä»»åŠ¡Event queueã€‚è€Œåæ‰§è¡Œè¿™ç¬¬ä¸€ä¸ªå®ä»»åŠ¡é‡Œé¢çš„æ‰€æœ‰å¾®ä»»åŠ¡ï¼ˆå³æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡çš„å›è°ƒé˜Ÿåˆ—ï¼‰ã€‚è€Œåå†æ‰¾ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ï¼Œåå¤å¾ªç¯ã€‚ğŸ™‹â€ä¸¾ä¸ªç®€å•çš„æ —å­ï¼š setTimeout(function() { console.log('setTimeout');})new Promise(function(resolve) { console.log('promise'); resolve();}).then(function() { console.log('then');})console.log('console');//è¾“å‡ºç»“æœ promise console then setTimeout/*è¿™æ®µä»£ç ä½œä¸ºå®ä»»åŠ¡ï¼Œè¿›å…¥ä¸»çº¿ç¨‹ã€‚å…ˆé‡åˆ°setTimeoutï¼Œé‚£ä¹ˆå°†å…¶å›è°ƒå‡½æ•°æ³¨å†Œååˆ†å‘åˆ°å®ä»»åŠ¡Event Queueæ¥ä¸‹æ¥é‡åˆ°äº†Promiseï¼Œnew Promiseç«‹å³æ‰§è¡Œï¼Œthenå‡½æ•°åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueã€‚é‡åˆ°console.log(console)ï¼Œç«‹å³æ‰§è¡Œã€‚æ•´ä½“ä»£ç scriptä½œä¸ºç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œç»“æŸï¼Œçœ‹çœ‹æœ‰å“ªäº›å¾®ä»»åŠ¡ï¼Ÿå‘ç°äº†thenåœ¨å¾®ä»»åŠ¡Event Queueé‡Œé¢ï¼Œæ‰§è¡Œã€‚okï¼Œç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯ç»“æŸäº†ï¼Œæˆ‘ä»¬å¼€å§‹ç¬¬äºŒè½®å¾ªç¯ï¼Œå½“ç„¶è¦ä»å®ä»»åŠ¡Event Queueå¼€å§‹ã€‚æˆ‘ä»¬å‘ç°äº†å®ä»»åŠ¡Event Queueä¸­setTimeoutå¯¹åº”çš„å›è°ƒå‡½æ•°ï¼Œç«‹å³æ‰§è¡Œã€‚ç»“æŸã€‚*/ ES5ç»§æ‰¿çš„å®ç°JavaScriptçš„ç»§æ‰¿ä¸å…¶ä»–è¯­è¨€ä¸åŒï¼Œå®ƒæ˜¯é€šè¿‡åŸå‹é“¾æ¥å®ç°çš„ã€‚ä¹‹å‰å·²ç»è®²è¿‡ï¼Œä¸€ä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹(proto)ä¼šæŒ‡å‘åˆ›å»ºè¿™ä¸ªå®ä¾‹çš„æ„é€ å™¨å‡½æ•°çš„åŸå‹å¯¹è±¡(prototype)ã€‚å½“æˆ‘ä»¬è®¿é—®å±æ€§çš„æ—¶å€™ï¼Œä¼šå…ˆæ‰¾å®ä¾‹å¯¹è±¡æœ¬èº«çš„å±æ€§ï¼Œå¦‚æœæ‰¾ä¸åˆ°ä¼šå¾€åŸå‹é“¾ä¸Šæ‰¾ã€‚å°±æ˜¯é€šè¿‡è¿™ç§æ€æƒ³æ¥å®ç°ç»§æ‰¿çš„ã€‚ ç±»å¼ç»§æ‰¿ï¼šæœ€ç®€å•çš„ç»§æ‰¿ï¼Œå°†çˆ¶ç±»çš„å®ä¾‹èµ‹å€¼ç»™å­ç±»çš„åŸå‹ã€‚ç¼ºç‚¹æ˜¯å¦‚æœçˆ¶ç±»çš„å±æ€§æ˜¯å¼•ç”¨ç±»å‹çš„è¯ï¼Œå°±ä¼šå‡ºç°ä¸€äº›æ„æƒ³ä¸åˆ°çš„æƒ…å†µã€‚(æ”¹ä¸€ä¸ªè€ŒåŠ¨å…¨éƒ¨)ã€‚ function Shape(){ this.books=[\"JS\",\"CSS\"];}function TwDshape(){}TwDshape.prototype=new Shape(); TwDshape.prototype.constructor=TwDshape;var my=new TwDshape();var your=new TwDshape();console.log(my.books);// [\"JS\", \"CSS\"]your.books.push(\"HTML\");console.log(my.books);// [\"JS\", \"CSS\", \"HTML\"] æ„é€ å‡½æ•°ç»§æ‰¿ï¼šåˆ©ç”¨å®ä¾‹å¯¹è±¡ä¹‹é—´äº’ä¸å½±å“çš„ç‰¹æ€§ï¼Œå°†çˆ¶ç±»çš„æ„é€ å™¨å‡½æ•°åœ¨å­ç±»æ„é€ å™¨å‡½æ•°é‡Œé¢æ‰§è¡Œä¸€éï¼Œå®ç°ç»§æ‰¿ã€‚ç¼ºç‚¹æ˜¯çˆ¶ç±»çš„åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§ä¸èƒ½è·å–åˆ°ã€‚å› ä¸ºæ²¡æœ‰å»ºç«‹åŸå‹é“¾ã€‚ function Shape(){ this.books=[\"JS\",\"CSS\"];}function TwDshape(){ Shape.call(this);//åˆ©ç”¨call/applyæ”¹å˜thisæŒ‡å‘}var my=new TwDshape();var your=new TwDshape();console.log(my.books);// [\"JS\", \"CSS\"]your.books.push(\"HTML\");console.log(my.books);// [\"JS\", \"CSS\"] å¯„ç”Ÿç»„åˆå‹ç»§æ‰¿ï¼šæ„é€ å‡½æ•°ç»§æ‰¿ä¸åŸå‹çš„ç»§æ‰¿çš„ç»“åˆï¼ˆåŸå‹å¯¹è±¡ç»§æ‰¿æ˜¯åœ¨ç±»å¼ç»§æ‰¿çš„åŸºç¡€ä¸Šæ”¹è¿›ï¼‰ã€‚ç»“åˆä¸¤ç§ç»§æ‰¿æ–¹å¼çš„ä¼˜ç‚¹ã€‚ //åŸå‹å¯¹è±¡ç»§æ‰¿function inheritObject(parent){ var F=function(){}; //åŠ äº†ä¸€ä¸ªç©ºä¸­ä»‹å‡½æ•°,è¿™æ ·å­çš„å¥½å¤„æ˜¯ç›´æ¥ç»§æ‰¿äº†çˆ¶çº§çš„åŸå‹å¯¹è±¡çš„å±æ€§ F.prototype=parent.prototype; return new F(); //è¿”å›çš„æ˜¯ç©ºä¸­ä»‹å‡½æ•°çš„å®ä¾‹ï¼Œä¸æ˜¯ä¹‹å‰çš„çˆ¶ç±»çš„å®ä¾‹ï¼ŒèŠ‚çœäº†æ„é€ çˆ¶ç±»å®ä¾‹çš„æ­¥éª¤}//å¯„ç”Ÿç»„åˆå‹function Shape(){ this.books=[\"JS\",\"CSS\"];}Shape.prototype.toString=function(){ return this.books; }function TwDshape(){ Shape.call(this);//åˆ©ç”¨call/applyæ”¹å˜thisæŒ‡å‘}var p=inheritObject(Shape); //è¿”å›çš„æ˜¯Få®ä¾‹TwDshape.prototype=p;TwDshape.prototype.constructor=TwDshape; //ä¿®æ­£å› ä¸ºé‡å†™å­ç±»åŸå‹å¯¹è±¡è€Œå¯¼è‡´çš„constructorè¢«ä¿®æ”¹var my=new TwDshape();var your=new TwDshape();console.log(my.toString());// [\"JS\", \"CSS\"]your.books.push(\"HTML\");console.log(your.toString());//[\"JS\", \"CSS\", \"HTML\"]console.log(my.toString());// [\"JS\", \"CSS\"] æµè§ˆå™¨å¯¹è±¡ä¸æ–‡æ¡£å¯¹è±¡ æµè§ˆå™¨å¯¹è±¡BOMï¼šé¡µé¢ä»¥å¤–äº‹ç‰©æ‹¥æœ‰çš„å¯¹è±¡ã€‚åŒ…æ‹¬windowï¼ŒNavigator,Screen,History, Locationã€‚æœ€ä¸»è¦çš„æ˜¯window,å®ƒåŒ…å«äº†å¯¹å…¶ä»–å‡ ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œä¹Ÿæœ‰å¯¹documentå¯¹è±¡çš„å¼•ç”¨ã€‚ windowï¼šæµè§ˆå™¨çª—å£ã€‚æ‰€æœ‰å…¨å±€ JavaScript å¯¹è±¡ï¼Œå‡½æ•°å’Œå˜é‡è‡ªåŠ¨æˆä¸º window å¯¹è±¡çš„æˆå‘˜ã€‚ Navigatorï¼šåŒ…å«äº†æœ‰å…³è®¿é—®è€…çš„ä¿¡æ¯ã€‚å¦‚æµè§ˆå™¨åº”ç”¨ç¨‹åºçš„åç§°ï¼ˆappNameï¼‰ã€æ˜¯å¦å·²å¯ç”¨cookieã€æµè§ˆå™¨æ˜¯å¦åœ¨çº¿ã€‚ Screenï¼šåŒ…å«æœ‰å…³å®¢æˆ·ç«¯æ˜¾ç¤ºå±çš„ä¿¡æ¯ã€‚ History:åŒ…å«ç”¨æˆ·è®¿é—®è¿‡çš„URLã€‚ Location:åŒ…å«å½“å‰æœ‰å…³URLçš„ä¿¡æ¯ã€‚ DOMï¼šæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼Œåœ¨HTML DOMä¸­ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½æ˜¯èŠ‚ç‚¹ï¼Œæ–‡æŒ¡ï¼ˆdocumentï¼‰æœ¬èº«å°±æ˜¯æ–‡æ¡£èŠ‚ç‚¹ï¼Œæ‰€æœ‰çš„htmlå…ƒç´ ï¼ˆelement/æ ‡ç­¾ï¼‰æ˜¯å…ƒç´ èŠ‚ç‚¹ï¼Œæ‰€æœ‰çš„å…ƒç´ çš„å±æ€§æ˜¯å±æ€§èŠ‚ç‚¹ï¼Œå…ƒç´ çš„æ–‡æœ¬æ˜¯æ–‡æœ¬èŠ‚ç‚¹ï¼Œæ³¨é‡Šæ˜¯æ³¨é‡ŠèŠ‚ç‚¹ã€‚å¼•ç”¨ä¸€å¼ å›¾ï¼š DOMèŠ‚ç‚¹çš„æ“ä½œå±æ€§è·Ÿæ–¹æ³•ã€‚ 1.è®¿é—®/è·å–èŠ‚ç‚¹document.getElementById(id); //è¿”å›å¯¹æ‹¥æœ‰æŒ‡å®šidçš„ç¬¬ä¸€ä¸ªå¯¹è±¡è¿›è¡Œè®¿é—®document.getElementsByName(name); //è¿”å›å¸¦æœ‰æŒ‡å®šåç§°çš„èŠ‚ç‚¹é›†åˆ document.getElementsByTagName(tagname); //è¿”å›å¸¦æœ‰æŒ‡å®šæ ‡ç­¾åçš„å¯¹è±¡é›†åˆ document.getElementsByClassName(classname); //è¿”å›å¸¦æœ‰æŒ‡å®šclassåç§°çš„å¯¹è±¡é›†åˆ 2.åˆ›å»ºèŠ‚ç‚¹/å±æ€§document.createElement() //åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹document.createAttribute() //å¯¹æŸä¸ªèŠ‚ç‚¹åˆ›å»ºå±æ€§document.createTextNode() // åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹3.æ·»åŠ èŠ‚ç‚¹document.inseretBefore(newNode,referenceNode) // åœ¨æŸä¸ªèŠ‚ç‚¹å‰æ’å…¥èŠ‚ç‚¹parentNode.appendChild(newNode) // ç»™æŸä¸ªèŠ‚ç‚¹æ·»åŠ å­èŠ‚ç‚¹4.å¤åˆ¶èŠ‚ç‚¹cloneNodeï¼ˆtrue/falseï¼‰ //å¤åˆ¶æŸä¸ªèŠ‚ç‚¹5.åˆ é™¤èŠ‚ç‚¹parentNode.removeChildï¼ˆnodeï¼‰ // åˆ é™¤æŸä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹6.å±æ€§æ“ä½œgetAttributeï¼ˆnameï¼‰ // é€šè¿‡å±æ€§åç§°è·å–æŸä¸ªèŠ‚ç‚¹å±æ€§çš„å€¼setAttributeï¼ˆname,valueï¼‰ // ä¿®æ”¹æŸä¸ªèŠ‚ç‚¹å±æ€§çš„å€¼removeAttributeï¼ˆnameï¼‰ //åˆ é™¤æŸä¸ªå±æ€§7.æŸ¥æ‰¾èŠ‚ç‚¹.firstChild // è·å–ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹.firstElementChild // è·å–ç¬¬ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹.lastChild // è·å–æœ€åä¸€ä¸ªå­èŠ‚ç‚¹.lastElementChild // è·å–æœ€åä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹.childNodes // è·å–èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹8.è·å–ç›¸é‚»çš„èŠ‚ç‚¹.previousSibling //è·å–å·²çŸ¥èŠ‚ç‚¹çš„ç›¸é‚»çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹.previousElementSibling //è·å–å·²çŸ¥èŠ‚ç‚¹çš„ç›¸é‚»çš„ä¸Šä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹.nextSibling //è·å–å·²çŸ¥èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹.nextElementSibling //è·å–å·²çŸ¥èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹9.è·å–çˆ¶èŠ‚ç‚¹.parentNode //å¾—åˆ°å·²çŸ¥èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹10.æ›¿æ¢èŠ‚ç‚¹.replaceï¼ˆ newNodeï¼ŒoldNodeï¼‰ //ä»çˆ¶èŠ‚ç‚¹ä¸­ç”¨æ–°èŠ‚ç‚¹ææ¢æ—§èŠ‚ç‚¹11.ä¿®æ”¹æ–‡æœ¬èŠ‚ç‚¹appendDataï¼ˆdataï¼‰ //åœ¨æ–‡æœ¬èŠ‚ç‚¹åæ·»åŠ èŠ‚ç‚¹deleteDataï¼ˆstart,lengthï¼‰ //ä»startå¤„åˆ é™¤lengthå­—ç¬¦insertDataï¼ˆstartï¼Œdataï¼‰ //åœ¨startå¤„æ’å…¥å­—ç¬¦ï¼Œstartçš„å¼€å§‹å€¼æ˜¯0replaceDataï¼ˆstartï¼Œlengthï¼Œdataï¼‰//åœ¨startå¤„ç”¨dataæ›¿æ¢lengthä¸ªå­—ç¬¦12.nodeName èŠ‚ç‚¹çš„åç§°ã€‚å…ƒç´ èŠ‚ç‚¹çš„ nodeName ç­‰åŒäºæ ‡ç­¾åå±æ€§èŠ‚ç‚¹çš„ nodeName æ˜¯å±æ€§åç§°æ–‡æœ¬èŠ‚ç‚¹çš„ nodeName æ€»æ˜¯ #textæ–‡æ¡£èŠ‚ç‚¹çš„ nodeName æ€»æ˜¯ #document13.nodeValue èŠ‚ç‚¹çš„å€¼å…ƒç´ èŠ‚ç‚¹çš„ nodeValue æ˜¯ nullæ–‡æœ¬èŠ‚ç‚¹çš„ nodeValue æ˜¯æ–‡æœ¬æ–‡æœ¬å±æ€§èŠ‚ç‚¹çš„ nodeValue æ˜¯å±æ€§å€¼-------------------------------------------------------------------//ä¾‹å­&lt;body&gt; &lt;div id=\"root\"&gt; &lt;a href=\"#\" id=\"a\"&gt;&lt;/a&gt; &lt;p&gt;&lt;/p&gt; &lt;/div&gt;&lt;/body&gt; var myTitle = document.getElementById(\"root\").childNodesconsole.log(myTitle)//NodeList(5) [text, a#a, text, p, text] æ³¨ï¼šæ¢è¡Œåœ¨æµè§ˆå™¨é‡Œé¢æ˜¯å½“æˆtextèŠ‚ç‚¹","link":"/2020/03/09/javascript/javaScript-base-2/"},{"title":"webpackè¿›é˜¶ä½¿ç”¨(ä¸Š)","text":"å®ç°è‡ªåŠ¨è¡¥å……æ ·å¼å‰ç¼€ä¸pxè½¬remä½¿ç”¨postcss(åå¤„ç†å™¨)æ¥å®ç°è‡ªåŠ¨è¡¥å……æ ·å¼å‰ç¼€ä¸pxè½¬remã€‚åœ¨wepackä¸­ä½¿ç”¨postcss-loaderæ¥å®ç°postcssçš„åŠŸèƒ½ã€‚å®ç°pxè½¬remçš„è¯ä¹Ÿå¯ä»¥ä½¿ç”¨px2rem-loaderï¼Œè¿™é‡Œä¸ºäº†æ–¹ä¾¿ä¸€èµ·ä½¿ç”¨å°±ç”¨äº†postcssçš„æ’ä»¶æ¥å®ç°ã€‚å¦å¤–è¿˜éœ€è¦åŠ¨æ€æŒ‡å®šhtmlçš„pxæ¥å®ç°è‡ªé€‚åº”ã€‚å¯ä»¥ä½¿ç”¨é˜¿é‡Œç§»åŠ¨ç«¯çš„lib-flexibleåº“(æ ¹htmlå…ƒç´ çš„fons-sizeçš„è®¡ç®—ï¼Œè·å–çš„æ˜¯å½“å‰æµè§ˆå™¨çš„å®½åº¦/10)ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å†™ã€‚ { test:/\\.css$/, use:[ MiniCssExtractPlugin.loader, 'css-loader', { loader:'postcss-loader', options:{ plugins:()=&gt;[ require('autoprefixer')({ //è‡ªåŠ¨è¡¥é½å‰ç¼€ browsers:[\"last 2 version\",\"&gt;1%\"] //æœ€æ–°çš„ä¸¤ä¸ªç‰ˆæœ¬ä¸”ä½¿ç”¨ç‡å¤§äº1%çš„æµè§ˆå™¨ }), require('postcss-plugin-px2rem')({ //1rem ç­‰äºå¤šå°‘px é»˜è®¤æ˜¯1rem ç­‰äº100px //è¿™ä¸ªå€¼è¦æ ¹æ®ä½ è®¾è®¡ç¨¿ä¸æ ¹å…ƒç´ çš„è‡ªé€‚åº”è®¾ç½®è€Œå®š rootValue:75, unitPrecision:8, //å…è®¸REMå•ä½å¢é•¿åˆ°çš„åè¿›åˆ¶æ•°å­—ï¼Œè²Œä¼¼æ²¡ä»€ä¹ˆç”¨ propWhiteList: [], //ç™½åå•ï¼Œé»˜è®¤ç©ºæ•°ç»„ä¸å¯ç”¨ åŒ¹é…æ­£åˆ™ propBlackList: [], //é»‘åå•ï¼Œé»˜è®¤ç©ºæ•°ç»„ä¸å¯ç”¨ åŒ¹é…æ­£åˆ™ exclude:false, //æ’é™¤çš„ç›®å½• æ”¯æŒæ­£åˆ™ selectorBlackList: [], //è¦å¿½ç•¥å¹¶ä¿ç•™ä¸ºpxçš„é€‰æ‹©å™¨ ignoreIdentifier: false, // replace: true, mediaQuery: false, //å…è®¸åœ¨åª’ä½“æŸ¥è¯¢ä¸­è½¬æ¢px minPixelValue: 1 //è®¾ç½®è¦æ›¿æ¢çš„æœ€å°åƒç´ å€¼(1pxä¼šè¢«è½¬rem) é»˜è®¤ 0 }) ] } } ],} å¤šé¡µé¢æ‰“åŒ…åŠ¨æ€çš„è®¾ç½®å…¥å£é…ç½®åŠåŠ¨æ€åˆ›å»ºhtml-webpack-pluginæ¥å®ç°è‡ªåŠ¨åŒ–å¤šé¡µé¢é…ç½®ã€‚éœ€æ³¨æ„çš„ä¸€ç‚¹æ˜¯å¤šå…¥å£æ–‡ä»¶çš„ä½ç½®è¦æœ‰ç›¸åŒçš„çº¦æŸè§„å®šï¼Œæ‰èƒ½æ­£åˆ™åŒ¹é…ã€‚ //å¤šé¡µé¢è‡ªåŠ¨åŒ–é…ç½®const glob = require('glob');const setMPA = ()=&gt;{ const entry = {}; const htmlwebpackplugins = []; //ä½¿ç”¨globåº“æ¥ç±»ä¼¼linuxä¸‹æ–‡ä»¶çš„é€šé…åŒ¹é…çš„æ–¹å¼è·å–æ¯ä¸ªæ¨¡å—çš„å…¥å£æ–‡ä»¶çš„è·¯å¾„ã€‚ const entryFiles = glob.sync(path.join(__dirname,'./src/*/index.js')); entryFiles.map((file)=&gt;{ let match = file.match(/src\\/(.*)\\/index\\.js/); //(.*)è´ªå©ªæ¨¡å¼åŒ¹é…ä»»æ„å­—ç¬¦ let pageName = match &amp;&amp; match[1]; //è·å–ç¬¬äºŒä¸ªå­è¡¨è¾¾å¼é‡Œé¢çš„åŒ¹é…å€¼ entry[pageName] = file; htmlwebpackplugins.push( new HtmlWebpackPlugin({ template:path.join(__dirname,'src/index.html'), filename:`${pageName}.html`, chunks:[pageName], //é’ˆå¯¹å¤šå…¥å£æ–‡ä»¶,å°±æ˜¯é€‰æ‹©è¦htmlåµŒå…¥çš„jsæ–‡ä»¶ inject:true, //æ”¾ç½®jsæ–‡ä»¶çš„ä½ç½®ï¼Œå¦‚æœè®¾ç½®ä¸º true æˆ–è€… bodyï¼Œæ‰€æœ‰çš„ javascript èµ„æºå°†è¢«æ”¾ç½®åˆ° body å…ƒç´ çš„åº•éƒ¨ï¼Œ'head' å°†æ”¾ç½®åˆ° head å…ƒç´ ä¸­ã€‚falseåˆ™ä¸ä¼šå¼•å…¥ã€‚ minify:{ html5:true, collapseWhitespace:true,//å»é™¤ç©ºæ ¼æ¢è¡Œç¬¦ removeComments:true,//æ˜¯å¦å»é™¤æ³¨é‡Š minifyCSS:true, //å‹ç¼©ä¸€å¼€å§‹å°±å†…è”åœ¨ html é‡Œé¢çš„csså’Œjs minifyJS:true, preserveLineBreaks:false } }), ) }); return { entry, htmlwebpackplugins }}const {entry,htmlwebpackplugins} = setMPA(); source-mapä¿¡æ¯æ–‡ä»¶ï¼Œé‡Œé¢å‚¨å­˜ç€ä½ç½®ä¿¡æ¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè½¬æ¢åçš„ä»£ç çš„æ¯ä¸€ä¸ªä½ç½®ï¼Œæ‰€å¯¹åº”çš„è½¬æ¢å‰çš„ä½ç½®ã€‚ä½¿ç”¨sourceMapæ¥æ„å»ºæ‰“åŒ…å‰åçš„ä»£ç ä¹‹é—´çš„å…³è”ï¼Œå› ä¸ºæ‰“åŒ…å‰åçš„ä»£ç å·®å¼‚å·¨å¤§ï¼Œå¦‚æœå‡ºç°é—®é¢˜çš„è¯å¾ˆéš¾æ‰¾åˆ°ç›¸åº”çš„ä½ç½®ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨sourceMapæ¥çŸ¥é“æºæ–‡ä»¶é”™è¯¯çš„åœ°æ–¹ã€‚è‡³äºå…¶åŸç†æ¯”è¾ƒæ·±å¥¥ï¼Œæœ‰å…´è¶£æœä¸€ä¸‹é˜®ä¸€å³°çš„å¤§ä½¬çš„æ–‡ç« ã€‚åœ¨webpacké‡Œé¢æä¾›äº†è®¸å¤šæ¨¡å¼ï¼Œå¯ä»¥æ‹†åˆ†ç»„åˆï¼Œä¸‹é¢å°†ä¸€ä¸‹åŸºæœ¬æ„æˆçš„å…ƒç´ çš„å«ä¹‰ã€‚ psï¼šä»¥ä¸‹ä¾‹å­ä¸ç®¡æ˜¯å¼€å‘ç¯å¢ƒè¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒéƒ½éœ€è¦å°†modeè®¾ç½®ä¸ºnoneï¼Œå› ä¸ºåœ¨ç‰¹å®šç¯å¢ƒä¸‹devtoolæŒ‡å®šäº†é»˜è®¤å€¼,ä¾‹å¦‚productionçš„æƒ…å†µä¸‹ï¼Œä¸ºäº†å®‰å…¨ï¼Œæ˜¯ä¸èƒ½æ˜ å°„åˆ°çœŸå®æ–‡ä»¶çš„ evalï¼ševalä½œç”¨æ˜¯è®©æ‰“åŒ…åçš„æ–‡ä»¶é‡Œé¢çš„æ¯ä¸ªæ¨¡å—ä»£ç éƒ½ä½¿ç”¨evalå»æ‰§è¡Œï¼Œå¹¶ä¸”ä¼šè¿½åŠ //@ sourceURLï¼ˆåŸå§‹æ–‡ä»¶çš„urlï¼‰ã€‚å¯èƒ½å› ä¸º eval ä¸­ä¸ºå­—ç¬¦ä¸²å½¢å¼ï¼Œæ‰€ä»¥å½“æºç å˜åŠ¨çš„æ—¶å€™è¿›è¡Œå­—ç¬¦ä¸²å¤„ç†ä¼šæå‡ rebuild çš„é€Ÿåº¦ï¼Œæ‰€ä»¥æ‰€æœ‰å¸¦æœ‰ eval çš„é€‰é¡¹ï¼Œrebuild é€Ÿåº¦éƒ½å¾ˆå¿«ã€‚ devtool : 'eval'//æ‰“åŒ…åçš„æ–‡ä»¶({ 8: function (module, exports) { eval('/*\\r\\n * @Description: \\r\\n * @Autor: cn\\r\\n * @Date: 2020-02-22 10:39:35\\r\\n * @LastEditors: cn\\r\\n * @LastEditTime: 2020-02-22 10:39:35\\r\\n */\\nconsole.log(\"search\");\\n\\n//# sourceURL=webpack:///./src/search/index.js?') //ç”Ÿæˆäº†sourceURL=webpack:///./src/search/index.jså°±å¯ä»¥çŸ¥é“åŸå§‹æ–‡ä»¶ }}); source-mapï¼šé¡¾åæ€ä¹‰ä¼šç”Ÿæˆä¸€ä¸ª.mapæ–‡ä»¶ï¼Œæ¥å…³è”æºæ–‡ä»¶è·Ÿæ‰“åŒ…åçš„æ–‡ä»¶ã€‚ //# sourceMappingURL=index.js.map æ‰“åŒ…åçš„æ–‡ä»¶åº•éƒ¨ä¼šæŒ‡å®šå…¶sourcemapæ–‡ä»¶--------------------------------------------------------------------------------//source-map æ–‡ä»¶ç®€ä»‹{ \"version\": 3, //Source mapçš„ç‰ˆæœ¬ï¼Œç›®å‰ä¸º3ã€‚ \"file\": \"./static/js/index.js\", //è½¬æ¢åçš„æ–‡ä»¶å \"sources\": [ //è½¬æ¢å‰çš„æ–‡ä»¶ã€‚è¯¥é¡¹æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¡¨ç¤ºå¯èƒ½å­˜åœ¨å¤šä¸ªæ–‡ä»¶åˆå¹¶ã€‚ \"webpack:///webpack/bootstrap\", \"webpack:///./src/index/index.js\" ], \"mappings\": \"AAAA\",//è®°å½•ä½ç½®ä¿¡æ¯çš„å­—ç¬¦ä¸² \"sourceRoot\": \"\" //è½¬æ¢å‰çš„æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ã€‚å¦‚æœä¸è½¬æ¢å‰çš„æ–‡ä»¶åœ¨åŒä¸€ç›®å½•ï¼Œè¯¥é¡¹ä¸ºç©ºã€‚} inline ï¼š inline çš„å«ä¹‰å°±æ˜¯ä¸äº§ç”Ÿç‹¬ç«‹çš„ .map æ–‡ä»¶ï¼Œè€ŒæŠŠ source-map çš„å†…å®¹ä»¥ dataURIçš„æ–¹å¼è¿½åŠ åˆ° bundle ä»¶æœ«å°¾ã€‚è¿™æ ·ä¼šä½¿å¾—æ–‡ä»¶æ‰“åŒ…åå˜å¾—æ¯”è¾ƒå¤§ã€‚ //# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9... cheapï¼šå¿½ç•¥åˆ—çš„ä¿¡æ¯ï¼Œåªå®šä½åˆ°æŸä¸€è¡Œã€‚æå‡äº†æ„å»ºé€Ÿåº¦ã€‚ moduleï¼šåŒ…å«äº†loaderæ¨¡å—ä¹‹é—´çš„sourcemapï¼Œå› ä¸ºwebpackæœ€ç»ˆä¼šå°†æ‰€æœ‰çš„éjsèµ„æºï¼Œé€šè¿‡loaderçš„å½¢å¼è½¬å˜æˆjsèµ„æºã€‚æ¯”å¦‚jsxè¯­è¨€çš„æ“ä½œåˆ†ä¸ºï¼šjsxâ€”â€”ï¼ˆloaderï¼‰â€”â€”jsâ€”â€”ï¼ˆå‹ç¼©ç­‰å¤„ç†ï¼‰â€”â€”å‹ç¼©åçš„jsã€‚å¦‚æœæ²¡æœ‰loaderä¹‹é—´çš„sourcemapï¼Œé‚£ä¹ˆåœ¨debugçš„æ—¶å€™å®šä¹‰åˆ°ä¸Šå›¾ä¸­çš„å‹ç¼©å‰çš„jså¤„ï¼Œè€Œä¸èƒ½è¿½è¸ªåˆ°jsxä¸­ã€‚ ä¸åŒç¯å¢ƒä¸‹çš„è¾ƒå¥½æ­é…ï¼šé¦–å…ˆï¼Œé€‰æ‹©cheapï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬åªéœ€è¦å®šä½åˆ°æŸè¡Œå°±å¯ä»¥äº†ï¼Œå¯ä»¥åŠ å¿«æ„å»ºé€Ÿåº¦ã€‚è€Œmoduleå°±ä¸ç”¨å¤šè¯´äº†ï¼Œæ‰“åŒ…ç”¨åˆ°çš„loaderä¹‹å¤šï¼Œéœ€è¦å¾—åˆ°åŸå§‹ä»£ç ã€‚è€Œå¼€å‘ä½¿ç”¨evalçš„åŸå› æ˜¯è°ƒè¯•çš„æ—¶å€™é‡å»ºçš„é€Ÿåº¦ä¼šå¿«ä¸€äº›ï¼Œç”Ÿäº§ä¸ç”¨æ˜¯å› ä¸ºeval-source-mapç±»ä¼¼inlineä¸€æ ·æŠŠmapä»£ç ä¸¢åˆ°evalè¯­å¥é‡Œé¢,åŠ å¤§æ‰“åŒ…ä½“ç§¯ï¼ //åœ¨å¼€å‘ç¯å¢ƒä¸­æˆ‘ä»¬ä½¿ç”¨ï¼šcheap-module-eval-source-map//åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æˆ‘ä»¬ä½¿ç”¨ï¼šcheap-module-source-mapã€‚ æå–å…¬å…±èµ„æºæŠ½å–ä¾‹å¦‚æ¡†æ¶çš„ä¾èµ–åŒ…ï¼Œä»¥åŠé¡¹ç›®é‡Œé¢çš„é€šç”¨æ¨¡å—ç­‰ï¼Œå‡å°‘æ‰“åŒ…åæ–‡ä»¶çš„ä½“ç§¯ã€‚ ä½¿ç”¨html-webpack-externals-pluginæ’ä»¶ï¼Œå°†é€šç”¨åº“ä¾èµ–é€šè¿‡cdnæ–¹å¼å¼•å…¥æˆ–è€…æœ¬åœ°å¼•å…¥,æŠ½ç¦»bundleã€‚è¿™ä¸ªæ’ä»¶åœ¨htmlwebpackpluginåé¢å®ä¾‹åŒ–çš„è¯å¯ä»¥ä¸ç”¨æ‰‹åŠ¨å¼•å…¥scriptï¼Œå¦‚æœä¸æ˜¯å°±å¾—åœ¨htmlæ‰‹åŠ¨å¼•å…¥ã€‚ //åŸºç¡€åº“åˆ†ç¦»æ’ä»¶ï¼Œå°†é€šç”¨åº“ä¾èµ–é€šè¿‡cdnæˆ–è€…æœ¬åœ°å¼•å…¥,æŠ½ç¦»bundlenew HtmlWebpackExternalsPlugin({ externals:[ { module:'react', entry:'https://11.url.cn/now/lib/16.2.0/react.min.js', global:'React' }, { module:'react-dom', entry:'https://11.url.cn/now/lib/16.2.0/react-dom.min.js', global:'ReactDOM' } ]}) ä½¿ç”¨webpack4å†…ç½®çš„splitChunksPluginå¯ä»¥è‡ªå®šä¹‰æŠ½ç¦»æ¨¡å—ï¼ŒåŒ…æ‹¬é¡¹ç›®é€šç”¨çš„æ¨¡å—ã€‚ optimization:{ splitChunks:{ chunks:'all',// asyncï¼šå¼‚æ­¥å¼•å…¥çš„åº“è¿›è¡Œåˆ†ç¦»ï¼ˆé»˜è®¤ï¼‰ï¼Œ initialï¼š åŒæ­¥å¼•å…¥çš„åº“è¿›è¡Œåˆ†ç¦»ï¼Œ allï¼šæ‰€æœ‰å¼•å…¥çš„åº“è¿›è¡Œåˆ†ç¦»ï¼ˆæ¨èï¼‰ minSize:0, //å‹ç¼©å‰çš„æ¨¡å—çš„æœ€å°å¤§å°,é»˜è®¤0 minChunks:1, //æœ€å°è¢«å¼•ç”¨çš„æ¬¡æ•°,é»˜è®¤1 maxAsyncRequests:1, //æœ€å¤§çš„æŒ‰éœ€åŠ è½½çš„æ¬¡æ•°,é»˜è®¤æ˜¯1,è·ŸmaxInitialRequestsé“ç†åº”è¯¥ä¸€æ ·,å¯æ˜¯ä¸è®ºè®¾ç½®å¤šå°‘éƒ½æ˜¯æœ‰å¤šå°‘ä¸ªæ‰“å¤šå°‘ä¸ªã€‚å¾…æ±‚è¯... /*å…¥å£æ–‡ä»¶åšä»£ç åˆ†å‰²æœ€å¤šèƒ½åˆ†æˆ3ä¸ªjsæ–‡ä»¶ï¼Œé»˜è®¤æ˜¯1,ä¾‹å¦‚indexï¼Œé»˜è®¤1çš„åªæ‰“åŒ…ç”Ÿæˆindex_hashæ–‡ä»¶,ç°åœ¨è¦å°†å¼•å…¥çš„react/react-domç­‰ä¾èµ–åŒ…æ‰“æˆä¸€ä¸ªjs,è¿˜æœ‰å°†å¼•ç”¨æ¬¡æ•°è¶…è¿‡2çš„æ¨¡å—æŠ½æˆä¸€ä¸ªcommon å°±å¾—3*/ maxInitialRequests:3, name:true, cacheGroups:{ //cacheGroupé»˜è®¤åŸºç¡€ä¸Šé¢çš„é…ç½®ï¼Œå¯ä»¥è¦†ç›– vendors:{ test: /[\\\\/]node_modules[\\\\/]/, //åŒ¹é…node_modulesä¸‹çš„ä¾èµ–åŒ… priority: -10,////å€¼è¶Šå¤§,ä¼˜å…ˆçº§è¶Šé«˜.æ¨¡å—å…ˆæ‰“åŒ…åˆ°ä¼˜å…ˆçº§é«˜çš„ç»„é‡Œ name:'vendors' }, commons:{ name:'commons', minChunks:2, reuseExistingChunk: true //å¦‚æœä¸€ä¸ªæ¨¡å—å·²ç»è¢«æ‰“åŒ…è¿‡äº†,é‚£ä¹ˆå†æ‰“åŒ…æ—¶å°±å¿½ç•¥è¿™ä¸ªä¸Šæ¨¡å— } } }}`","link":"/2020/03/20/webpack4/webpack4-base4/"}],"tags":[{"name":"javascript","slug":"javascript","link":"/tags/javascript/"},{"name":"es6","slug":"es6","link":"/tags/es6/"},{"name":"äºŒå‰æ ‘","slug":"äºŒå‰æ ‘","link":"/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/"},{"name":"é˜Ÿåˆ—","slug":"é˜Ÿåˆ—","link":"/tags/%E9%98%9F%E5%88%97/"},{"name":"é€’å½’","slug":"é€’å½’","link":"/tags/%E9%80%92%E5%BD%92/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","link":"/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"css3","slug":"css3","link":"/tags/css3/"}],"categories":[{"name":"javascript","slug":"javascript","link":"/categories/javascript/"},{"name":"å‰‘æŒ‡offer","slug":"å‰‘æŒ‡offer","link":"/categories/%E5%89%91%E6%8C%87offer/"},{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","link":"/categories/%E9%9D%A2%E8%AF%95%E9%A2%98/"},{"name":"pattern","slug":"pattern","link":"/categories/pattern/"},{"name":"css3","slug":"css3","link":"/categories/css3/"},{"name":"webpack4","slug":"webpack4","link":"/categories/webpack4/"}]}